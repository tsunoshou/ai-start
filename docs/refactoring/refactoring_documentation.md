# Core SaaS Framework è¨­è¨ˆãƒ»ç§»è¡Œãƒ»å®Ÿè£…ã‚¬ã‚¤ãƒ‰

## ğŸ“œ ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¤ã„ã¦

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€Core SaaS Framework ã®è¨­è¨ˆæ€æƒ³ã€ç¾çŠ¶ã‹ã‚‰ã®ç§»è¡Œè¨ˆç”»ã€åŸºæœ¬çš„ãªå®Ÿè£…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã€ãŠã‚ˆã³å°†æ¥çš„ãªæ‹¡å¼µè¨ˆç”»ã‚’çµ±åˆã—ãŸã‚‚ã®ã§ã™ã€‚å…ƒã€…ã¯è¤‡æ•°ã®æ–‡æ›¸ã«åˆ†ã‹ã‚Œã¦ã„ãŸå†…å®¹ã‚’ã€é–‹ç™ºæ™‚ã®å‚ç…§æ€§ã‚’é«˜ã‚ã‚‹ãŸã‚ã«ä¸€ã¤ã«ã¾ã¨ã‚ã¾ã—ãŸã€‚

**æ§‹æˆ:**

1.  **[è¨­è¨ˆæ›¸ï¼šCore SaaS Framework ç†æƒ³æ§‹æˆã®è¨­è¨ˆ](#1-è¨­è¨ˆæ›¸core-saas-framework-ç†æƒ³æ§‹æˆã®è¨­è¨ˆ)**: ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒç›®æŒ‡ã™ç†æƒ³çš„ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã€ä¸»è¦æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã€è¨­è¨ˆåŸå‰‡ã‚’å®šç¾©ã—ã¾ã™ã€‚
2.  **[ç§»è¡Œè¨ˆç”»æ›¸ï¼šç¾çŠ¶ã‹ã‚‰ã®æ®µéšçš„ç§»è¡Œæ‰‹é †](#2-ç§»è¡Œè¨ˆç”»æ›¸ç¾çŠ¶ã‹ã‚‰ã®æ®µéšçš„ç§»è¡Œæ‰‹é †)**: æ—¢å­˜ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ç†æƒ³æ§‹æˆã¸ç§»è¡Œã™ã‚‹ãŸã‚ã®å…·ä½“çš„ãªã‚¹ãƒ†ãƒƒãƒ—ã€ç¾çŠ¶åˆ†æã€ãƒªã‚¹ã‚¯ç®¡ç†ã«ã¤ã„ã¦è¨˜è¿°ã—ã¾ã™ã€‚
3.  **[ãƒ™ãƒ¼ã‚¹ãƒ‰ãƒ¡ã‚¤ãƒ³å®Ÿè£…æŒ‡ç¤ºæ›¸](#3-ãƒ™ãƒ¼ã‚¹ãƒ‰ãƒ¡ã‚¤ãƒ³å®Ÿè£…æŒ‡ç¤ºæ›¸)**: ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å…¨ä½“ã§å…±é€šã—ã¦åˆ©ç”¨ã•ã‚Œã‚‹åŸºåº•ã‚¯ãƒ©ã‚¹ (Entity, ValueObject, Repository ãªã©)ã€å…±é€šã®ã‚¨ãƒ©ãƒ¼å‹ã€Resultå‹ã€åŸºæœ¬çš„ãªè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã€å‘½åè¦å‰‡ã€ãŠã‚ˆã³ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã®åŸºç¤ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚ãƒ‰ãƒ¡ã‚¤ãƒ³å›ºæœ‰ã®å®Ÿè£…ã‚’è¡Œã†ä¸Šã§ã®å…±é€šåŸºç›¤ã¨ãªã‚Šã¾ã™ã€‚
4.  **[Userãƒ‰ãƒ¡ã‚¤ãƒ³å®Ÿè£…æŒ‡ç¤ºæ›¸](#4-userãƒ‰ãƒ¡ã‚¤ãƒ³å®Ÿè£…æŒ‡ç¤ºæ›¸)**: ä¸»è¦ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ä¸€ã¤ã§ã‚ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†æ©Ÿèƒ½ã‚’ä¾‹ã«ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã®è²¬å‹™ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹é€ ã€ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Ÿè£…ã€ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã‚’å…·ä½“çš„ã«ç¤ºã—ã¾ã™ã€‚ä»–ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’å®Ÿè£…ã™ã‚‹éš›ã®å…·ä½“çš„ãªå‚ç…§ãƒ¢ãƒ‡ãƒ«ã¨ãªã‚Šã¾ã™ã€‚
5.  **[å°†æ¥å±•é–‹è¨ˆç”»æ›¸ï¼šCLIåŒ–ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåŒ–æˆ¦ç•¥](#5-å°†æ¥å±•é–‹è¨ˆç”»æ›¸cliåŒ–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåŒ–æˆ¦ç•¥)**: ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®é•·æœŸçš„ãªå±•æœ›ã¨ã—ã¦ã€CLIãƒ„ãƒ¼ãƒ«ã®é–‹ç™ºã‚„æ©Ÿèƒ½ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåŒ–ã«ã‚ˆã‚‹ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ å½¢æˆè¨ˆç”»ã«ã¤ã„ã¦è¨˜è¿°ã—ã¾ã™ã€‚
6.  **[ç”¨èªé›†](#ç”¨èªé›†)**: ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå†…ã§ä½¿ç”¨ã•ã‚Œã‚‹ä¸»è¦ãªæŠ€è¡“ç”¨èªã‚„è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚

---

# 1. è¨­è¨ˆæ›¸ï¼šCore SaaS Framework ç†æƒ³æ§‹æˆã®è¨­è¨ˆ

## ğŸ¯ ç›®çš„

**(ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ç›®çš„)**: ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€Core SaaS Framework ãŒç›®æŒ‡ã™ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ç†æƒ³çš„ãªæ§‹æˆã€æ¡ç”¨ã™ã‚‹ä¸»è¦æŠ€è¡“ã€ãŠã‚ˆã³è¨­è¨ˆä¸Šã®åŸºæœ¬åŸå‰‡ã‚’å®šç¾©ã—ã¾ã™ã€‚ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å…¨ä½“ã®è¨­è¨ˆæ€æƒ³ã®åŸºç›¤ã¨ãªã‚Šã¾ã™ã€‚

ã“ã®è¨­è¨ˆæ›¸ã¯ã€å˜ä¸€ã®SaaSã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ã€**å†åˆ©ç”¨å¯èƒ½ãªSaaSè£½é€ ãƒã‚·ãƒ³**ã¸ã®é€²åŒ–ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®ç†æƒ³çš„ãªæ§‹é€ ã‚’å®šç¾©ã—ã¾ã™ã€‚ã“ã®è¨­è¨ˆã«ã‚ˆã‚Šã€è¤‡æ•°ã®SaaSãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å†åˆ©ç”¨å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’åŠ¹ç‡çš„ã«ä½œæˆãƒ»ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

## ğŸ“‹ å‰ææ¡ä»¶

- **ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆï¼ˆDDDï¼‰ã¨ Clean Architecture ã®æ¡ç”¨**
  - ãƒ‰ãƒ¡ã‚¤ãƒ³ä¸­å¿ƒã®è¨­è¨ˆã‚’åŸºæœ¬ã¨ã™ã‚‹ãŒã€ä»–ã®è¨­è¨ˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«åŸºã¥ããƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚‚å…±å­˜å¯èƒ½
  - ãƒ¬ã‚¤ãƒ¤ãƒ¼é–“ã®æ˜ç¢ºãªè²¬ä»»åˆ†é›¢
  - ä¾å­˜é–¢ä¿‚ã®æ–¹å‘ã®åˆ¶å¾¡ï¼ˆå†…å´ã«ä¾å­˜ï¼‰
- **ä¾å­˜æ€§æ³¨å…¥ (DI) ã‚³ãƒ³ãƒ†ãƒŠã®æ´»ç”¨** (ä¾‹: `tsyringe`)
  - ã‚¯ãƒ©ã‚¹é–“ã®ä¾å­˜é–¢ä¿‚ã‚’ç–çµåˆã«ã—ã€ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§ã‚’å‘ä¸Š

- **TypeScript ã«ã‚ˆã‚‹å‹å®‰å…¨æ€§ã®ç¢ºä¿**
  - å³æ ¼ãªå‹å®šç¾©ã«ã‚ˆã‚‹ãƒã‚°ã®é˜²æ­¢
  - é«˜ã„ä¿å®ˆæ€§ã¨æ‹¡å¼µæ€§ã®æä¾›

- **Next.js ã«ã‚ˆã‚‹ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**
  - App Router ã®æ´»ç”¨
  - Server Components ã¨ Client Components ã®é©åˆ‡ãªä½¿ã„åˆ†ã‘

- **ORM**: Drizzle ORM
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: PostgreSQL
- **èªè¨¼**: Auth.js (NextAuth.js v5)
- **ãƒ†ã‚¹ãƒˆ**: Vitest (Unit/Integration), Playwright (E2E)

## ğŸ—ï¸ å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

**ãƒ¢ãƒãƒ¬ãƒã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**ï¼ˆ**Turborepo** ã«ã‚ˆã‚‹å®Ÿè£…ï¼‰ã‚’æ¡ç”¨ã—ã¾ã™ã€‚

```mermaid
graph TD
    A[apps/saas-app] --> B(packages/user/application)
    A --> C(packages/billing/application)
    A --> D(packages/ui)
    A --> E(packages/shared)

    B --> F(packages/user/domain)
    B --> G(packages/user/infrastructure)
    B --> E

    C --> H(packages/billing/domain)
    C --> I(packages/billing/infrastructure)
    C --> B
    C --> E

    G --> F
    G --> J(packages/infrastructure)
    G --> E

    I --> H
    I --> J
    I --> E

    D --> E
    J --> E

    subgraph "Layer Dependency (within DDD package)"
        direction LR
        infra(Infrastructure) --> app(Application)
        app --> domain(Domain)
    end

    style A fill:#cceeff,stroke:#333,stroke-width:2px
    style D fill:#ccffcc,stroke:#333,stroke-width:2px
    style E fill:#fffccc,stroke:#333,stroke-width:2px
    style J fill:#fffccc,stroke:#333,stroke-width:2px
```
*(ä¸Šè¨˜ã¯ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ä¾å­˜é–¢ä¿‚ã‚’ç¤ºã™å›³ã®ä¾‹ã§ã™ã€‚å®Ÿéš›ã®é–‹ç™ºã§ã¯ Mermaid ãªã©ã®ãƒ„ãƒ¼ãƒ«ã§å›³ã‚’ç”Ÿæˆãƒ»ç®¡ç†ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™)*

### ãƒ¢ãƒãƒ¬ãƒã®ãƒ¡ãƒªãƒƒãƒˆ

- **ã‚³ãƒ¼ãƒ‰å…±æœ‰ã®å®¹æ˜“ã•**ï¼šå…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¤‡æ•°ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§å†åˆ©ç”¨
- **ä¸€è²«æ€§ã®ç¶­æŒ**ï¼šè¨­è¨ˆåŸå‰‡ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã€ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã®çµ±ä¸€
- **ç‹¬ç«‹ã—ãŸãƒ‡ãƒ—ãƒ­ã‚¤**ï¼šå€‹åˆ¥ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç‹¬ç«‹ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤å¯èƒ½
- **å°†æ¥ã®ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŒ–ã¸ã®æº–å‚™**ï¼šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é–“ã®å¢ƒç•Œã¨ä¾å­˜é–¢ä¿‚ã®æ˜ç¢ºåŒ–

## ğŸ“‚ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€  (ç†æƒ³å½¢)

```
/
â”œâ”€â”€ apps/                    # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç¾¤
â”‚   â”œâ”€â”€ saas-app/            # ãƒ¡ã‚¤ãƒ³SaaSã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ (ä¾‹: Next.js)
â”‚   â”‚   â”œâ”€â”€ app/             # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ public/          # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”‚   â”œâ”€â”€ tests/           # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å›ºæœ‰ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”‚   â””â”€â”€ e2e/         # E2Eãƒ†ã‚¹ãƒˆ (Playwright)
â”‚   â”‚   â”‚       â””â”€â”€ __tests__/
â”‚   â”‚   â”‚           â””â”€â”€ user-login.e2e.test.ts
â”‚   â”‚   â””â”€â”€ package.json     # ã‚¢ãƒ—ãƒªå›ºæœ‰ã®ä¾å­˜é–¢ä¿‚
â”‚   â””â”€â”€ admin/               # ç®¡ç†è€…å‘ã‘ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå°†æ¥çš„ã«ï¼‰
â”‚
â”œâ”€â”€ packages/                # å†åˆ©ç”¨å¯èƒ½ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç¾¤ (ãƒ‰ãƒ¡ã‚¤ãƒ³ã€å…±é€šãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€ãƒ„ãƒ¼ãƒ«ç­‰)
â”‚   â”œâ”€â”€ shared/              # å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ»ãƒ™ãƒ¼ã‚¹å®šç¾©
â”‚   â”‚   â”œâ”€â”€ base/            # åŸºæœ¬ã‚¯ãƒ©ã‚¹ãƒ»ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ (entity.base.ts, repository.base.interface.ts)
â”‚   â”‚   â”œâ”€â”€ errors/          # ã‚¨ãƒ©ãƒ¼å®šç¾© (app.error.ts)
â”‚   â”‚   â”œâ”€â”€ result/          # Resultå‹ (result.ts)
â”‚   â”‚   â”œâ”€â”€ types/           # å…±é€šå‹å®šç¾© (common.types.ts)
â”‚   â”‚   â”œâ”€â”€ utils/           # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•° (id.utils.ts)
â”‚   â”‚   â””â”€â”€ value-objects/   # å…±é€šå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ (id.vo.ts)
â”‚   â”‚
â”‚   â”œâ”€â”€ infrastructure/      # ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ database/        # DBã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (Drizzle), ã‚¹ã‚­ãƒ¼ãƒ
â”‚   â”‚   â”œâ”€â”€ auth/            # èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹ (Supabaseé€£æº)
â”‚   â”‚   â””â”€â”€ logger/          # ãƒ­ã‚®ãƒ³ã‚°
â”‚   â”‚
â”‚   â”œâ”€â”€ ui/                  # UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ components/      # å†åˆ©ç”¨å¯èƒ½ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (button.tsx)
â”‚   â”‚   â”œâ”€â”€ hooks/           # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ (use-toast.ts)
â”‚   â”‚   â””â”€â”€ providers/       # ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ (theme-provider.tsx)
â”‚   â”‚
â”‚   â”œâ”€â”€ user/                # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ (DDD)
â”‚   â”‚   â”œâ”€â”€ domain/          # ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ (è©³ç´°ã¯ä¸‹è¨˜)
â”‚   â”‚   â”œâ”€â”€ application/     # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ (è©³ç´°ã¯ä¸‹è¨˜)
â”‚   â”‚   â””â”€â”€ infrastructure/  # ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£å±¤ (è©³ç´°ã¯ä¸‹è¨˜)
â”‚   â”‚
â”‚   â”œâ”€â”€ [feature-name]/      # ãã®ä»–ã®æ©Ÿèƒ½ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ (ä¾‹: billing, mcp-client, realtime-service)
â”‚   â”‚   â””â”€â”€ ...              # ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã”ã¨ã®æ§‹é€  (DDDã¨ã¯é™ã‚‰ãªã„)
â”‚
â”œâ”€â”€ tsconfig.base.json       # å…±é€šTypeScriptè¨­å®š
â””â”€â”€ turbo.json               # Turborepoè¨­å®š
```

## ğŸ“¦ ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å†…éƒ¨æ§‹é€  (ä¾‹: user)

DDDã«åŸºã¥ããƒ‰ãƒ¡ã‚¤ãƒ³ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ä»¥ä¸‹ã®æ§‹é€ ã‚’æŒã¡ã¾ã™ï¼š

```
packages/user/
â”œâ”€â”€ domain/                  # ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤
â”‚   â”œâ”€â”€ entities/            # ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
â”‚   â”‚   â”œâ”€â”€ __tests__/       # ãƒ†ã‚¹ãƒˆ (Vitest)
â”‚   â”‚   â”‚   â””â”€â”€ user.entity.unit.test.ts
â”‚   â”‚   â””â”€â”€ user.entity.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ value-objects/       # å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â”‚   â”‚   â”œâ”€â”€ __tests__/       # ãƒ†ã‚¹ãƒˆ (Vitest)
â”‚   â”‚   â”‚   â””â”€â”€ email.vo.unit.test.ts
â”‚   â”‚   â”œâ”€â”€ user-id.vo.ts
â”‚   â”‚   â””â”€â”€ email.vo.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ enums/               # åˆ—æŒ™å‹
â”‚   â”‚   â”œâ”€â”€ __tests__/       # ãƒ†ã‚¹ãƒˆ (Vitest)
â”‚   â”‚   â”‚   â””â”€â”€ user-status.enum.unit.test.ts
â”‚   â”‚   â””â”€â”€ user-status.enum.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ repositories/        # ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚   â”‚   â””â”€â”€ user.repository.interface.ts
â”‚   â”‚
â”‚   â””â”€â”€ services/            # ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ (Userãƒ‰ãƒ¡ã‚¤ãƒ³å›ºæœ‰ã®ã‚‚ã®ãŒã‚ã‚Œã°)
â”‚       # ä¾‹: user-profile.service.ts
â”‚
â”œâ”€â”€ application/             # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”‚   â”œâ”€â”€ usecases/            # ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
â”‚   â”‚   â”œâ”€â”€ __tests__/       # ãƒ†ã‚¹ãƒˆ (Vitest)
â”‚   â”‚   â”‚   â”œâ”€â”€ create-user.usecase.unit.test.ts
â”‚   â”‚   â”‚   â””â”€â”€ create-user.usecase.integration.test.ts
â”‚   â”‚   â”œâ”€â”€ create-user.usecase.ts
â”‚   â”‚   â””â”€â”€ find-user-by-id.usecase.ts
â”‚   â”‚
â”‚   â””â”€â”€ dtos/                # ãƒ‡ãƒ¼ã‚¿è»¢é€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â”‚       â”œâ”€â”€ user.dto.ts
â”‚
â”œâ”€â”€ infrastructure/          # ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£å±¤
â”‚   â”œâ”€â”€ repositories/        # ãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£…
â”‚   â”‚   â”œâ”€â”€ __tests__/       # ãƒ†ã‚¹ãƒˆ (Vitest)
â”‚   â”‚   â”‚   â””â”€â”€ user.repository.integration.test.ts
â”‚   â”‚   â””â”€â”€ user.repository.ts  # Drizzleã«ã‚ˆã‚‹å®Ÿè£…
â”‚   â”‚
â”‚   â””â”€â”€ mappers/             # ãƒãƒƒãƒ‘ãƒ¼
â”‚       â”œâ”€â”€ __tests__/       # ãƒ†ã‚¹ãƒˆ (Vitest)
â”‚       â”‚   â””â”€â”€ user.mapper.unit.test.ts
â”‚       â””â”€â”€ user.mapper.ts
â”‚
â””â”€â”€ README.md                 # ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å›ºæœ‰ã®èª¬æ˜
```

## ğŸ”„ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾å­˜é–¢ä¿‚

ä¾å­˜æ–¹å‘ã¯ä»¥ä¸‹ã®åŸå‰‡ã«å¾“ã„ã¾ã™ï¼š

1. **å†…å´ã¸ã®ä¾å­˜**: DDDãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å†…éƒ¨ã§ã¯ã€å¤–å´ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯å†…å´ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«ä¾å­˜å¯èƒ½ã€ãã®é€†ã¯ä¸å¯
   - Infrastructure â†’ Application â†’ Domain
   - `apps/` ã¯ `packages/` å†…ã® `Application` å±¤ (ã¾ãŸã¯å…¬é–‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹) ã«ä¾å­˜

2. **ãƒ‰ãƒ¡ã‚¤ãƒ³é–“/ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–“ã®ä¾å­˜**:
   - å¿…è¦ãªå ´åˆã®ã¿ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–“ã®ä¾å­˜ã‚’è¨±å¯ã—ã¾ã™ã€‚
   - ä¾å­˜ã™ã‚‹å ´åˆã€ä¾å­˜ã•ã‚Œã‚‹å´ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒæä¾›ã™ã‚‹æ˜ç¢ºãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆå…¬é–‹é–¢æ•°ã€å‹å®šç¾©ã€ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ãªã©ï¼‰ã«ä¾å­˜ã—ã¾ã™ã€‚
   - å¾ªç’°ä¾å­˜ã¯é¿ã‘ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
   - ä¾‹: `@core/subscription` ãŒ `@core/user` ã® `UserId` ã‚„ `UserDto` ã«ä¾å­˜ã™ã‚‹ã€‚

3. **å…±é€šãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã®ä¾å­˜**: ã™ã¹ã¦ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯å…±é€šãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ (`@core/shared`, `@core/infrastructure`) ã«ä¾å­˜å¯èƒ½ã§ã™ã€‚

4. **éDDDãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³**:
   - `packages/` é…ä¸‹ã«ã¯ã€DDDä»¥å¤–ã®è¨­è¨ˆåŸå‰‡ã«åŸºã¥ããƒ‘ãƒƒã‚±ãƒ¼ã‚¸ (ä¾‹: ç‰¹å®šæŠ€è¡“ã¸ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€ç‰¹å®šæ©Ÿèƒ½ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ) ã‚‚é…ç½®å¯èƒ½ã§ã™ã€‚
   - ã“ã‚Œã‚‰ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚‚ã€ä»–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨é€£æºã™ã‚‹å ´åˆã¯æ˜ç¢ºãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å…¬é–‹ã—ã€ä¾å­˜é–¢ä¿‚ã®åŸå‰‡ (ç‰¹ã«å¾ªç’°ä¾å­˜ã®å›é¿) ã«å¾“ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
   - ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å†…éƒ¨ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¯ãã®ç›®çš„ã«å¿œã˜ã¦æœ€é©ãªã‚‚ã®ã‚’é¸æŠã§ãã¾ã™ã€‚

## ğŸ” ä»–ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¸ã®å‚ç…§

- å®Ÿè£…æ‰‹é †ã®è©³ç´°ã¯ [ç§»è¡Œè¨ˆç”»æ›¸](./02_migration_plan.md) ã‚’å‚ç…§
- ãƒ‰ãƒ¡ã‚¤ãƒ³å®Ÿè£…ã®è©³ç´°ã¯ [ãƒ™ãƒ¼ã‚¹ãƒ‰ãƒ¡ã‚¤ãƒ³å®Ÿè£…æŒ‡ç¤ºæ›¸](./03_base_domain_guide.md) ã¨ [Userãƒ‰ãƒ¡ã‚¤ãƒ³å®Ÿè£…æŒ‡ç¤ºæ›¸](./04_user_domain_guide.md) ã‚’å‚ç…§
- å°†æ¥çš„ãªæ‹¡å¼µè¨ˆç”»ã«ã¤ã„ã¦ã¯ [å°†æ¥å±•é–‹è¨ˆç”»æ›¸](./05_future_expansion_plan.md) ã‚’å‚ç…§ 

---

# 2. ç§»è¡Œè¨ˆç”»æ›¸ï¼šç¾çŠ¶ã‹ã‚‰ã®æ®µéšçš„ç§»è¡Œæ‰‹é †

## ğŸ¯ ç›®çš„

**(ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ç›®çš„)**: ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€æ—¢å­˜ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ§‹é€ ã‹ã‚‰ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³1ã§å®šç¾©ã•ã‚ŒãŸç†æƒ³çš„ãªãƒ¢ãƒãƒ¬ãƒæ§‹æˆã¸ã¨æ®µéšçš„ã«ç§»è¡Œã™ã‚‹ãŸã‚ã®å…·ä½“çš„ãªæ‰‹é †ã€ç¾çŠ¶åˆ†æã€ãŠã‚ˆã³ãƒªã‚¹ã‚¯ç®¡ç†ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

ã“ã®æ–‡æ›¸ã¯ã€æ—¢å­˜ã®å˜ä¸€æ§‹é€ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ã€å†åˆ©ç”¨å¯èƒ½ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹é€ ã¸ã®ç§»è¡Œãƒ—ãƒ­ã‚»ã‚¹ã‚’å®šç¾©ã—ã¾ã™ã€‚ç§»è¡Œã¯æ®µéšçš„ã«è¡Œã„ã€å„ãƒ•ã‚§ãƒ¼ã‚ºã§ã®ãƒªã‚¹ã‚¯ã‚’æœ€å°åŒ–ã—ãªãŒã‚‰é€²ã‚ã¾ã™ã€‚

## ğŸ“Š ç¾çŠ¶åˆ†æ

### ç¾åœ¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
/
â”œâ”€â”€ app/                     # Next.js ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ api/                 # API Routes
â”‚   â”œâ”€â”€ (auth)/              # èªè¨¼é–¢é€£ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ (dashboard)/         # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰é–¢é€£ãƒšãƒ¼ã‚¸
â”‚   â””â”€â”€ ...                  # ãã®ä»–ã®ãƒšãƒ¼ã‚¸
â”‚
â”œâ”€â”€ domain/                  # ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ (ç¾çŠ¶)
â”‚   â”œâ”€â”€ models/              # ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã€å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â”‚   â”‚   â””â”€â”€ user/
â”‚   â”œâ”€â”€ repositories/        # ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚   â””â”€â”€ services/            # ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹
â”‚
â”œâ”€â”€ application/             # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ (ç¾çŠ¶)
â”‚   â”œâ”€â”€ usecases/            # ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
â”‚   â””â”€â”€ dtos/                # DTOs
â”‚
â”œâ”€â”€ infrastructure/          # ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£å±¤ (ç¾çŠ¶)
â”‚   â”œâ”€â”€ repositories/        # ãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£… (Drizzle)
â”‚   â”œâ”€â”€ database/            # DBæ¥ç¶š (Drizzle), ã‚¹ã‚­ãƒ¼ãƒ
â”‚   â”œâ”€â”€ auth/                # èªè¨¼ (Supabase)
â”‚   â”œâ”€â”€ mappers/             # ãƒãƒƒãƒ‘ãƒ¼
â”‚   â””â”€â”€ ai/                  # AIé–¢é€£
â”‚
â”œâ”€â”€ presentation/            # ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤ (ç¾çŠ¶ã€@core/uiã¸ç§»è¡Œå¯¾è±¡)
â”‚   â”œâ”€â”€ components/          # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ hooks/               # Reactãƒ•ãƒƒã‚¯
â”‚   â””â”€â”€ contexts/            # Reactã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
â”‚
â”œâ”€â”€ shared/                  # å…±æœ‰ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ (ç¾çŠ¶ã€@core/sharedã¸ç§»è¡Œå¯¾è±¡)
â”‚   â”œâ”€â”€ types/               # å‹å®šç¾©
â”‚   â”œâ”€â”€ utils/               # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â”‚   â”œâ”€â”€ enums/               # åˆ—æŒ™å‹
â”‚   â”œâ”€â”€ errors/              # ã‚¨ãƒ©ãƒ¼å®šç¾©
â”‚   â”œâ”€â”€ value-objects/       # å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â”‚   â””â”€â”€ constants/           # å®šæ•°
â”‚
â””â”€â”€ tests/                   # ãƒ†ã‚¹ãƒˆ (ç¾çŠ¶ã€å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®__tests__ã¸ç§»è¡Œå¯¾è±¡)
    â”œâ”€â”€ unit/                # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
    â”œâ”€â”€ integration/         # çµ±åˆãƒ†ã‚¹ãƒˆ
    â””â”€â”€ e2e/                 # E2Eãƒ†ã‚¹ãƒˆ
```

### ç¾çŠ¶ã®èª²é¡Œ

1. **ãƒ‰ãƒ¡ã‚¤ãƒ³å¢ƒç•Œã®ä¸æ˜ç¢ºã•**
   - è¤‡æ•°ã®ãƒ‰ãƒ¡ã‚¤ãƒ³é–“ã§è²¬ä»»ã®å¢ƒç•ŒãŒæ›–æ˜§
   - ãƒ‰ãƒ¡ã‚¤ãƒ³é–“ã®ä¾å­˜é–¢ä¿‚ãŒè¤‡é›‘åŒ–

2. **å†åˆ©ç”¨æ€§ã®ä½ã•**
   - å˜ä¸€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§ã®ã‚³ãƒ¼ãƒ‰æ•´ç†ã‚’å‰æã¨ã—ã¦ã„ã‚‹ãŸã‚ã€ä»–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®å†åˆ©ç”¨ãŒå›°é›£
   - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é–“ã®ä¾å­˜é–¢ä¿‚ãŒç·Šå¯†ã™ãã‚‹

3. **ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°æ™‚ã®é–‹ç™ºåŠ¹ç‡ä½ä¸‹**
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¦æ¨¡ã®æ‹¡å¤§ã«ä¼´ã„ã€é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ã®è¤‡é›‘æ€§ãŒå¢—åŠ 
   - ãƒãƒ¼ãƒ é–“ã®ä¸¦è¡Œé–‹ç™ºãŒé›£ã—ã„

4. **ã‚³ãƒ¼ãƒ‰ã®é‡è¤‡**
   - é¡ä¼¼æ©Ÿèƒ½ãŒè¤‡æ•°ã®å ´æ‰€ã«å®Ÿè£…ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚‹
   - å…±é€šãƒ­ã‚¸ãƒƒã‚¯ã®æŠ½å‡ºã¨å…±æœ‰ãŒä¸ååˆ†

## ğŸ—ºï¸ ç§»è¡Œãƒ•ã‚¡ã‚¤ãƒ«å¯¾å¿œè¡¨ (app, application, config, domain ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª - å…¨ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆ)

ä»¥ä¸‹ã«ã€ç¾çŠ¶ã® `app`, `application`, `config`, `domain` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã€ç†æƒ³çš„ãªãƒ¢ãƒãƒ¬ãƒæ§‹é€ ã«ãŠã‘ã‚‹ç§»è¡Œå…ˆã®å¯¾å¿œã‚’ç¤ºã—ã¾ã™ã€‚

| ç§»è¡Œå…ƒãƒ‘ã‚¹ (ç¾çŠ¶)                                                  | ç§»è¡Œå…ˆãƒ‘ã‚¹ (ç†æƒ³å½¢)                                                                 | å‚™è€ƒ                                                                                                                                                                                                                         |
| :----------------------------------------------------------------- | :---------------------------------------------------------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `app/page.tsx`                                                     | `apps/saas-app/app/page.tsx`                                                      | ãƒ«ãƒ¼ãƒˆãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€‚                                                                                                                                                                   |
| `app/layout.tsx`                                                   | `apps/saas-app/app/layout.tsx`                                                    | ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€‚                                                                                                                                                                 |
| `app/globals.css`                                                  | `apps/saas-app/app/globals.css`                                                   | ã‚°ãƒ­ãƒ¼ãƒãƒ«CSSã€‚                                                                                                                                                                                |
| `app/dev-test/user-management/page.tsx`                            | `apps/saas-app/app/dev-test/user-management/page.tsx`                             | é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆç”¨ãƒšãƒ¼ã‚¸ã€‚æœ€çµ‚çš„ã«ã¯å‰Šé™¤ã¾ãŸã¯é©åˆ‡ãªãƒ†ã‚¹ãƒˆ (`apps/saas-app/tests/e2e/` ç­‰) ã¸ç§»è¡Œæ¨å¥¨ã€‚                                                                                                     |
| `app/api/test-connections/route.ts`                                | `apps/saas-app/app/api/test-connections/route.ts`                                 | ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å›ºæœ‰ã®API Routeã€‚å†…éƒ¨ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ (`@/infrastructure/...` ç­‰) ã¯ `@core/infrastructure/...` ç­‰ã¸ã®å¤‰æ›´ãŒå¿…è¦ã€‚                                                                   |
| `app/api/users/[id]/route.ts`                                      | `apps/saas-app/app/api/users/[id]/route.ts`                                       | Useré–¢é€£API Routeã€‚å†…éƒ¨ã§å‘¼ã³å‡ºã™UseCase (`@/application/usecases/user/...`) ã¯ `@core/user/application/usecases/...` ç­‰ã¸ã®å¤‰æ›´ãŒå¿…è¦ã€‚                                                                |
| `app/api/users/route.ts`                                           | `apps/saas-app/app/api/users/route.ts`                                            | Useré–¢é€£API Routeã€‚å†…éƒ¨ã§å‘¼ã³å‡ºã™UseCase (`@/application/usecases/user/...`) ã¯ `@core/user/application/usecases/...` ç­‰ã¸ã®å¤‰æ›´ãŒå¿…è¦ã€‚                                                                |
| `application/dtos/user.dto.ts`                                     | `packages/user/application/dtos/user.dto.ts`                                        | Userãƒ‰ãƒ¡ã‚¤ãƒ³ã®DTOã€‚`@core/user/application/dtos/user.dto.ts` ã¨ã—ã¦é…ç½®ã€‚                                                                                                                       |
| `application/usecases/user/__tests__/create-user.usecase.test.ts`    | `packages/user/application/usecases/__tests__/create-user.usecase.test.ts`          | Userä½œæˆUseCaseã®ãƒ†ã‚¹ãƒˆã€‚`*.unit.test.ts` ã¾ãŸã¯ `*.integration.test.ts` ã¸ã®ãƒªãƒãƒ¼ãƒ æ¨å¥¨ã€‚                                                                                                         |
| `application/usecases/user/__tests__/delete-user.usecase.test.ts`    | `packages/user/application/usecases/__tests__/delete-user.usecase.test.ts`          | Userå‰Šé™¤UseCaseã®ãƒ†ã‚¹ãƒˆã€‚`*.unit.test.ts` ã¾ãŸã¯ `*.integration.test.ts` ã¸ã®ãƒªãƒãƒ¼ãƒ æ¨å¥¨ã€‚                                                                                                         |
| `application/usecases/user/__tests__/get-user-by-id.usecase.test.ts` | `packages/user/application/usecases/__tests__/get-user-by-id.usecase.test.ts`       | Userå–å¾—(ID)UseCaseã®ãƒ†ã‚¹ãƒˆã€‚`*.unit.test.ts` ã¾ãŸã¯ `*.integration.test.ts` ã¸ã®ãƒªãƒãƒ¼ãƒ æ¨å¥¨ã€‚                                                                                                    |
| `application/usecases/user/__tests__/list-users.usecase.test.ts`     | `packages/user/application/usecases/__tests__/list-users.usecase.test.ts`           | Userä¸€è¦§UseCaseã®ãƒ†ã‚¹ãƒˆã€‚`*.unit.test.ts` ã¾ãŸã¯ `*.integration.test.ts` ã¸ã®ãƒªãƒãƒ¼ãƒ æ¨å¥¨ã€‚                                                                                                          |
| `application/usecases/user/__tests__/update-user-profile.usecase.test.ts` | `packages/user/application/usecases/__tests__/update-user-profile.usecase.test.ts` | Useræ›´æ–°UseCaseã®ãƒ†ã‚¹ãƒˆã€‚`*.unit.test.ts` ã¾ãŸã¯ `*.integration.test.ts` ã¸ã®ãƒªãƒãƒ¼ãƒ æ¨å¥¨ã€‚                                                                                                         |
| `application/usecases/user/create-user.usecase.ts`                   | `packages/user/application/usecases/create-user.usecase.ts`                       | Userä½œæˆUseCaseã€‚`@core/user/application/usecases/create-user.usecase.ts` ã¨ã—ã¦é…ç½®ã€‚å†…éƒ¨ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ (`@/domain/...`, `@/shared/...` ç­‰) ã¯ `@core/user/domain/...`, `@core/shared/...` ç­‰ã¸ã®å¤‰æ›´ãŒå¿…è¦ã€‚ |
| `application/usecases/user/delete-user.usecase.ts`                   | `packages/user/application/usecases/delete-user.usecase.ts`                       | Userå‰Šé™¤UseCaseã€‚`@core/user/application/usecases/delete-user.usecase.ts` ã¨ã—ã¦é…ç½®ã€‚å†…éƒ¨ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹å¤‰æ›´ãŒå¿…è¦ã€‚                                                                                    |
| `application/usecases/user/get-user-by-id.usecase.ts`                | `packages/user/application/usecases/get-user-by-id.usecase.ts`                    | Userå–å¾—(ID)UseCaseã€‚`@core/user/application/usecases/get-user-by-id.usecase.ts` ã¨ã—ã¦é…ç½®ã€‚å†…éƒ¨ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹å¤‰æ›´ãŒå¿…è¦ã€‚                                                                              |
| `application/usecases/user/list-users.usecase.ts`                    | `packages/user/application/usecases/list-users.usecase.ts`                        | Userä¸€è¦§UseCaseã€‚`@core/user/application/usecases/list-users.usecase.ts` ã¨ã—ã¦é…ç½®ã€‚å†…éƒ¨ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹å¤‰æ›´ãŒå¿…è¦ã€‚                                                                                   |
| `application/usecases/user/update-user-profile.usecase.ts`             | `packages/user/application/usecases/update-user-profile.usecase.ts`             | Useræ›´æ–°UseCaseã€‚`@core/user/application/usecases/update-user-profile.usecase.ts` ã¨ã—ã¦é…ç½®ã€‚å†…éƒ¨ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹å¤‰æ›´ãŒå¿…è¦ã€‚                                                                              |
| `config/container.config.ts`                                       | `apps/saas-app/config/container.config.ts`                                        | ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å›ºæœ‰ã®DIã‚³ãƒ³ãƒ†ãƒŠè¨­å®šã€‚å†…éƒ¨ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ (`@/application/...`, `@/domain/...`, `@/shared/...` ç­‰) ã¯ `@core/user/application/...`, `@core/user/domain/...`, `@core/shared/...` ç­‰ã¸ã®å¤‰æ›´ãŒå¿…è¦ã€‚ |
| `config/environment.ts`                                            | `apps/saas-app/config/environment.ts`                                             | ç’°å¢ƒå¤‰æ•°èª­ã¿è¾¼ã¿ãƒ»æ¤œè¨¼ãƒ­ã‚¸ãƒƒã‚¯ã€‚å°†æ¥çš„ã«ã¯ `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ç’°å¢ƒå¤‰æ•°ç®¡ç†ã‚µãƒ¼ãƒ“ã‚¹ã¸ã®ç§»è¡Œã‚’æ¨å¥¨ã€‚                                                                                                             |
| `domain/repositories/user.repository.interface.ts`            | `packages/user/domain/repositories/user.repository.interface.ts`                  | Userãƒ‰ãƒ¡ã‚¤ãƒ³ã®ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã€‚`@core/user/domain/repositories/user.repository.interface.ts` ã¨ã—ã¦é…ç½®ã€‚å†…éƒ¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ (`@/domain/...`, `@/shared/...`) ã¯ `@core/user/domain/...`, `@core/shared/...` ç­‰ã¸ã®å¤‰æ›´ãŒå¿…è¦ã€‚ |
| `domain/repositories/base.repository.interface.ts`            | `packages/shared/base/domain/repositories/base.repository.interface.ts`                | å…±é€šã®ãƒ™ãƒ¼ã‚¹ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã€‚`shared/base` ã®ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã¸ã€‚å†…éƒ¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ã®å¤‰æ›´ãŒå¿…è¦ã€‚                               |
| `domain/models/user/user.entity.ts`                         | `packages/user/domain/entities/user.entity.ts`                                      | Userã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã€‚`@core/user/domain/entities/user.entity.ts` ã¨ã—ã¦é…ç½®ã€‚å†…éƒ¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ã®å¤‰æ›´ãŒå¿…è¦ã€‚                                                                                                                      |
| `domain/models/user/user-role.enum.ts`                      | `packages/user/domain/enums/user-role.enum.ts`                                   | User Role Enumã€‚`@core/user/domain/enums/user-role.enum.ts` ã¨ã—ã¦é…ç½®ã€‚                                                                                                                                     |
| `domain/models/user/user-name.vo.ts`                        | `packages/user/domain/value-objects/user-name.vo.ts`                                     | User Name Value Objectã€‚`@core/user/domain/value-objects/user-name.vo.ts` ã¨ã—ã¦é…ç½®ã€‚å†…éƒ¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ã®å¤‰æ›´ãŒå¿…è¦ã€‚                                                                                                            |
| `domain/models/user/user-id.vo.ts`                          | `packages/user/domain/value-objects/user-id.vo.ts`                                       | User ID Value Objectã€‚`@core/user/domain/value-objects/user-id.vo.ts` ã¨ã—ã¦é…ç½®ã€‚å†…éƒ¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ã®å¤‰æ›´ãŒå¿…è¦ã€‚                                                                                                              |
| `domain/models/user/__tests__/user.entity.test.ts`            | `packages/user/domain/entities/__tests__/user.entity.test.ts`                       | Userã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ãƒ†ã‚¹ãƒˆã€‚`@core/user/domain/entities/__tests__` ã¸ã€‚`*.unit.test.ts` ã¸ã®ãƒªãƒãƒ¼ãƒ æ¨å¥¨ã€‚å†…éƒ¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ã®å¤‰æ›´ãŒå¿…è¦ã€‚                                                                                                                                       |
| `domain/models/user/__tests__/user-name.vo.test.ts`           | `packages/user/domain/value-objects/__tests__/user-name.vo.test.ts`                      | User Name VOã®ãƒ†ã‚¹ãƒˆã€‚`@core/user/domain/value-objects/__tests__` ã¸ã€‚`*.unit.test.ts` ã¸ã®ãƒªãƒãƒ¼ãƒ æ¨å¥¨ã€‚å†…éƒ¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ã®å¤‰æ›´ãŒå¿…è¦ã€‚                                                                                                                                    |
| `domain/models/user/__tests__/user-id.vo.test.ts`             | `packages/user/domain/value-objects/__tests__/user-id.vo.test.ts`                        | User ID VOã®ãƒ†ã‚¹ãƒˆã€‚`@core/user/domain/value-objects/__tests__` ã¸ã€‚`*.unit.test.ts` ã¸ã®ãƒªãƒãƒ¼ãƒ æ¨å¥¨ã€‚å†…éƒ¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ã®å¤‰æ›´ãŒå¿…è¦ã€‚                                                                                                                                      |
| `domain/models/base/base.entity.ts`                         | `packages/shared/base/domain/entities/base.entity.ts`                               | å…±é€šã®ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã€‚`shared/base` ã®ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ `entities` ã¸ã€‚å†…éƒ¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ã®å¤‰æ›´ãŒå¿…è¦ã€‚                                                         |
| `domain/services/ai/AIService.ts`                         | `packages/ai/domain/services/ai.service.ts`                   | AIé–¢é€£ã‚µãƒ¼ãƒ“ã‚¹ã€‚`@core/ai/domain/services/ai.service.ts`ã¨ã—ã¦é…ç½®ã€‚å°‚ç”¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ `ai` ã‚’ä½œæˆã€‚ãƒ•ã‚¡ã‚¤ãƒ«å `ai.service.ts` ã¸å¤‰æ›´ã€‚ |
| `i18n/client.ts`            | `packages/shared/i18n/client.ts`   | ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰i18nè¨­å®šã€‚å…±æœ‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                         |\
| `i18n/config/settings.ts`   | `packages/shared/i18n/config/settings.ts` | i18nå…±é€šè¨­å®šã€‚å…±æœ‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                       |\
| `i18n/index.ts`             | `packages/shared/i18n/index.ts`    | i18nè¨­å®šãƒ»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã€‚å…±æœ‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚             |\
| `i18n/locales/en/common.json` | `packages/shared/i18n/locales/en/common.json` | è‹±èªå…±é€šç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«ã€‚å…±æœ‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                             |\
| `i18n/locales/ja/common.json` | `packages/shared/i18n/locales/ja/common.json` | æ—¥æœ¬èªå…±é€šç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«ã€‚å…±æœ‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                           |\
| `i18n/server.ts`            | `packages/shared/i18n/server.ts`   | ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰i18nè¨­å®šã€‚å…±æœ‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                               |\
| `infrastructure/ai/AIServiceFactory.ts`                            | `packages/shared/infrastructure/ai/AIServiceFactory.ts`                                        | AIã‚µãƒ¼ãƒ“ã‚¹ãƒ•ã‚¡ã‚¯ãƒˆãƒªã€‚ç‰¹å®šãƒ‰ãƒ¡ã‚¤ãƒ³ã«ä¾å­˜ã—ãªã„ãŸã‚ `shared` ã¸ã€‚                                                                                                                                             |\
| `infrastructure/ai/OpenAIService.ts`                                 | `packages/shared/infrastructure/ai/OpenAIService.ts`                                         | OpenAIã‚µãƒ¼ãƒ“ã‚¹å®Ÿè£…ã€‚ç‰¹å®šãƒ‰ãƒ¡ã‚¤ãƒ³ã«ä¾å­˜ã—ãªã„ãŸã‚ `shared` ã¸ã€‚                                                                                                                                              |\
| `infrastructure/database/client.ts`                                  | `packages/shared/infrastructure/database/client.ts`                                          | Drizzle/Postgresã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨­å®šã¨ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œã€‚å…±é€šã‚¤ãƒ³ãƒ•ãƒ©ã¨ã—ã¦ `shared` ã¸ã€‚                                                                                                                         |\
| `infrastructure/database/db.ts`                                      | `packages/shared/infrastructure/database/db.ts`                                              | Drizzle ORMã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã€‚å…±é€šã‚¤ãƒ³ãƒ•ãƒ©ã¨ã—ã¦ `shared` ã¸ã€‚                                                                                                                                    |\
| `infrastructure/database/client/postgres.ts`                         | `packages/shared/infrastructure/database/client/postgres.ts`                                 | `postgres.js`ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨­å®šã€‚å…±é€šã‚¤ãƒ³ãƒ•ãƒ©ã¨ã—ã¦ `shared` ã¸ã€‚                                                                                                                                      |\
| `infrastructure/database/client/supabase.ts`                         | `packages/shared/infrastructure/database/client/supabase.ts`                                 | Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨­å®šã€‚å…±é€šã‚¤ãƒ³ãƒ•ãƒ©ã¨ã—ã¦ `shared` ã¸ã€‚                                                                                                                                             |\
| `infrastructure/database/helpers/crud.helpers.ts`                    | `packages/shared/infrastructure/database/helpers/crud.helpers.ts`                            | æ±ç”¨çš„ãªCRUDãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã€‚å…±æœ‰ã‚¤ãƒ³ãƒ•ãƒ©ã¨ã—ã¦ `shared` ã¸ã€‚                                                                                                                                              |\
| `infrastructure/database/migrations/*` (å…¨ãƒ•ã‚¡ã‚¤ãƒ«)                  | `packages/shared/infrastructure/database/migrations/*`                                         | Drizzleãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã€‚å…±é€šã‚¤ãƒ³ãƒ•ãƒ©ã¨ã—ã¦ `shared` ã¸ã€‚                                                                                                                                        |\
| `infrastructure/database/repositories/base.repository.ts`            | `packages/shared/base/infrastructure/repositories/base.repository.ts`                    | æ±ç”¨ãƒ™ãƒ¼ã‚¹ãƒªãƒã‚¸ãƒˆãƒªã€‚`shared/base` ã®ã‚¤ãƒ³ãƒ•ãƒ©å±¤ï¼ˆãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£…ï¼‰ã¸ã€‚                                                                                                                  |
| `infrastructure/database/repositories/user.repository.ts`            | `packages/user/infrastructure/database/repositories/user.repository.ts`                      | Userãƒ‰ãƒ¡ã‚¤ãƒ³å›ºæœ‰ãƒªãƒã‚¸ãƒˆãƒªã€‚`user` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                                                                                                               |\
| `infrastructure/database/repositories/__tests__/user.repository.integration.test.ts` | `packages/user/infrastructure/database/repositories/__tests__/user.repository.integration.test.ts` | Userãƒªãƒã‚¸ãƒˆãƒªçµ±åˆãƒ†ã‚¹ãƒˆã€‚`user` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                                                                                                             |\
| `infrastructure/database/schema/_common.ts`                          | `packages/shared/infrastructure/database/schema/_common.ts`                                  | å…±é€šã‚¹ã‚­ãƒ¼ãƒå®šç¾©ï¼ˆIDã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ç­‰ï¼‰ã€‚å…±æœ‰ã‚¤ãƒ³ãƒ•ãƒ©ã¨ã—ã¦ `shared` ã¸ã€‚                                                                                                                         |
| `infrastructure/database/schema/_common.ts`                          | `packages/shared/infrastructure/database/schema/_common.ts`                                  | å…±é€šã‚¹ã‚­ãƒ¼ãƒå®šç¾©ï¼ˆIDã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ç­‰ï¼‰ã€‚å…±æœ‰ã‚¤ãƒ³ãƒ•ãƒ©ã¨ã—ã¦ `shared` ã¸ã€‚                                                                                                                                   |\
| `infrastructure/database/schema/index.ts`                            | `packages/shared/infrastructure/database/schema/index.ts`                                    | ã‚¹ã‚­ãƒ¼ãƒãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã€‚å…±æœ‰ã‚¤ãƒ³ãƒ•ãƒ©ã¨ã—ã¦ `shared` ã¸ã€‚                                                                                                                                          |\
| `infrastructure/database/schema/users.schema.ts`                     | `packages/user/infrastructure/database/schema/users.schema.ts`                             | Userãƒ†ãƒ¼ãƒ–ãƒ«ã‚¹ã‚­ãƒ¼ãƒã€‚`user` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                                                                                                                     |\
| `infrastructure/database/utils/migrate-all.ts`                       | `packages/shared/infrastructure/database/utils/migrate-all.ts`                               | å…¨ç’°å¢ƒãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆã€‚å…±é€šã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ã—ã¦ `shared` ã¸ã€‚                                                                                                                    |\
| `infrastructure/database/utils/migrate-env.ts`                       | `packages/shared/infrastructure/database/utils/migrate-env.ts`                               | ç‰¹å®šç’°å¢ƒãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆã€‚å…±é€šã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ã—ã¦ `shared` ã¸ã€‚                                                                                                                    |\
| `infrastructure/database/utils/test-db-connection.ts`                | `packages/shared/infrastructure/database/utils/test-db-connection.ts`                        | DBæ¥ç¶šãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã€‚å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã¨ã—ã¦ `shared` ã¸ã€‚                                                                                                                                            |\
| `infrastructure/mappers/base.mapper.ts`                              | `packages/shared/base/infrastructure/mappers/base.mapper.ts`                                      | æ±ç”¨ãƒ™ãƒ¼ã‚¹ãƒãƒƒãƒ‘ãƒ¼ã€‚`shared/base` ã®ã‚¤ãƒ³ãƒ•ãƒ©å±¤ï¼ˆãƒãƒƒãƒ‘ãƒ¼ï¼‰ã¸ã€‚                                                                                                                                                 |
| `infrastructure/mappers/user.mapper.ts`                              | `packages/user/infrastructure/mappers/user.mapper.ts`                                        | Userãƒ‰ãƒ¡ã‚¤ãƒ³å›ºæœ‰ãƒãƒƒãƒ‘ãƒ¼ã€‚`user` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                                                                                                               |\
| `infrastructure/mappers/utils/mapping-helpers.ts`                    | `packages/shared/base/infrastructure/mappers/utils/mapping-helpers.ts`                            | ãƒãƒƒãƒ”ãƒ³ã‚°ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã€‚`shared/base` ã®ã‚¤ãƒ³ãƒ•ãƒ©å±¤ï¼ˆãƒãƒƒãƒ‘ãƒ¼ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼‰ã¸ã€‚                                                                                                                                              |
| `infrastructure/mappers/__tests__/base.mapper.test.ts`             | `packages/shared/base/infrastructure/mappers/__tests__/base.mapper.test.ts`                         | ãƒ™ãƒ¼ã‚¹ãƒãƒƒãƒ‘ãƒ¼ãƒ†ã‚¹ãƒˆã€‚`shared/base` ã®ã‚¤ãƒ³ãƒ•ãƒ©å±¤ï¼ˆãƒãƒƒãƒ‘ãƒ¼ãƒ†ã‚¹ãƒˆï¼‰ã¸ã€‚                                                                                                                                                 |
| `infrastructure/mappers/__tests__/user.mapper.test.ts`             | `packages/user/infrastructure/mappers/__tests__/user.mapper.test.ts`                         | Userãƒãƒƒãƒ‘ãƒ¼ãƒ†ã‚¹ãƒˆã€‚`user` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                                                                                                                     |\
| `shared/enums/export-format.enum.ts`                               | `packages/shared/enums/export-format.enum.ts`                                             | å…±é€šã®Enumå®šç¾©ã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                             |\
| `shared/enums/language.enum.ts`                                    | `packages/shared/enums/language.enum.ts`                                                  | å…±é€šã®Enumå®šç¾©ã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                             |\
| `shared/errors/app.error.ts`                                         | `packages/shared/errors/app.error.ts`                                                     | å…±é€šã®ã‚¨ãƒ©ãƒ¼ã‚¯ãƒ©ã‚¹ã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                           |\
| `shared/errors/base.error.ts`                                        | `packages/shared/errors/base.error.ts`                                                    | å…±é€šã®ã‚¨ãƒ©ãƒ¼åŸºåº•ã‚¯ãƒ©ã‚¹ã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                        |\
| `shared/errors/error-code.enum.ts`                                   | `packages/shared/enums/error-code.enum.ts`                                                | ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰Enumå®šç¾©ã€‚ä»–ã®Enumã¨åˆã‚ã›ã¦ `enums` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ã€‚                                          |\
| `shared/errors/infrastructure.error.ts`                              | `packages/shared/errors/infrastructure.error.ts`                                          | å…±é€šã®ã‚¨ãƒ©ãƒ¼ã‚¯ãƒ©ã‚¹ã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                           |\
| `shared/errors/validation.error.ts`                                | `packages/shared/errors/validation.error.ts`                                              | å…±é€šã®ã‚¨ãƒ©ãƒ¼ã‚¯ãƒ©ã‚¹ã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                           |\
| `shared/logger/console.logger.ts`                                  | `packages/shared/logger/console.logger.ts`                                                | ãƒ­ã‚¬ãƒ¼å®Ÿè£…ã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                               |\
| `shared/logger/logger.interface.ts`                                | `packages/shared/logger/logger.interface.ts`                                              | ãƒ­ã‚¬ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                        |\
| `shared/logger/logger.token.ts`                                    | `packages/shared/logger/logger.token.ts`                                                  | ãƒ­ã‚¬ãƒ¼DIãƒˆãƒ¼ã‚¯ãƒ³ã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                            |\
| `shared/types/common.types.ts`                                     | `packages/shared/types/common.types.ts`                                                   | å…±é€šã®å‹å®šç¾©ã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                              |\
| `shared/types/data.types.ts`                                       | `packages/shared/types/data.types.ts`                                                     | ãƒ‡ãƒ¼ã‚¿é–¢é€£ã®å…±é€šå‹å®šç¾©ã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                      |\
| `shared/types/entity-base.interface.ts`                            | `packages/shared/base/domain/interfaces/entity-base.interface.ts`                         | å…¨ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®åŸºåº•ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã€‚`shared/base` ã®ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã¸ã€‚                                        |\
| `shared/types/utility.types.ts`                                    | `packages/shared/types/utility.types.ts`                                                  | å…±é€šã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å‹å®šç¾©ã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                    |\
| `shared/utils/api.utils.ts`                                        | `packages/shared/utils/api.utils.ts`                                                      | å…±é€šã®APIãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                      |\
| `shared/utils/identifier.utils.ts`                                 | `packages/shared/utils/identifier.utils.ts`                                               | å…±é€šã®è­˜åˆ¥å­ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                    |\
| `shared/utils/ui.ts`                                               | `packages/shared/utils/ui.ts`                                                             | å…±é€šã®UIãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ (`cn`é–¢æ•°ãªã©)ã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                        |\
| `shared/utils/__tests__/api.utils.test.ts`                         | `packages/shared/utils/__tests__/api.utils.test.ts`                                       | APIãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®ãƒ†ã‚¹ãƒˆã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                    |\
| `shared/utils/__tests__/identifier.utils.test.ts`                  | `packages/shared/utils/__tests__/identifier.utils.test.ts`                                | è­˜åˆ¥å­ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®ãƒ†ã‚¹ãƒˆã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                  |\
| `shared/utils/__tests__/ui.utils.test.ts`                          | `packages/shared/utils/__tests__/ui.utils.test.ts`                                        | UIãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®ãƒ†ã‚¹ãƒˆã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                     |\
| `shared/utils/security/password.utils.ts`                            | `packages/shared/utils/security/password.utils.ts`                                        | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰é–¢é€£ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                    |\
| `shared/utils/security/__tests__/password.utils.test.ts`           | `packages/shared/utils/security/__tests__/password.utils.test.ts`                         | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®ãƒ†ã‚¹ãƒˆã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                |\
| `shared/value-objects/base-id.vo.ts`                               | `packages/shared/base/domain/value-objects/base-id.vo.ts`                               | å…¨IDå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®åŸºåº•ã‚¯ãƒ©ã‚¹ã€‚`shared/base` ã®ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ `value-objects` ã¸ã€‚                                          |
| `shared/value-objects/base.vo.ts`                                  | `packages/shared/base/domain/value-objects/base.vo.ts`                                  | å…¨å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®åŸºåº•ã‚¯ãƒ©ã‚¹ã€‚`shared/base` ã®ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ `value-objects` ã¸ã€‚                                           |
| `shared/value-objects/date-time-string.vo.ts`                      | `packages/shared/value-objects/date-time-string.vo.ts`                                    | å…±é€šã®å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                         |\
| `shared/value-objects/email.vo.ts`                                 | `packages/shared/value-objects/email.vo.ts`                                               | å…±é€šã®å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                         |\
| `shared/value-objects/password-hash.vo.ts`                         | `packages/shared/value-objects/password-hash.vo.ts`                                       | å…±é€šã®å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆãƒãƒƒã‚·ãƒ¥è¡¨ç¾ï¼‰ã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                             |\
| `shared/value-objects/password.vo.ts`                              | `packages/shared/value-objects/password.vo.ts`                                            | å…±é€šã®å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¡¨ç¾ï¼‰ã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                          |\
| `shared/value-objects/url.vo.ts`                                   | `packages/shared/value-objects/url.vo.ts`                                                 | å…±é€šã®å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                         |\
| `shared/value-objects/__tests__/date-time-string.vo.test.ts`       | `packages/shared/value-objects/__tests__/date-time-string.vo.test.ts`                     | å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ†ã‚¹ãƒˆã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                        |\
| `shared/value-objects/__tests__/email.vo.test.ts`                  | `packages/shared/value-objects/__tests__/email.vo.test.ts`                                | å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ†ã‚¹ãƒˆã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                        |\
| `shared/value-objects/__tests__/password-hash.vo.test.ts`          | `packages/shared/value-objects/__tests__/password-hash.vo.test.ts`                        | å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ†ã‚¹ãƒˆã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                        |\
| `shared/value-objects/__tests__/password.vo.test.ts`               | `packages/shared/value-objects/__tests__/password.vo.test.ts`                             | å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ†ã‚¹ãƒˆã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                        |\
| `shared/value-objects/__tests__/url.vo.test.ts`                    | `packages/shared/value-objects/__tests__/url.vo.test.ts`                                  | å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ†ã‚¹ãƒˆã€‚`shared` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã€‚                                                        |\
| `presentation/components/common/ConnectionTest.tsx` | `packages/web/components/dev/ConnectionTest.tsx`  | æ¥ç¶šãƒ†ã‚¹ãƒˆç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€‚Webã‚¢ãƒ—ãƒªå›ºæœ‰ (devç”¨)ã€‚               |\
| `presentation/hooks/use-toast.ts`                | `packages/web/hooks/use-toast.ts`                 | ãƒˆãƒ¼ã‚¹ãƒˆè¡¨ç¤ºç”¨ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã€‚Webã‚¢ãƒ—ãƒªå›ºæœ‰ã€‚                     |\
| `presentation/providers/I18nProvider.tsx`        | `packages/web/providers/I18nProvider.tsx`         | i18nãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã€‚Webã‚¢ãƒ—ãƒªå›ºæœ‰ã€‚                               | 
| `presentation/components/common/ui/` | `packages/web/components/ui/` | Shadcn/UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç¾¤ã€‚Webã‚¢ãƒ—ãƒªå›ºæœ‰UIã€‚ |\

## ğŸ—ºï¸ ç§»è¡Œãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

**å‰æ:** ã“ã®ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã§ã¯ã€`pnpm` ã¨ `Turborepo` ã®å°å…¥ã‚’æœ€çµ‚ãƒ•ã‚§ãƒ¼ã‚ºã¾ã§é…ã‚‰ã›ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€é€”ä¸­ã®ãƒ•ã‚§ãƒ¼ã‚ºã§ã¯ãƒ¢ãƒãƒ¬ãƒãƒ„ãƒ¼ãƒ«ã«ã‚ˆã‚‹ä¾å­˜é–¢ä¿‚è§£æ±ºã‚„ã‚¿ã‚¹ã‚¯å®Ÿè¡ŒãŒã§ããšã€**å„ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†æ™‚ç‚¹ã§ã®å®Œå…¨ãªãƒ“ãƒ«ãƒ‰ãƒ»ãƒ†ã‚¹ãƒˆæ¤œè¨¼ã¯å›°é›£ã«ãªã‚Šã¾ã™ã€‚** æ¤œè¨¼ã¯æœ€çµ‚ãƒ•ã‚§ãƒ¼ã‚ºã§é›†ä¸­çš„ã«è¡Œã„ã¾ã™ã€‚

### ãƒ•ã‚§ãƒ¼ã‚º0: æº–å‚™ã¨ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹è¨­å®š (å¤‰æ›´ãªã—)

1.  **è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æœ€çµ‚åŒ–**
    - ç†æƒ³çš„ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆï¼ˆ`01_ideal_design.md`ï¼‰ã®ç¢ºèªã¨åˆæ„
    - å„ãƒ‰ãƒ¡ã‚¤ãƒ³ã®è²¬ä»»ç¯„å›²ã¨å¢ƒç•Œã®æ˜ç¢ºåŒ–

2.  **ç§»è¡Œãƒ–ãƒ©ãƒ³ãƒã®ä½œæˆ**
    - æ—¢å­˜æ©Ÿèƒ½ã‚’ç¶­æŒã—ãŸã¾ã¾ä¸¦è¡Œé–‹ç™ºã§ãã‚‹ç’°å¢ƒã‚’æº–å‚™ (`refactoring/phase1` ãªã©)
    - CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®èª¿æ•´ (ä¸€æ™‚çš„ã«ç„¡åŠ¹åŒ–ã¾ãŸã¯èª¿æ•´ãŒå¿…è¦ãªå ´åˆã‚ã‚Š)

3.  **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã®ç¢ºèª**
    - æ—¢å­˜æ©Ÿèƒ½ã®æ­£å¸¸å‹•ä½œã‚’ä¿è¨¼ã™ã‚‹ãƒ†ã‚¹ãƒˆï¼ˆVitest, Playwrightï¼‰ã®å……å®Ÿåº¦ç¢ºèª
    - å¿…è¦ã«å¿œã˜ã¦ãƒ†ã‚¹ãƒˆã®è¿½åŠ 

4.  **ãƒ«ãƒ¼ãƒˆ `tsconfig.base.json` ã®ä½œæˆã¨ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹è¨­å®š**
    - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã« `tsconfig.base.json` ã‚’ä½œæˆã—ã¾ã™ã€‚
    - å…±é€šã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ã€å°†æ¥ã® `packages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’æƒ³å®šã—ãŸ**ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹** (`@core/*`, `@/*`) ã‚’è¨­å®šã—ã¾ã™ã€‚
    ```json
    // tsconfig.base.json ã®ä¾‹
    {
      "compilerOptions": { /* ...åŸºæœ¬çš„ãªè¨­å®š... */,
        "baseUrl": ".",
        "paths": {
          "@core/shared/*": ["packages/shared/src/*"],
          "@core/infrastructure/*": ["packages/infrastructure/src/*"],
          "@core/ui/*": ["packages/ui/src/*"],
          "@core/user/*": ["packages/user/src/*"],
          /* ä»–ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ */
          "@/*": ["apps/saas-app/src/*"]
        }
      },
      "exclude": ["node_modules"]
    }
    ```

5.  **(å‰Šé™¤)** ãƒ«ãƒ¼ãƒˆ `package.json` ã¨ `pnpm-workspace.yaml` ã®æº–å‚™ã¯ãƒ•ã‚§ãƒ¼ã‚º3ã§è¡Œã„ã¾ã™ã€‚

### ãƒ•ã‚§ãƒ¼ã‚º1: ãƒ•ã‚¡ã‚¤ãƒ«ã®ç‰©ç†çš„ãªç§»å‹•ã¨ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ä½¿ç”¨ã—ãŸã‚¤ãƒ³ãƒãƒ¼ãƒˆä¿®æ­£

**ç›®çš„**: ã‚³ãƒ¼ãƒ‰ã‚’æ–°ã—ã„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã«ç‰©ç†çš„ã«é…ç½®ã—ã€å®šç¾©æ¸ˆã¿ã®ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ã‚’ä¿®æ­£ã™ã‚‹ã€‚

1.  **åŸºæœ¬ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®ä½œæˆ**
    - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã« `apps` ã¨ `packages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¾ã™ã€‚
    - `mkdir -p apps packages`

2.  **ãƒ•ã‚¡ã‚¤ãƒ«ã®ç‰©ç†çš„ãªç§»å‹•**
    - å‰è¿°ã®ã€Œç§»è¡Œãƒ•ã‚¡ã‚¤ãƒ«å¯¾å¿œè¡¨ã€ã«åŸºã¥ãã€æ—¢å­˜ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ `apps/` ãŠã‚ˆã³ `packages/` é…ä¸‹ã®å¯¾å¿œã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¾ã™ã€‚
    - ä¾‹: `mv app apps/saas-app`, `mkdir -p packages/user/src/domain && mv domain/models/user packages/user/src/domain/entities` ãªã© (**src ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª**é…ä¸‹ã«é…ç½®ã™ã‚‹ã“ã¨ã«æ³¨æ„)ã€‚
    - Next.js ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« (`next.config.js`, `tailwind.config.js`, `.env*` ãªã©) ã‚‚ `apps/saas-app` ç›´ä¸‹ã«ç§»å‹•ã—ã¾ã™ã€‚

3.  **ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ä½¿ç”¨ã—ãŸã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ä¿®æ­£**
    - ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•ã«ä¼´ã„å£Šã‚ŒãŸã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ã‚’ã€**ãƒ•ã‚§ãƒ¼ã‚º0ã§è¨­å®šã—ãŸãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ (`@core/*`, `@/*`)** ã‚’ä½¿ç”¨ã—ã¦ä¿®æ­£ã—ã¾ã™ã€‚
    - ä¾‹: `import { User } from '@core/user/domain/entities/user.entity'` ã®ã‚ˆã†ã«ä¿®æ­£ã€‚
    - **IDE/ã‚¨ãƒ‡ã‚£ã‚¿ã®è¨­å®š**: TypeScript Language Server ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã® `tsconfig.base.json` ã‚’èªè­˜ã—ã€ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’è§£æ±ºã§ãã‚‹ã‚ˆã†ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
    - **æ³¨æ„:** ã“ã®æ®µéšã§ã¯ä¾å­˜é–¢ä¿‚ãŒè§£æ±ºã•ã‚Œã¦ãŠã‚‰ãšã€ãƒ“ãƒ«ãƒ‰ã‚„ãƒ†ã‚¹ãƒˆã¯å®Ÿè¡Œã§ãã¾ã›ã‚“ã€‚ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãŒã‚¨ãƒ‡ã‚£ã‚¿ä¸Šã§ã‚¨ãƒ©ãƒ¼ãªãè§£æ±ºã•ã‚Œã¦ã„ã‚Œã°æ¬¡ã«é€²ã¿ã¾ã™ã€‚
    - **ãƒ„ãƒ¼ãƒ«**: IDEã®æ¤œç´¢ãƒ»ç½®æ›æ©Ÿèƒ½ã‚„ `jscodeshift` ã‚’æ´»ç”¨ã—ã¾ã™ã€‚

### ãƒ•ã‚§ãƒ¼ã‚º2: å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸/ã‚¢ãƒ—ãƒªã® `package.json`, `tsconfig.json` ä½œæˆã¨ä¾å­˜é–¢ä¿‚å®šç¾©

**ç›®çš„**: å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åŸºæœ¬çš„ãªè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ä¾å­˜é–¢ä¿‚ã‚’ï¼ˆæœ€çµ‚çš„ãª `pnpm` / `Turborepo` å°å…¥ã‚’è¦‹è¶Šã—ã¦ï¼‰å®šç¾©ã™ã‚‹ã€‚

1.  **`package.json` ã®ä½œæˆ**
    - ã™ã¹ã¦ã® `apps/*` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨ `packages/*` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«ã€ãã‚Œãã‚Œ `package.json` ã‚’ä½œæˆã—ã¾ã™ã€‚
    - `name` (`"@core/shared"`, `"saas-app"` ãªã©), `version` (`"0.0.0"`), `private: true` ãªã©ã®åŸºæœ¬æƒ…å ±ã‚’è¨˜è¿°ã—ã¾ã™ã€‚
    - å„ `package.json` ã«ã€ãã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸/ã‚¢ãƒ—ãƒªãŒå¿…è¦ã¨ã™ã‚‹**å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**ã®ä¾å­˜é–¢ä¿‚ (`dependencies`, `devDependencies`) ã‚’è¨˜è¿°ã—ã¾ã™ã€‚
    - ä»–ã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ (`@core/*`) ã¸ã®ä¾å­˜é–¢ä¿‚ã‚‚è¨˜è¿°ã—ã¾ã™ãŒã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ `"0.0.0"` ã‚„ `"*"` ã®ã‚ˆã†ãª**ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼**ã«ã—ã¦ãŠãã¾ã™ (ãƒ•ã‚§ãƒ¼ã‚º3ã§ `workspace:*` ã«ç½®æ›)ã€‚
    ```json
    // packages/user/package.json ã®ä¾‹
    {
      "name": "@core/user",
      "version": "0.0.0",
      "private": true,
      "main": "dist/index.js", // ä»®
      "types": "dist/index.d.ts", // ä»®
      "scripts": {
        "build": "echo 'Build script TBD'", // ä»®
        "test:unit": "echo 'Test script TBD'" // ä»®
      },
      "dependencies": {
        "@core/shared": "0.0.0", // ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼
        "neverthrow": "^6.0.0"
      },
      "devDependencies": { ... }
    }
    ```

2.  **`tsconfig.json` ã®ä½œæˆ/èª¿æ•´**
    - å„ `apps/*` ãŠã‚ˆã³ `packages/*` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« `tsconfig.json` ã‚’ä½œæˆã¾ãŸã¯èª¿æ•´ã—ã¾ã™ã€‚
    - ãã‚Œãã‚Œã® `tsconfig.json` ã§ã€ãƒ«ãƒ¼ãƒˆã® `tsconfig.base.json` ã‚’ `extends` ã—ã¾ã™ã€‚
    - ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å›ºæœ‰ã®è¨­å®š (`compilerOptions.outDir`, `include`, `exclude` ãªã©) ã‚„ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å›ºæœ‰ã®è¨­å®š (Next.js ã®è¨­å®šãªã©) ã‚’è¿½åŠ ã—ã¾ã™ã€‚
    ```json
    // packages/user/tsconfig.json ã®ä¾‹
    {
      "extends": "../../tsconfig.base.json",
      "compilerOptions": { "outDir": "dist", "rootDir": "src" },
      "include": ["src"],
      "exclude": ["node_modules", "dist"]
    }
    ```

3.  **æ³¨æ„:** ã“ã®ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†æ™‚ç‚¹ã§ã‚‚ã€`npm install` ã¯å®Ÿè¡Œã›ãšã€ãƒ“ãƒ«ãƒ‰ã‚„ãƒ†ã‚¹ãƒˆã‚‚å®Ÿè¡Œã§ãã¾ã›ã‚“ã€‚è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒæ§‹é€ çš„ã«é…ç½®ã•ã‚Œã€ä¾å­˜é–¢ä¿‚ãŒï¼ˆãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’å«ã‚ã¦ï¼‰è¨˜è¿°ã•ã‚Œã¦ã„ã‚‹çŠ¶æ…‹ã‚’ç›®æŒ‡ã—ã¾ã™ã€‚

### ãƒ•ã‚§ãƒ¼ã‚º3: pnpm, Turborepo ã®å°å…¥ã¨æœ€çµ‚è¨­å®š

**ç›®çš„**: ãƒ¢ãƒãƒ¬ãƒç®¡ç†ãƒ„ãƒ¼ãƒ« (pnpm, Turborepo) ã‚’å°å…¥ã—ã€ä¾å­˜é–¢ä¿‚ã‚’è§£æ±ºã—ã€ãƒ“ãƒ«ãƒ‰å¯èƒ½ãªçŠ¶æ…‹ã«ã™ã‚‹ã€‚

1.  **ãƒ«ãƒ¼ãƒˆ `package.json` ã®èª¿æ•´**
    - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã® `package.json` ã‚’ç¢ºèªãƒ»èª¿æ•´ã—ã¾ã™ã€‚
    - ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å…¨ä½“ã®å…±é€š**é–‹ç™ºä¾å­˜é–¢ä¿‚** (`typescript`, `eslint`, `prettier`, `husky`, `turbo`, `@types/node`, `vitest`, `@playwright/test` ãªã©) ã‚’ `devDependencies` ã«è¨­å®šã—ã¾ã™ã€‚
    - `"private": true` ã‚’è¨­å®šã—ã¾ã™ã€‚

2.  **`pnpm-workspace.yaml` ã®ä½œæˆ**
    - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã« `pnpm-workspace.yaml` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€`packages:` ã« `apps/*` ã¨ `packages/*` ã‚’æŒ‡å®šã—ã¾ã™ã€‚

3.  **å†…éƒ¨ä¾å­˜é–¢ä¿‚ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°**
    - ã™ã¹ã¦ã® `apps/*/package.json` ã¨ `packages/*/package.json` ã‚’ç¢ºèªã—ã€ä»–ã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ (`@core/*`) ã¸ã®ä¾å­˜é–¢ä¿‚ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ `"workspace:*"` ã«ç½®æ›ã—ã¾ã™ã€‚
    ```diff
    // packages/user/package.json ã®å¤‰æ›´ä¾‹
    "dependencies": {
-     "@core/shared": "0.0.0",
+     "@core/shared": "workspace:*",
      "neverthrow": "^6.0.0"
    },
    ```

4.  **ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« (`pnpm install`)**
    - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã§ `pnpm install` ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€pnpm workspace ãŒä¾å­˜é–¢ä¿‚ã‚’è§£æ±ºã—ã€`node_modules` ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã€ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–“ã®ãƒªãƒ³ã‚¯ãŒè¡Œã‚ã‚Œã¾ã™ã€‚
    - **æ³¨æ„:** ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã§åˆã‚ã¦ä¾å­˜é–¢ä¿‚ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ãŸã‚ã€å¤šæ•°ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒ `node_modules` ã«ç”Ÿæˆã•ã‚Œã¾ã™ã€‚

5.  **Turborepo ã®è¨­å®š (`turbo.json`)**
    - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã« `turbo.json` ã‚’ä½œæˆã—ã¾ã™ã€‚
    - `$schema`, `globalDependencies`, ãŠã‚ˆã³ `pipeline` ã‚’å®šç¾©ã—ã¾ã™ã€‚`build`, `test`, `lint`, `dev` ãªã©ã®ã‚¿ã‚¹ã‚¯ã¨ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–“ã®ä¾å­˜é–¢ä¿‚ (`dependsOn: ["^build"]` ãªã©) ã‚’é©åˆ‡ã«è¨­å®šã—ã¾ã™ã€‚
    ```json
    // turbo.json ã®ä¾‹
    {
      "$schema": "https://turbo.build/schema.json",
      "globalDependencies": ["**/.env.*local", "tsconfig.base.json"],
      "pipeline": {
        "build": {
          "dependsOn": ["^build"],
          "outputs": [".next/**", "!.next/cache/**", "dist/**"]
        },
        "lint": { "outputs": [] },
        "test:unit": { "outputs": ["coverage/**"] },
        /* ä»–ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ */
        "dev": { "cache": false, "persistent": true }
      }
    }
    ```

### ãƒ•ã‚§ãƒ¼ã‚º4: å…¨ä½“æ¤œè¨¼ã¨èª¿æ•´

**ç›®çš„**: ç§»è¡Œå¾Œã®ã‚³ãƒ¼ãƒ‰ãŒæ­£ã—ããƒ“ãƒ«ãƒ‰ã€ãƒ†ã‚¹ãƒˆã€å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã€å•é¡Œã‚’ä¿®æ­£ã™ã‚‹ã€‚

1.  **ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ (`turbo run build`)**
    - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã§ `turbo run build` ã‚’å®Ÿè¡Œã—ã€ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å…¨ä½“ãŒã‚¨ãƒ©ãƒ¼ãªããƒ“ãƒ«ãƒ‰ã§ãã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚
    - ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€å‹å®šç¾©ã€ä¾å­˜é–¢ä¿‚ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã€ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ãªã©ã‚’ä¿®æ­£ã—ã¾ã™ã€‚

2.  **é™çš„è§£æ (`turbo run lint`, `turbo run format:check`, etc.)**
    - `turbo run lint`, `turbo run format:check`, `turbo run type-check` ãªã©ã‚’å®Ÿè¡Œã—ã€é™çš„è§£æã®ã‚¨ãƒ©ãƒ¼ãŒãªã„ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚

3.  **æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ (`turbo run test`, `turbo run test:e2e`)**
    - `turbo run test` (ã¾ãŸã¯ `test:unit`, `test:integration`) ã‚’å®Ÿè¡Œã—ã€ã™ã¹ã¦ã®å˜ä½“ãƒ»çµ±åˆãƒ†ã‚¹ãƒˆãŒåˆæ ¼ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚
    - `turbo run test:e2e --filter=<app-name>` ã‚’å®Ÿè¡Œã—ã€E2Eãƒ†ã‚¹ãƒˆãŒãƒ‘ã‚¹ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚
    - ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹å ´åˆã¯ã€ã‚³ãƒ¼ãƒ‰ãƒ­ã‚¸ãƒƒã‚¯ã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã€ã¾ãŸã¯è¨­å®šã‚’ä¿®æ­£ã—ã¾ã™ã€‚

4.  **å‹•ä½œç¢ºèª (`turbo run dev`)**
    - `turbo run dev --filter=<app-name>` ãªã©ã§é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã€å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å‹•ä½œã‚’ç¢ºèªã—ã¾ã™ã€‚

5.  **èª¿æ•´**
    - æ¤œè¨¼ä¸­ã«ç™ºè¦‹ã•ã‚ŒãŸå•é¡Œã‚’ä¿®æ­£ã—ã¾ã™ã€‚å¿…è¦ã«å¿œã˜ã¦ `turbo.json` ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è¨­å®šã‚„å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®è¨­å®šã‚’èª¿æ•´ã—ã¾ã™ã€‚

## ğŸ”‘ å„ªå…ˆé †ä½ä»˜ã‘ã¨æˆåŠŸåŸºæº–

### å„ªå…ˆé †ä½

1. **å…±æœ‰ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ç§»è¡Œ**: `@core/shared`, `@core/infrastructure`, `@core/ui`
2. **ä¸»è¦ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ç§»è¡Œ**: æœ€åˆã« `user` ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ç§»è¡Œ
3. **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã®èª¿æ•´**: Next.js ã‚¢ãƒ—ãƒªã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
4. **æ®‹ã‚Šã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ç§»è¡Œ**: ä»–ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’é †æ¬¡ç§»è¡Œ

### æˆåŠŸåŸºæº–

1. **ãƒ“ãƒ«ãƒ‰æˆåŠŸ**: ã™ã¹ã¦ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ­£å¸¸ã«ãƒ“ãƒ«ãƒ‰ã§ãã‚‹
2. **ãƒ†ã‚¹ãƒˆåˆæ ¼**: ã™ã¹ã¦ã®å˜ä½“ãƒ»çµ±åˆãƒ»E2Eãƒ†ã‚¹ãƒˆãŒåˆæ ¼
3. **æ©Ÿèƒ½ç¶­æŒ**: æ—¢å­˜æ©Ÿèƒ½ãŒã™ã¹ã¦æ­£å¸¸ã«å‹•ä½œã™ã‚‹
4. **é–‹ç™ºåŠ¹ç‡å‘ä¸Š**: è¿½åŠ æ©Ÿèƒ½ã®é–‹ç™ºãŒãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å˜ä½ã§é€²ã‚ã‚‰ã‚Œã‚‹

## ğŸ“š å‚ç…§

- ç†æƒ³æ§‹æˆã®è©³ç´°ã¯[ç†æƒ³è¨­è¨ˆæ›¸](./01_ideal_design.md)ã‚’å‚ç…§
- ãƒ‰ãƒ¡ã‚¤ãƒ³å®Ÿè£…ã®è©³ç´°ã¯[ãƒ™ãƒ¼ã‚¹ãƒ‰ãƒ¡ã‚¤ãƒ³å®Ÿè£…æŒ‡ç¤ºæ›¸](./03_base_domain_guide.md)ã¨[Userãƒ‰ãƒ¡ã‚¤ãƒ³å®Ÿè£…æŒ‡ç¤ºæ›¸](./04_user_domain_guide.md)ã‚’å‚ç…§
- å°†æ¥çš„ãªæ‹¡å¼µè¨ˆç”»ã¯[å°†æ¥å±•é–‹è¨ˆç”»æ›¸](./05_future_expansion_plan.md)ã‚’å‚ç…§

## âš ï¸ ãƒªã‚¹ã‚¯ç®¡ç†

### æƒ³å®šã•ã‚Œã‚‹ãƒªã‚¹ã‚¯ã¨å¯¾ç­–

1. **å¾ªç’°ä¾å­˜ã®ç™ºç”Ÿ**
   - **ãƒªã‚¹ã‚¯**: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–“ã§å¾ªç’°ä¾å­˜ãŒç™ºç”Ÿã™ã‚‹
   - **å¯¾ç­–**: ä¾å­˜é–¢ä¿‚ã‚’æ˜ç¤ºçš„ã«åˆ¶é™ã™ã‚‹ä»•çµ„ã¿ã‚’å°å…¥ï¼ˆä¾‹: dependency-cruiser, ESLintãƒ«ãƒ¼ãƒ«ï¼‰

2. **ãƒ†ã‚¹ãƒˆå¤±æ•—**
   - **ãƒªã‚¹ã‚¯**: ç§»è¡Œã«ã‚ˆã‚Šãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹
   - **å¯¾ç­–**: å„ãƒ•ã‚§ãƒ¼ã‚ºã§ååˆ†ãªãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã—ã€å•é¡Œã‚’æ—©æœŸç™ºè¦‹ã€‚ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®ç§»è¡Œã¨æ›´æ–°ã‚’ä¸å¯§ã«è¡Œã†ã€‚

3. **ç§»è¡Œæ™‚é–“ã®é•·æœŸåŒ–**
   - **ãƒªã‚¹ã‚¯**: äºˆæƒ³ä»¥ä¸Šã«ç§»è¡Œã«æ™‚é–“ãŒã‹ã‹ã‚‹
   - **å¯¾ç­–**: å°ã•ãªå˜ä½ã§ã®ç§»è¡Œã‚’ç¹°ã‚Šè¿”ã—ã€ç¶™ç¶šçš„ã«æˆæœã‚’å¾—ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚å„ãƒ•ã‚§ãƒ¼ã‚ºã®ç›®æ¨™ã‚’æ˜ç¢ºã«ã™ã‚‹ã€‚

4. **å¾Œæ–¹äº’æ›æ€§ã®å•é¡Œ**
   - **ãƒªã‚¹ã‚¯**: APIã‚„å‹å®šç¾©ã®å¤‰æ›´ã«ã‚ˆã‚Šäº’æ›æ€§ãŒå¤±ã‚ã‚Œã‚‹
   - **å¯¾ç­–**: ç§»è¡ŒæœŸé–“ä¸­ã¯ä¸€æ™‚çš„ã«å¤ã„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚‚ç¶­æŒã—ã€æ®µéšçš„ã«å»ƒæ­¢ã€‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚’é©åˆ‡ã«è¡Œã†ã€‚ 

---

# 3. ãƒ™ãƒ¼ã‚¹ãƒ‰ãƒ¡ã‚¤ãƒ³å®Ÿè£…æŒ‡ç¤ºæ›¸

## ğŸ¯ ç›®çš„

**(ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ç›®çš„)**: ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å…¨ä½“ã§å…±é€šã—ã¦åˆ©ç”¨ã•ã‚Œã‚‹åŸºåº•ã‚¯ãƒ©ã‚¹ (Entity, ValueObject, Repository ãªã©)ã€å…±é€šã®ã‚¨ãƒ©ãƒ¼å‹ã€Resultå‹ã€åŸºæœ¬çš„ãªè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã€å‘½åè¦å‰‡ã€ãŠã‚ˆã³ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã®åŸºç¤ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚ãƒ‰ãƒ¡ã‚¤ãƒ³å›ºæœ‰ã®å®Ÿè£…ã‚’è¡Œã†ä¸Šã§ã®å…±é€šåŸºç›¤ã¨ãªã‚Šã¾ã™ã€‚

ã“ã®æ–‡æ›¸ã¯ã€Core SaaS Frameworkã®åŸºç›¤ã¨ãªã‚‹å…±é€šãƒ‰ãƒ¡ã‚¤ãƒ³ã®å®Ÿè£…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã‚’æä¾›ã—ã¾ã™ã€‚å…¨ã¦ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã§å…±é€šã—ã¦ä½¿ç”¨ã•ã‚Œã‚‹è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã€ã‚¯ãƒ©ã‚¹ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã€ãŠã‚ˆã³å‘½åè¦å‰‡ã‚’å®šç¾©ã—ã¾ã™ã€‚

## ğŸ“¦ å…±é€šãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹é€ 

### @core/shared ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

```
@core/shared/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ base/              # åŸºæœ¬ã‚¯ãƒ©ã‚¹ãƒ»ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚   â”‚   â”œâ”€â”€ entity.ts      # EntityåŸºåº•ã‚¯ãƒ©ã‚¹
â”‚   â”‚   â”œâ”€â”€ value-object.ts # ValueObjectåŸºåº•ã‚¯ãƒ©ã‚¹
â”‚   â”‚   â”œâ”€â”€ aggregate-root.ts # AggregateRootåŸºåº•ã‚¯ãƒ©ã‚¹
â”‚   â”‚   â”œâ”€â”€ repository.ts  # RepositoryåŸºåº•ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚   â”‚   â”œâ”€â”€ service.ts     # DomainServiceåŸºåº•ã‚¯ãƒ©ã‚¹
â”‚   â”‚   â””â”€â”€ use-case.ts    # UseCaseåŸºåº•ã‚¯ãƒ©ã‚¹
â”‚   â”‚
â”‚   â”œâ”€â”€ errors/            # ã‚¨ãƒ©ãƒ¼å®šç¾©
â”‚   â”‚   â”œâ”€â”€ application-error.ts # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼åŸºåº•ã‚¯ãƒ©ã‚¹
â”‚   â”‚   â”œâ”€â”€ domain-error.ts # ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ©ãƒ¼åŸºåº•ã‚¯ãƒ©ã‚¹
â”‚   â”‚   â”œâ”€â”€ infrastructure-error.ts # ã‚¤ãƒ³ãƒ•ãƒ©ã‚¨ãƒ©ãƒ¼åŸºåº•ã‚¯ãƒ©ã‚¹
â”‚   â”‚   â””â”€â”€ index.ts       # ã‚¨ãƒ©ãƒ¼ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ result/            # çµæœå‹
â”‚   â”‚   â”œâ”€â”€ result.ts      # æˆåŠŸ/å¤±æ•—ã‚’è¡¨ç¾ã™ã‚‹ Result<T, E> å‹
â”‚   â”‚   â”œâ”€â”€ async-result.ts # éåŒæœŸçµæœã‚’è¡¨ç¾ã™ã‚‹ AsyncResult<T, E> å‹
â”‚   â”‚   â””â”€â”€ index.ts       # Resultã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ types/             # å…±é€šå‹å®šç¾©
â”‚   â”‚   â”œâ”€â”€ common.ts      # å…±é€šå‹
â”‚   â”‚   â”œâ”€â”€ id.ts          # IDé–¢é€£å‹
â”‚   â”‚   â””â”€â”€ index.ts       # å‹ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/             # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â”‚   â”‚   â”œâ”€â”€ validation.ts  # ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”‚   â”œâ”€â”€ string.ts      # æ–‡å­—åˆ—æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ date.ts        # æ—¥ä»˜æ“ä½œ
â”‚   â”‚   â””â”€â”€ index.ts       # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”‚
â”‚   â””â”€â”€ value-objects/     # å…±é€šå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â”‚       â”œâ”€â”€ email.ts       # ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
â”‚       â”œâ”€â”€ phone-number.ts # é›»è©±ç•ªå·
â”‚       â”œâ”€â”€ password.ts    # ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
â”‚       â””â”€â”€ index.ts       # å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

### @core/infrastructure ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

```
@core/infrastructure/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ database/          # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
â”‚   â”‚   â”œâ”€â”€ client.ts      # DBã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (Drizzle)
â”‚   â”‚   â”œâ”€â”€ transaction.ts # ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†
â”‚   â”‚   â””â”€â”€ index.ts       # DBã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ auth/              # èªè¨¼åŸºç›¤
â”‚   â”‚   â”œâ”€â”€ jwt.ts         # JWTæ“ä½œ
â”‚   â”‚   â”œâ”€â”€ password.ts    # ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥
â”‚   â”‚   â””â”€â”€ index.ts       # èªè¨¼ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ storage/           # ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
â”‚   â”‚   â”œâ”€â”€ file-storage.ts # ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
â”‚   â”‚   â””â”€â”€ index.ts       # ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ logger/            # ãƒ­ã‚®ãƒ³ã‚°
â”‚   â”‚   â”œâ”€â”€ logger.ts      # ãƒ­ã‚¬ãƒ¼
â”‚   â”‚   â””â”€â”€ index.ts       # ãƒ­ã‚¬ãƒ¼ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”‚
â”‚   â””â”€â”€ http/              # HTTP/APIé€£æº
â”‚       â”œâ”€â”€ client.ts      # HTTP/APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚       â””â”€â”€ index.ts       # HTTPã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

## ğŸ§  ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®è©³ç´°æ§‹é€ 

å„ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ä»¥ä¸‹ã®æ§‹é€ ã‚’æŒã¡ã¾ã™ï¼š

```
packages/[domain-name]/
â”œâ”€â”€ domain/                  # ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤
â”‚   â”œâ”€â”€ entities/            # ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
â”‚   â”‚   â”œâ”€â”€ __tests__/       # ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ãƒ†ã‚¹ãƒˆ (Vitest)
â”‚   â”‚   â”‚   â””â”€â”€ product.entity.unit.test.ts
â”‚   â”‚   â””â”€â”€ product.entity.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ value-objects/       # å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â”‚   â”‚   â”œâ”€â”€ __tests__/       # å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ†ã‚¹ãƒˆ (Vitest)
â”‚   â”‚   â”‚   â””â”€â”€ product-name.vo.unit.test.ts
â”‚   â”‚   â”œâ”€â”€ product-id.vo.ts
â”‚   â”‚   â””â”€â”€ product-name.vo.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ enums/               # åˆ—æŒ™å‹å®šç¾©
â”‚   â”‚   â”œâ”€â”€ __tests__/       # åˆ—æŒ™å‹ã®ãƒ†ã‚¹ãƒˆ (Vitest)
â”‚   â”‚   â”‚   â””â”€â”€ product-status.enum.unit.test.ts
â”‚   â”‚   â””â”€â”€ product-status.enum.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ repositories/        # ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚   â”‚   â””â”€â”€ product.repository.interface.ts
â”‚   â”‚
â”‚   â””â”€â”€ services/            # ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹
â”‚       â”œâ”€â”€ __tests__/       # ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ†ã‚¹ãƒˆ (Vitest)
â”‚       â”‚   â””â”€â”€ inventory-check.service.unit.test.ts
â”‚       â””â”€â”€ inventory-check.service.ts
â”‚
â”œâ”€â”€ application/             # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”‚   â”œâ”€â”€ use-cases/           # ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
â”‚   â”‚   â”œâ”€â”€ __tests__/       # ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã®ãƒ†ã‚¹ãƒˆ (Vitest)
â”‚   â”‚   â”‚   â”œâ”€â”€ create-product.use-case.unit.test.ts
â”‚   â”‚   â”‚   â””â”€â”€ create-product.use-case.integration.test.ts
â”‚   â”‚   â”œâ”€â”€ create-product.use-case.ts
â”‚   â”‚   â””â”€â”€ find-product-by-id.use-case.ts
â”‚   â”‚
â”‚   â””â”€â”€ dtos/                # ãƒ‡ãƒ¼ã‚¿è»¢é€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â”‚       â”œâ”€â”€ product.dto.ts
â”‚
â”œâ”€â”€ infrastructure/          # ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£å±¤
â”‚   â”œâ”€â”€ repositories/        # ãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£…
â”‚   â”‚   â”œâ”€â”€ __tests__/       # ãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£…ã®ãƒ†ã‚¹ãƒˆ (Vitest)
â”‚   â”‚   â”‚   â””â”€â”€ product.repository.integration.test.ts
â”‚   â”‚   â””â”€â”€ product.repository.ts  # Drizzleã‚’ä½¿ç”¨ã—ãŸå®Ÿè£…
â”‚   â”‚
â”‚   â””â”€â”€ mappers/             # ãƒãƒƒãƒ‘ãƒ¼
â”‚       â”œâ”€â”€ __tests__/       # ãƒãƒƒãƒ‘ãƒ¼ã®ãƒ†ã‚¹ãƒˆ (Vitest)
â”‚       â”‚   â””â”€â”€ product.mapper.unit.test.ts
â”‚       â””â”€â”€ product.mapper.ts
â”‚
â””â”€â”€ README.md
```

## ğŸ§© åŸºæœ¬æ§‹æˆè¦ç´ ã®å®Ÿè£…

### Entity åŸºåº•ã‚¯ãƒ©ã‚¹

Entityã¯ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ä¸»è¦ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã€ä¸€æ„ã®IDã‚’æŒã¡ã€ãã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’é€šã˜ã¦åŒä¸€æ€§ãŒä¿ãŸã‚Œã¾ã™ã€‚

```typescript
// @core/shared/src/base/entity.ts
import { Result } from '../result';

export abstract class Entity<T> {
  protected readonly _id: T;
  protected props: Record<string, any>;

  constructor(id: T, props: Record<string, any>) {
    this._id = id;
    this.props = props;
  }

  get id(): T {
    return this._id;
  }

  public equals(entity?: Entity<T>): boolean {
    if (entity === null || entity === undefined) {
      return false;
    }
    
    if (this === entity) {
      return true;
    }
    
    return this._id === entity._id;
  }
}
```

### Value Object åŸºåº•ã‚¯ãƒ©ã‚¹

ValueObjectã¯å±æ€§ã®é›†åˆã§ã€åŒä¸€æ€§ã§ã¯ãªãå€¤ã§æ¯”è¼ƒã•ã‚Œã¾ã™ã€‚ä¸å¤‰ã§å‰¯ä½œç”¨ãŒãªã„ã“ã¨ãŒç‰¹å¾´ã§ã™ã€‚

```typescript
// @core/shared/src/base/value-object.ts
export abstract class ValueObject<T> {
  protected readonly props: T;

  constructor(props: T) {
    this.props = Object.freeze(props);
  }

  public equals(vo?: ValueObject<T>): boolean {
    if (vo === null || vo === undefined) {
      return false;
    }
    
    if (vo.props === undefined) {
      return false;
    }
    
    return JSON.stringify(this.props) === JSON.stringify(vo.props);
  }
  
  public getProps(): T {
    return this.props;
  }
}
```

### Aggregate Root

AggregateRootã¯Entityã®ç‰¹åˆ¥ãªå½¢ã§ã€é›†ç´„ã®ä¸€è²«æ€§å¢ƒç•Œã‚’å®šç¾©ã—ã¾ã™ã€‚

```typescript
// @core/shared/src/base/aggregate-root.ts
import { Entity } from './entity';
import { DomainEvent } from './domain-event';

export abstract class AggregateRoot<T> extends Entity<T> {
  private _domainEvents: DomainEvent[] = [];

  get domainEvents(): DomainEvent[] {
    return this._domainEvents;
  }

  protected addDomainEvent(domainEvent: DomainEvent): void {
    this._domainEvents.push(domainEvent);
  }

  public clearEvents(): void {
    this._domainEvents = [];
  }
}
```

### Repository ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

Repositoryã¯ãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šåŒ–ã¨å–å¾—ã®ãŸã‚ã®æŠ½è±¡åŒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’æä¾›ã—ã¾ã™ã€‚

```typescript
// @core/shared/src/base/repository.ts
import { AggregateRoot } from './aggregate-root';
import { Result } from '../result';

// åŸºæœ¬çš„ãªCRUDæ“ä½œãªã©ã‚’å®šç¾©ã™ã‚‹åŸºåº•ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ (ä¾‹)
export interface BaseRepository<T extends AggregateRoot<any>, IDType> {
  save(aggregateRoot: T): Promise<Result<void, Error>>;
  findById(id: IDType): Promise<Result<T | null, Error>>;
  // å¿…è¦ã«å¿œã˜ã¦ delete ã‚„ãã®ä»–ã®å…±é€šãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ 
  // delete(id: IDType): Promise<Result<void, Error>>;
}

// åˆ©ç”¨ä¾‹: ãƒ‰ãƒ¡ã‚¤ãƒ³å›ºæœ‰ãƒªãƒã‚¸ãƒˆãƒªã¯ã“ã‚Œã‚’ç¶™æ‰¿ã—ã¦æ‹¡å¼µ
// export interface UserRepositoryInterface extends BaseRepository<User, UserId> {
//   findByEmail(email: Email): Promise<Result<User | null, Error>>;
// }
```

### Result å‹

æ“ä½œã®æˆåŠŸ/å¤±æ•—ã‚’è¡¨ç¾ã™ã‚‹ãŸã‚ã«ã€[neverthrow](https://github.com/supermacro/neverthrow) ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’åˆ©ç”¨ã—ã¾ã™ã€‚
`neverthrow` ã¯ã€é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«ãŠã‘ã‚‹ Result ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ TypeScript ã§å …ç‰¢ã«å®Ÿè£…ã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

åŸºæœ¬çš„ãªä½¿ã„æ–¹:
- æˆåŠŸã‚’è¡¨ã™å€¤: `ok(value)`
- å¤±æ•—ã‚’è¡¨ã™ã‚¨ãƒ©ãƒ¼: `err(error)`
- çµæœã®ãƒã‚§ãƒƒã‚¯: `result.isOk()`, `result.isErr()`
- å€¤ã®å–ã‚Šå‡ºã—: `result.map(...)`, `result.unwrapOr(...)` ãªã©

ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å…¨ä½“ã€ç‰¹ã« Use Case ã‚„ Repository ã®æˆ»ã‚Šå€¤ã§ã¯ã€`AppResult<T>` å‹ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
ã“ã‚Œã¯ `shared/types/common.types.ts` ã§å®šç¾©ã•ã‚Œã¦ãŠã‚Šã€`neverthrow` ã® `Result<T, AppError>` ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã§ã™ã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§ä¸€è²«ã—ãŸã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

```typescript
// shared/types/common.types.ts
import { Result } from 'neverthrow';
import { AppError } from '@/shared/errors/app.error';

// ...

export type AppResult<T> = Result<T, AppError>;
```

### åŸºæœ¬ã‚¨ãƒ©ãƒ¼ã‚¯ãƒ©ã‚¹

ã‚¨ãƒ©ãƒ¼éšå±¤ã‚’å®šç¾©ã—ã¾ã™ã€‚

```typescript
// @core/shared/src/errors/application-error.ts
export abstract class ApplicationError extends Error {
  constructor(message: string) {
    super(message);
    this.name = this.constructor.name;
  }
}

// @core/shared/src/errors/domain-error.ts
export abstract class DomainError extends Error {
  constructor(message: string) {
    super(message);
    this.name = this.constructor.name;
  }
}

// @core/shared/src/errors/infrastructure-error.ts
export abstract class InfrastructureError extends Error {
  constructor(message: string) {
    super(message);
    this.name = this.constructor.name;
  }
}
```

## ğŸ“ å‘½åè¦å‰‡ã¨è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³

### ã‚¯ãƒ©ã‚¹å‘½åè¦å‰‡

| æ§‹æˆè¦ç´  | å‘½åãƒ‘ã‚¿ãƒ¼ãƒ³ | ä¾‹ |
|---------|-------------|-----|
| Entity | åè© | `User`, `Product` |
| Value Object | åè© + å¿…è¦ã«å¿œã˜ã¦ä¿®é£¾èª | `Email`, `PhoneNumber`, `ProductName` |
| Enum | åè© + `Enum` | `UserStatusEnum`, `OrderStatusEnum` |
| Aggregate Root | åè© (åŸºæœ¬çš„ã«Entityã¨åŒæ§˜) | `User`, `Order` |
| Repository Interface | ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å + `Repository` + `Interface` | `UserRepositoryInterface`, `ProductRepositoryInterface` |
| Repository Implementation | ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å + `Repository` | `UserRepository`, `ProductRepository` |
| Use Case | å‹•è© + åè© + `UseCase` | `CreateUserUseCase`, `UpdateProductUseCase` |
| DTO | ç›®çš„ + `Dto` | `UserResponseDto`, `CreateProductRequestDto` |
| Factory | ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å + `Factory` | `UserFactory`, `OrderFactory` |
| Domain Service | ç›®çš„ + `Service` | `InventoryCheckService`, `OrderProcessingService` |

### ãƒ•ã‚¡ã‚¤ãƒ«å‘½åè¦å‰‡

* ã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹ã§ã¯ãªãã‚±ãƒãƒ–ã‚±ãƒ¼ã‚¹ã‚’ä½¿ç”¨
* ãƒ‘ã‚¹ã‚«ãƒ«ã‚±ãƒ¼ã‚¹ã®ã‚¯ãƒ©ã‚¹åã¯ã‚±ãƒãƒ–ã‚±ãƒ¼ã‚¹ã«å¤‰æ›
* å½¹å‰²ã‚’ç¤ºã™ã‚µãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’è¿½åŠ 

```
user.entity.ts
email.vo.ts
user-status.enum.ts
user.repository.interface.ts
user.repository.ts  # å®Ÿè£…ã‚¯ãƒ©ã‚¹
create-user.use-case.ts
user-response.dto.ts
```

### ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å‘½åè¦å‰‡

* å…ƒã®ãƒ•ã‚¡ã‚¤ãƒ«åã«ã€ãƒ†ã‚¹ãƒˆã‚¿ã‚¤ãƒ—ã‚’ç¤ºã™ã‚µãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’è¿½åŠ 
* å˜ä½“ãƒ†ã‚¹ãƒˆ: `.unit.test.ts`
* çµ±åˆãƒ†ã‚¹ãƒˆ: `.integration.test.ts`
* E2Eãƒ†ã‚¹ãƒˆ: `.e2e.test.ts`

```
user.entity.unit.test.ts
user.repository.integration.test.ts
create-user.use-case.unit.test.ts
create-user.use-case.integration.test.ts
user-registration.e2e.test.ts
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### ãƒ†ã‚¹ãƒˆæ–¹é‡

å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å¯¾ã™ã‚‹æ¨å¥¨ãƒ†ã‚¹ãƒˆæ–¹æ³•ï¼š

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | ãƒ†ã‚¹ãƒˆç¨®é¡ | ãƒ¢ãƒƒã‚¯å¯¾è±¡ | æ¤œè¨¼å†…å®¹ |
|---------|--------------|-----------|-----------|---------|
| ãƒ‰ãƒ¡ã‚¤ãƒ³ | ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ | å˜ä½“ | ãªã— | ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã€ä¸å¤‰æ¡ä»¶ |
| ãƒ‰ãƒ¡ã‚¤ãƒ³ | å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ | å˜ä½“ | ãªã— | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€ç­‰ä¾¡æ€§ |
| ãƒ‰ãƒ¡ã‚¤ãƒ³ | åˆ—æŒ™å‹ | å˜ä½“ | ãªã— | å€¤ã®ç¯„å›²ã€ãƒ¡ã‚½ãƒƒãƒ‰ |
| ãƒ‰ãƒ¡ã‚¤ãƒ³ | ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ | å˜ä½“ | ä¾å­˜ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ |
| ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ | ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ | å˜ä½“ | ãƒªãƒã‚¸ãƒˆãƒªã€ã‚µãƒ¼ãƒ“ã‚¹ | ãƒ•ãƒ­ãƒ¼ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° |
| ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ | ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ | çµ±åˆ | å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã®ã¿ | ãƒªãƒã‚¸ãƒˆãƒªã¨ã®é€£æº |
| ã‚¤ãƒ³ãƒ•ãƒ© | ãƒªãƒã‚¸ãƒˆãƒª | çµ±åˆ | ãªã—(ãƒ†ã‚¹ãƒˆDBä½¿ç”¨) | DBæ“ä½œã®æ­£ç¢ºæ€§ |
| ã‚¤ãƒ³ãƒ•ãƒ© | ãƒãƒƒãƒ‘ãƒ¼ | å˜ä½“ | ãªã— | å¤‰æ›ãƒ­ã‚¸ãƒƒã‚¯ |
| ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ (`apps/`) | APIãƒãƒ³ãƒ‰ãƒ©/Server Action | çµ±åˆ | Use Case (Mock) or ãªã—(DIåˆ©ç”¨) | ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ |
| ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ (`apps/`) | UIãƒ•ãƒƒã‚¯ | å˜ä½“ | APIå‘¼ã³å‡ºã— (Mock) | çŠ¶æ…‹ç®¡ç†ã€å‰¯ä½œç”¨ |
| ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ (`apps/`) | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼ | E2E | ãªã—(å®Ÿç’°å¢ƒã¾ãŸã¯ãƒ†ã‚¹ãƒˆç’°å¢ƒå…¨ä½“) | å…¨ä½“æ©Ÿèƒ½ã€çµ±åˆ |

### ãƒ†ã‚¹ãƒˆå®Ÿè£…ä¾‹ - ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

```typescript
// @core/user/domain/entities/__tests__/user.entity.unit.test.ts
import { User } from '../user.entity';
import { Email } from '@core/shared/value-objects/email.vo';
import { UserStatusEnum, UserRoleEnum } from '../../enums'; // ä¿®æ­£: Enumã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import { UniqueEntityID } from '@core/shared/types'; // ä¿®æ­£: å‹ã‚¤ãƒ³ãƒãƒ¼ãƒˆ (BaseEntityã§ä½¿ã£ã¦ã‚‹æƒ³å®š)
import { UserName } from '../../value-objects'; // ä¿®æ­£: UserNameã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import { describe, it, expect } from 'vitest';

describe('User Entity', () => {
  it('should create a valid user', () => {
    // æº–å‚™
    const emailResult = Email.create('test@example.com');
    const nameResult = UserName.create('Test User'); // ä¿®æ­£: UserNameä½œæˆ
    expect(emailResult.isSuccess()).toBeTruthy();
    expect(nameResult.isSuccess()).toBeTruthy();
    
    // å®Ÿè¡Œ
    const userResult = User.create({
      email: emailResult.getValue(),
      name: nameResult.getValue(), // ä¿®æ­£: nameã‚’ä½¿ç”¨
      // status ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§è¨­å®šã•ã‚Œã‚‹æƒ³å®š
    });
    
    // æ¤œè¨¼
    expect(userResult.isSuccess()).toBeTruthy();
    const user = userResult.getValue();
    expect(user.name.value).toBe('Test User'); // ä¿®æ­£: nameãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®æ¤œè¨¼
    expect(user.email.value).toBe('test@example.com');
    expect(user.status).toBe(UserStatusEnum.PENDING); // ä¿®æ­£: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ¤œè¨¼
    expect(user.role).toBe(UserRoleEnum.USER); // ä¿®æ­£: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ­ãƒ¼ãƒ«æ¤œè¨¼
  });
  
  it('should fail with invalid name', () => {
    // æº–å‚™
    const emailResult = Email.create('test@example.com');
    const invalidNameResult = UserName.create(''); // ä¿®æ­£: UserNameã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    
    // å®Ÿè¡Œ & æ¤œè¨¼ (UserNameä½œæˆæ™‚ç‚¹ã§å¤±æ•—)
    expect(invalidNameResult.isFailure()).toBeTruthy();
    // expect(invalidNameResult.getError().message).toContain('åå‰ã¯'); // å…·ä½“çš„ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯VOã«ã‚ˆã‚‹
    
    // User.create ã«ç„¡åŠ¹ãªåå‰ã‚’æ¸¡ã—ãŸå ´åˆã‚‚å¤±æ•—ã™ã‚‹ã¯ãš
    // const userResult = User.create({ email: emailResult.getValue(), name: { value: '' } as UserName });
    // expect(userResult.isFailure()).toBeTruthy();
  });
  
  it('should deactivate user correctly', () => {
    // æº–å‚™
    const emailResult = Email.create('test@example.com');
    const nameResult = UserName.create('Test User');
    const userResult = User.create({ email: emailResult.getValue(), name: nameResult.getValue() });
    const user = userResult.getValue();
    user.activate(); // ä¸€åº¦ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹
    expect(user.status).toBe(UserStatusEnum.ACTIVE);
    
    // å®Ÿè¡Œ
    const deactivateResult = user.deactivate(); // ä¿®æ­£: Resultã‚’ãƒã‚§ãƒƒã‚¯
    
    // æ¤œè¨¼
    expect(deactivateResult.isSuccess()).toBeTruthy();
    expect(user.status).toBe(UserStatusEnum.INACTIVE);
  });
});
```

### ãƒ†ã‚¹ãƒˆå®Ÿè£…ä¾‹ - ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ (å˜ä½“ãƒ†ã‚¹ãƒˆ)

```typescript
// @core/user/application/use-cases/__tests__/create-user.use-case.unit.test.ts
// ... imports ...
import { UserAlreadyExistsError } from '../../../domain/errors/user-already-exists.error';

// ãƒªãƒã‚¸ãƒˆãƒªã¨ãƒãƒƒãƒ‘ãƒ¼ã®ãƒ¢ãƒƒã‚¯
vi.mock('../../../infrastructure/mappers/user.mapper');
// å®Ÿéš›ã®ãƒ†ã‚¹ãƒˆã§ã¯ã€DIã‚³ãƒ³ãƒ†ãƒŠè¨­å®šã‚’ãƒ†ã‚¹ãƒˆç”¨ã«æ§‹æˆã™ã‚‹ã‹ã€
// vi.mock ãªã©ã§ä¾å­˜é–¢ä¿‚ã‚’ãƒ¢ãƒƒã‚¯åŒ–ã—ã¾ã™ã€‚
const mockUserRepository: UserRepositoryInterface = {
  save: vi.fn(),
  findByEmail: vi.fn(),
  findById: vi.fn(),
  findAll: vi.fn(),
  delete: vi.fn(),
};

describe('CreateUserUseCase - Unit Tests', () => {
  let useCase: CreateUserUseCase;
  let mockUserMapper: UserMapper;
  
  // DIã‚³ãƒ³ãƒ†ãƒŠã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã€ãƒ†ã‚¹ãƒˆç”¨ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’è¨­å®šã™ã‚‹ã‹ã€
  // ä»¥ä¸‹ã®ã‚ˆã†ã«æ‰‹å‹•ã§ãƒ¢ãƒƒã‚¯ã‚’æ³¨å…¥ã—ã¾ã™ã€‚
  beforeEach(() => {
    vi.clearAllMocks();
    mockUserMapper = new UserMapper() as jest.Mocked<UserMapper>; // ãƒ¢ãƒƒã‚¯ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å–å¾—
    // ä»®ã® toDto å®Ÿè£…
    vi.mocked(mockUserMapper.toDto).mockImplementation((user) => ({ id: user.id.value, email: user.email.value, name: user.name.value, role: user.role, status: user.status }));
    useCase = new CreateUserUseCase(mockUserRepository, mockUserMapper);
  });
  
  it('should create a user successfully', async () => {
    // æº–å‚™ (ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã—DTO)
    const dto: CreateUserDto = {
      email: 'test@example.com',
      name: 'Test User',
      // password ã¯ä¸è¦
    };
    
    // æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ãªã— & ä¿å­˜æˆåŠŸã‚’æ¨¡æ“¬
    vi.mocked(mockUserRepository.findByEmail).mockResolvedValue(Result.ok(null));
    vi.mocked(mockUserRepository.save).mockResolvedValue(Result.ok(undefined));
    
    // å®Ÿè¡Œ
    const result = await useCase.execute(dto);
    
    // æ¤œè¨¼
    expect(result.isSuccess()).toBeTruthy();
    expect(mockUserRepository.findByEmail).toHaveBeenCalledWith(expect.any(Email)); // Email VOã§å‘¼ã°ã‚Œã‚‹ã‹
    expect(mockUserRepository.save).toHaveBeenCalledWith(expect.any(User)); // Userã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã§å‘¼ã°ã‚Œã‚‹ã‹
    expect(mockUserMapper.toDto).toHaveBeenCalled();
    const savedUserArg = vi.mocked(mockUserRepository.save).mock.calls[0][0];
    expect(savedUserArg.name.value).toBe('Test User');
    expect(savedUserArg.email.value).toBe('test@example.com');
  });
  
  it('should fail if user already exists', async () => {
    // æº–å‚™
    const dto: CreateUserDto = {
      email: 'existing@example.com',
      name: 'Existing User',
    };
    
    // æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã„ã‚‹ã“ã¨ã‚’æ¨¡æ“¬
    const existingUserMock = { id: 'some-id', /* ... */ } as User;
    vi.mocked(mockUserRepository.findByEmail).mockResolvedValue(Result.ok(existingUserMock));
    
    // å®Ÿè¡Œ
    const result = await useCase.execute(dto);
    
    // æ¤œè¨¼
    expect(result.isFailure()).toBeTruthy();
    expect(result.getError()).toBeInstanceOf(UserAlreadyExistsError);
    expect(mockUserRepository.save).not.toHaveBeenCalled();
  });
  
  // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰é–¢é€£ã®ãƒ†ã‚¹ãƒˆã¯ä¸è¦
});
```

### ãƒ†ã‚¹ãƒˆå®Ÿè£…ä¾‹ - ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ (çµ±åˆãƒ†ã‚¹ãƒˆ)

```typescript
// @core/user/application/use-cases/__tests__/create-user.use-case.integration.test.ts
// ... imports ...
import * as schema from '@core/infrastructure/database/schema';

describe('CreateUserUseCase - Integration Tests', () => {
  let useCase: CreateUserUseCase;
  let userRepository: UserRepository;
  const testDb = new TestDatabase();
  // DIã‚³ãƒ³ãƒ†ãƒŠã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã€ãƒ†ã‚¹ãƒˆç”¨ã®DBæ¥ç¶šæƒ…å ±ãªã©ã‚’ä½¿ã£ã¦
  // ã‚³ãƒ³ãƒ†ãƒŠã‚’åˆæœŸåŒ–ã—ã€ãã“ã‹ã‚‰ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å–å¾—ã—ã¾ã™ã€‚
  
  beforeAll(async () => {
    await testDb.start();
  });
  
  beforeEach(async () => {
    await testDb.clearTables([schema.users]);
    userRepository = new UserRepository(testDb.getClient(), new UserMapper());
    // PasswordService ã¯ä¸è¦
    useCase = new CreateUserUseCase(userRepository, new UserMapper());
  });
  
  afterAll(async () => {
    await testDb.stop();
  });
  
  it('should create a user in the database', async () => {
    // æº–å‚™ (ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã—DTO)
    const dto: CreateUserDto = {
      email: 'integration@example.com',
      name: 'Integration Test User',
      // password ã¯ä¸è¦
    };
    
    // å®Ÿè¡Œ
    const result = await useCase.execute(dto);
    
    // æ¤œè¨¼
    expect(result.isSuccess()).toBeTruthy();
    const createdUserDto = result.getValue();
    expect(createdUserDto.email).toBe('integration@example.com');
    
    // DBã‹ã‚‰ç›´æ¥æ¤œè¨¼
    const emailVo = Email.create('integration@example.com').getValue();
    const savedUserResult = await userRepository.findByEmail(emailVo);
    expect(savedUserResult.isSuccess()).toBeTruthy();
    const savedUser = savedUserResult.getValue();
    expect(savedUser).not.toBeNull();
    expect(savedUser?.name.value).toBe('Integration Test User');
    // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®æ¤œè¨¼ã¯ä¸è¦
  });
});
```

### ãƒ†ã‚¹ãƒˆå®Ÿè£…ä¾‹ - E2Eãƒ†ã‚¹ãƒˆ

```typescript
// apps/saas-app/tests/e2e/__tests__/user-registration.e2e.test.ts
// ã“ã®ãƒ†ã‚¹ãƒˆã¯ Userãƒ‰ãƒ¡ã‚¤ãƒ³ ã¨ Authãƒ‰ãƒ¡ã‚¤ãƒ³ ã®ä¸¡æ–¹ãŒé–¢ã‚ã‚‹ãŸã‚ã€
// ç™»éŒ²è‡ªä½“ã¯ Userãƒ‰ãƒ¡ã‚¤ãƒ³ã®API (/api/users?)ã€
// ãã®å¾Œã®ãƒ­ã‚°ã‚¤ãƒ³ã¯ Authãƒ‰ãƒ¡ã‚¤ãƒ³ã®API (/api/auth/login?) ã‚’å‘¼ã³å‡ºã™å½¢ã«ãªã‚‹ã€‚
// ã“ã“ã§ã¯ç™»éŒ²ã¨ãƒ­ã‚°ã‚¤ãƒ³ãŒæˆåŠŸã™ã‚‹ä¸€é€£ã®æµã‚Œã‚’ç¤ºã™ã€‚
import { test, expect } from '@playwright/test';
import { TestDatabase } from '@core/infrastructure/database/testing';
import * as schema from '@core/infrastructure/database/schema';

const BASE_URL = process.env.PLAYWRIGHT_BASE_URL || 'http://localhost:3000';
const testDb = new TestDatabase();

test.describe('User Registration and Login Flow', () => {
  test.beforeAll(async () => {
    await testDb.start();
  });

  test.beforeEach(async ({ page }) => {
    await testDb.clearTables([schema.users /*, ä»–ã®é–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ« */]);
    await page.goto(BASE_URL);
  });

  test.afterAll(async () => {
    await testDb.stop();
  });

  test('should allow a user to register and subsequently login', async ({ page }) => {
    // --- ç™»éŒ²ãƒ•ã‚§ãƒ¼ã‚º --- (ä¾‹: /register ãƒšãƒ¼ã‚¸çµŒç”±)
    await page.goto(`${BASE_URL}/register`);
    const userEmail = `e2e-${Date.now()}@example.com`;
    await page.fill('input[name="email"]', userEmail);
    await page.fill('input[name="name"]', 'E2E Test User');
    await page.fill('input[name="password"]', 'Password123!'); // ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ã«ã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›ãŒã‚ã‚‹æƒ³å®š
    await page.click('button:has-text("ç™»éŒ²")'); // ç™»éŒ²ãƒœã‚¿ãƒ³ã®ãƒ†ã‚­ã‚¹ãƒˆã¯è¦ç¢ºèª
    
    // ç™»éŒ²æˆåŠŸå¾Œã€ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãªã©ã‚’æœŸå¾…
    await expect(page).toHaveURL(`${BASE_URL}/login`);

    // --- ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚§ãƒ¼ã‚º --- (Authãƒ‰ãƒ¡ã‚¤ãƒ³ãŒæ‹…å½“)
    await page.fill('input[name="email"]', userEmail);
    await page.fill('input[name="password"]', 'Password123!');
    await page.click('button:has-text("ãƒ­ã‚°ã‚¤ãƒ³")'); // ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã®ãƒ†ã‚­ã‚¹ãƒˆã¯è¦ç¢ºèª
    
    // ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãªã©ã€ãƒ­ã‚°ã‚¤ãƒ³å¾Œã®ãƒšãƒ¼ã‚¸ã«é·ç§»ã™ã‚‹ã“ã¨ã‚’æœŸå¾…
    await expect(page).toHaveURL(`${BASE_URL}/dashboard`);
    await expect(page.locator('h1')).toContainText('ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰'); 
  });
});
```

// ... å®Ÿè£…ãƒ•ãƒ­ãƒ¼ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã‚’ä¿®æ­£ ...
```mermaid
sequenceDiagram
    participant Client as Client (e.g., Browser/API Caller)
    participant API as API Endpoint (apps/saas-app/api)
    participant UC as Use Case (@core/user/application)
    participant Repo as Repository Impl (@core/user/infrastructure)
    participant DB as Database (@core/infrastructure/database)
    participant Domain as Domain Layer (@core/user/domain)

    Client->>API: POST /users (CreateUserDto - name, email)
    API->>UC: execute(dto)
    UC->>Domain: Email.create(dto.email)
    Domain-->>UC: Result<Email>
    UC->>Domain: UserName.create(dto.name)
    Domain-->>UC: Result<UserName>
    UC->>Repo: findByEmail(email)
    Repo->>DB: SELECT * FROM users WHERE email = ...
    DB-->>Repo: DB Row(s)
    Repo-->>UC: Result<User | null>
    alt User already exists
        UC-->>API: Result.fail(UserAlreadyExistsError)
        API-->>Client: 409 Conflict
    else User does not exist
        %% PasswordHash.create ã¯ Auth ãƒ‰ãƒ¡ã‚¤ãƒ³ã®è²¬å‹™
        UC->>Domain: User.create({email, name})
        Domain-->>UC: Result<User>
        UC->>Repo: save(user)
        Repo->>DB: INSERT INTO users ...
        DB-->>Repo: Success
        Repo-->>UC: Result.ok()
        %% ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¨­å®šãªã©ã¯åˆ¥é€”Authãƒ‰ãƒ¡ã‚¤ãƒ³ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ãŒå®Ÿè¡Œã•ã‚Œã‚‹æƒ³å®š
        UC->>API: Result.ok(UserDto)
        API-->>Client: 201 Created (UserDto)
    end
```

## ğŸ“– å®Ÿè£…ãƒ•ãƒ­ãƒ¼

### æ–°ã—ã„ãƒ‰ãƒ¡ã‚¤ãƒ³å®Ÿè£…ã®åŸºæœ¬ãƒ•ãƒ­ãƒ¼

1. **åˆ—æŒ™å‹ã¨å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å®šç¾©**: ãƒ‰ãƒ¡ã‚¤ãƒ³å†…ã®ä¸å¤‰ã®å±æ€§ã‚„é¸æŠè‚¢ã‚’å®šç¾©
2. **ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£/é›†ç´„ãƒ«ãƒ¼ãƒˆã®å®šç¾©**: ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ä¸­å¿ƒã¨ãªã‚‹æ¦‚å¿µã¨ãã®å¢ƒç•Œã‚’å®šç¾©
3. **ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®šç¾©**: ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ã®ãŸã‚ã®å¥‘ç´„ã‚’å®šç¾©
4. **ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ã®å®šç¾©**: è¤‡æ•°ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«ã¾ãŸãŒã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®šç¾© (å¿…è¦ãªå ´åˆ)
5. **ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã®å®Ÿè£…**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å›ºæœ‰ã®æ“ä½œãƒ•ãƒ­ãƒ¼ã‚’å®šç¾©
6. **DTOã®å®šç¾©**: ãƒ¬ã‚¤ãƒ¤ãƒ¼é–“ã®ãƒ‡ãƒ¼ã‚¿è»¢é€å½¢å¼ã‚’å®šç¾©
7. **ãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£…**: ã‚¤ãƒ³ãƒ•ãƒ©å±¤ã§ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ã‚’å…·ä½“çš„ã«å®Ÿè£…
8. **ãƒ†ã‚¹ãƒˆã®å®Ÿè£…**: å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«å¯¾å¿œã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’è¨˜è¿°

```mermaid
sequenceDiagram
    participant Client as Client (e.g., Browser/API Caller)
    participant API as API Endpoint (apps/saas-app/api)
    participant UC as Use Case (@core/user/application)
    participant Repo as Repository Impl (@core/user/infrastructure)
    participant DB as Database (@core/infrastructure/database)
    participant Domain as Domain Layer (@core/user/domain)

    Client->>API: POST /users (CreateUserDto)
    API->>UC: execute(dto)
    UC->>Domain: Email.create(dto.email)
    Domain-->>UC: Result<Email>
    UC->>Domain: UserName.create(dto.name)
    Domain-->>UC: Result<UserName>
    UC->>Repo: findByEmail(email)
    Repo->>DB: SELECT * FROM users WHERE email = ...
    DB-->>Repo: DB Row(s)
    Repo-->>UC: Result<User | null>
    alt User already exists
        UC-->>API: Result.fail(UserAlreadyExistsError)
        API-->>Client: 409 Conflict
    else User does not exist
        UC->>Domain: PasswordHash.create(hashedPassword)
        Domain-->>UC: Result<PasswordHash>
        UC->>Domain: User.create({...})
        Domain-->>UC: Result<User>
        UC->>Repo: save(user)
        Repo->>DB: INSERT INTO users ...
        DB-->>Repo: Success
        Repo-->>UC: Result.ok()
        UC->>API: Result.ok(UserDto)
        API-->>Client: 201 Created (UserDto)
    end
```
*(ä¸Šè¨˜ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆãƒªã‚¯ã‚¨ã‚¹ãƒˆã®åŸºæœ¬çš„ãªã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã®ä¾‹ã§ã™)*

## ğŸ“š å‚ç…§

- è©³ç´°è¨­è¨ˆã«ã¤ã„ã¦ã¯[ç†æƒ³è¨­è¨ˆæ›¸](./01_ideal_design.md)ã‚’å‚ç…§
- ç§»è¡Œãƒ—ãƒ­ã‚»ã‚¹ã«ã¤ã„ã¦ã¯[ç§»è¡Œè¨ˆç”»æ›¸](./02_migration_plan.md)ã‚’å‚ç…§
- Userãƒ‰ãƒ¡ã‚¤ãƒ³ã®å…·ä½“çš„å®Ÿè£…ã¯[Userãƒ‰ãƒ¡ã‚¤ãƒ³å®Ÿè£…æŒ‡ç¤ºæ›¸](./04_user_domain_guide.md)ã‚’å‚ç…§
- å°†æ¥çš„ãªæ‹¡å¼µè¨ˆç”»ã¯[å°†æ¥å±•é–‹è¨ˆç”»æ›¸](./05_future_expansion_plan.md)ã‚’å‚ç…§ 

---

# 4. Userãƒ‰ãƒ¡ã‚¤ãƒ³å®Ÿè£…æŒ‡ç¤ºæ›¸

## ğŸ¯ ç›®çš„

**(ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ç›®çš„)**: ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ä¸»è¦ãªãƒ‰ãƒ¡ã‚¤ãƒ³ã®ä¸€ã¤ã§ã‚ã‚‹ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã€ã‚’å…·ä½“çš„ãªä¾‹ã¨ã—ã¦å–ã‚Šä¸Šã’ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã®è²¬å‹™å®šç¾©ã‹ã‚‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹é€ ã€ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆEntity, VO, Enum, Repository, Usecase, DTOï¼‰ã®å®Ÿè£…ã€ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã¾ã§ã‚’è©³ç´°ã«è§£èª¬ã—ã¾ã™ã€‚ä»–ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’å®Ÿè£…ã™ã‚‹éš›ã®å…·ä½“çš„ãªå‚ç…§ãƒ¢ãƒ‡ãƒ«ã¨ãªã‚Šã¾ã™ã€‚

ã“ã®æ–‡æ›¸ã¯ã€Core SaaS Frameworkã«ãŠã‘ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ãƒ‰ãƒ¡ã‚¤ãƒ³ã®å®Ÿè£…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã‚’æä¾›ã—ã¾ã™ã€‚èªè¨¼ãƒ»èªå¯ã‚·ã‚¹ãƒ†ãƒ ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã®æ¨™æº–å®Ÿè£…ã‚’ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ¬ãƒ™ãƒ«ã§æä¾›ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦è©³è¿°ã—ã¾ã™ã€‚

## ğŸ“‹ Userãƒ‰ãƒ¡ã‚¤ãƒ³ã®è²¬å‹™

Userãƒ‰ãƒ¡ã‚¤ãƒ³ã¯ã€SaaSã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä¸­æ ¸ã¨ãªã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é–¢ã™ã‚‹åŸºæœ¬çš„ãªæƒ…å ±ç®¡ç†æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚
**æ³¨æ„:** èªè¨¼ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒèª°ã§ã‚ã‚‹ã‹ã®æ¤œè¨¼ï¼‰ãŠã‚ˆã³èªå¯ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä½•ãŒã§ãã‚‹ã‹ã®åˆ¤æ–­ï¼‰ã«é–¢ã™ã‚‹è²¬å‹™ã¯ã€ç‹¬ç«‹ã—ãŸ `auth` ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼‰ãŒæ‹…å½“ã—ã¾ã™ã€‚

Userãƒ‰ãƒ¡ã‚¤ãƒ³ã®ä¸»ãªè²¬å‹™:

1.  **ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆã€æ›´æ–°ã€å‰Šé™¤ã€æ¤œç´¢ (åŸºæœ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±)
2.  **ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±ã®ç®¡ç†
3.  **çŠ¶æ…‹ç®¡ç†**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–/éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã©ã®çŠ¶æ…‹ç®¡ç†
4.  **çµ„ç¹”/ãƒãƒ¼ãƒ é–¢é€£æƒ…å ±**: (å°†æ¥çš„ãªæ‹¡å¼µãƒã‚¤ãƒ³ãƒˆ)

## ğŸ“¦ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹é€  (@core/user)

```
@core/user/
â”œâ”€â”€ domain/                  # ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤
â”‚   â”œâ”€â”€ entities/            # ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
â”‚   â”‚   â”œâ”€â”€ __tests__/       # ãƒ†ã‚¹ãƒˆ (Vitest)
â”‚   â”‚   â”‚   â””â”€â”€ user.entity.unit.test.ts
â”‚   â”‚   â””â”€â”€ user.entity.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ value-objects/       # å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â”‚   â”‚   â”œâ”€â”€ __tests__/       # ãƒ†ã‚¹ãƒˆ (Vitest)
â”‚   â”‚   â”‚   â””â”€â”€ user-name.vo.unit.test.ts
â”‚   â”‚   â”œâ”€â”€ user-id.vo.ts
â”‚   â”‚   â””â”€â”€ user-name.vo.ts
â”‚   â”‚   # PasswordHash.vo.ts ã¯ auth ãƒ‰ãƒ¡ã‚¤ãƒ³ã¸ç§»å‹•
â”‚   â”‚
â”‚   â”œâ”€â”€ enums/               # åˆ—æŒ™å‹
â”‚   â”‚   â”œâ”€â”€ __tests__/       # ãƒ†ã‚¹ãƒˆ (Vitest)
â”‚   â”‚   â”‚   â””â”€â”€ user-role.enum.unit.test.ts
â”‚   â”‚   â””â”€â”€ user-role.enum.ts # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å½¹å‰²ã‚’ç¤ºã™Enum (èªå¯ãƒ­ã‚¸ãƒƒã‚¯è‡ªä½“ã¯authãƒ‰ãƒ¡ã‚¤ãƒ³)
â”‚   â”‚
â”‚   â”œâ”€â”€ repositories/        # ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚   â”‚   â””â”€â”€ user.repository.interface.ts
â”‚   â”‚
â”‚   â””â”€â”€ services/            # ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ (Userãƒ‰ãƒ¡ã‚¤ãƒ³å›ºæœ‰ã®ã‚‚ã®ãŒã‚ã‚Œã°)
â”‚       # authentication.service.ts ã¯ auth ãƒ‰ãƒ¡ã‚¤ãƒ³ã¸ç§»å‹•
â”‚
â”œâ”€â”€ application/             # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”‚   â”œâ”€â”€ usecases/            # ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
â”‚   â”‚   â”œâ”€â”€ __tests__/       # ãƒ†ã‚¹ãƒˆ (Vitest)
â”‚   â”‚   â”‚   â”œâ”€â”€ create-user.usecase.unit.test.ts
â”‚   â”‚   â”‚   â””â”€â”€ create-user.usecase.integration.test.ts
â”‚   â”‚   â”œâ”€â”€ create-user.usecase.ts
â”‚   â”‚   â””â”€â”€ find-user-by-id.usecase.ts
â”‚   â”‚   # authenticate-user.usecase.ts ã¯ auth ãƒ‰ãƒ¡ã‚¤ãƒ³ã¸ç§»å‹•
â”‚   â”‚
â”‚   â””â”€â”€ dtos/                # ãƒ‡ãƒ¼ã‚¿è»¢é€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â”‚       â”œâ”€â”€ user.dto.ts
â”‚       â””â”€â”€ create-user.dto.ts # ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯å«ã¾ãªã„
â”‚
â”œâ”€â”€ infrastructure/          # ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£å±¤
â”‚   â”œâ”€â”€ repositories/        # ãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£…
â”‚   â”‚   â”œâ”€â”€ __tests__/       # ãƒ†ã‚¹ãƒˆ (Vitest)
â”‚   â”‚   â”‚   â””â”€â”€ user.repository.integration.test.ts
â”‚   â”‚   â””â”€â”€ user.repository.ts  # Drizzleã«ã‚ˆã‚‹å®Ÿè£…
â”‚   â”‚
â”‚   â””â”€â”€ mappers/             # ãƒãƒƒãƒ‘ãƒ¼
â”‚       â”œâ”€â”€ __tests__/       # ãƒ†ã‚¹ãƒˆ (Vitest)
â”‚       â”‚   â””â”€â”€ user.mapper.unit.test.ts
â”‚       â””â”€â”€ user.mapper.ts
â”‚
â”œâ”€â”€ README.md
â””â”€â”€ package.json
```

## ğŸ§© ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«

#### User ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

```typescript
// @core/user/domain/entities/user.entity.ts
import { BaseEntity } from '@core/shared/base';
import { Result } from '@core/shared/result';
import { Email } from '@core/shared/value-objects/email.vo';
import { UserId, UserName } from '../value-objects'; // PasswordHash ã¯å‰Šé™¤
import { UserRoleEnum } from '../enums/user-role.enum';
import { UserCreatedEvent } from '../events/user-created.event';
import { InvalidPropertyError } from '@core/shared/errors';

interface UserProps {
  email: Email;
  // passwordHash: PasswordHash; // auth ãƒ‰ãƒ¡ã‚¤ãƒ³ã¸
  name: UserName;
  role: UserRoleEnum; // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åŸºæœ¬çš„ãªå½¹å‰²
  status: UserStatusEnum; // ä¾‹: ã‚¢ã‚¯ãƒ†ã‚£ãƒ–/éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã©
  lastLoginAt?: Date; // æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ—¥æ™‚ã¯æŒã¤ã‹ã‚‚ã—ã‚Œãªã„ (authãƒ‰ãƒ¡ã‚¤ãƒ³ãŒæ›´æ–°ã™ã‚‹å¯èƒ½æ€§)
  createdAt: Date;
  updatedAt: Date;
}

export class User extends BaseEntity<UserId> {
  private constructor(id: UserId, props: UserProps) {
    super(id, props);
  }

  // ã‚²ãƒƒã‚¿ãƒ¼
  get email(): Email { return this.props.email; }
  // get passwordHash(): PasswordHash { return this.props.passwordHash; } // å‰Šé™¤
  get name(): UserName { return this.props.name; }
  get role(): UserRoleEnum { return this.props.role; }
  get status(): UserStatusEnum { return this.props.status; }
  get lastLoginAt(): Date | undefined { return this.props.lastLoginAt; }
  // createdAt, updatedAt ã¯ BaseEntity ã‹ã‚‰ç¶™æ‰¿

  // ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰
  public static create(
    props: Omit<UserProps, 'role' | 'status' | 'createdAt' | 'updatedAt' | 'lastLoginAt'>,
    id?: UserId
  ): Result<User, Error> {

    // åå‰ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    const nameResult = UserName.create(props.name.value);
    if (nameResult.isFailure()) {
      return Result.fail(nameResult.getError());
    }

    // Emailã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ (Email VO ã«å§”è­²)
    const emailResult = Email.create(props.email.value);
    if (emailResult.isFailure()) {
        return Result.fail(emailResult.getError());
    }

    const defaultProps: UserProps = {
      ...props,
      name: nameResult.getValue(),
      email: emailResult.getValue(),
      role: UserRoleEnum.USER, // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ­ãƒ¼ãƒ«
      status: UserStatusEnum.PENDING, // ä¾‹: åˆæœŸçŠ¶æ…‹
      createdAt: new Date(),
      updatedAt: new Date(),
    };

    const user = new User(id ?? new UserId(), defaultProps);

    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ (å¿…è¦ãªã‚‰)
    // user.addDomainEvent(new UserCreatedEvent(user));

    return Result.ok(user);
  }

  // ãƒ“ã‚¸ãƒã‚¹ãƒ¡ã‚½ãƒƒãƒ‰
  public updateName(name: UserName): Result<void, Error> {
    this.props.name = name;
    this.props.updatedAt = new Date();
    return Result.ok();
  }

  public changeRole(newRole: UserRoleEnum): Result<void, Error> {
    // ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å½¹å‰²æƒ…å ±ã‚’å¤‰æ›´ã™ã‚‹ã ã‘ã§ã€
    // å®Ÿéš›ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ (èªå¯) ã¯ auth ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒæ‹…å½“ã™ã‚‹
    if (!UserRoleEnum.isValid(newRole)) {
        return Result.fail(new InvalidPropertyError('ç„¡åŠ¹ãªãƒ­ãƒ¼ãƒ«ã§ã™ã€‚'));
    }
    if (this.props.role === newRole) {
        return Result.ok();
    }
    this.props.role = newRole;
    this.props.updatedAt = new Date();
    return Result.ok();
  }

  public activate(): Result<void, Error> {
      if (this.props.status === UserStatusEnum.ACTIVE) return Result.ok();
      this.props.status = UserStatusEnum.ACTIVE;
      this.props.updatedAt = new Date();
      // addDomainEvent(new UserActivatedEvent(this)); // å¿…è¦ãªã‚‰
      return Result.ok();
  }

  public deactivate(): Result<void, Error> {
      if (this.props.status === UserStatusEnum.INACTIVE) return Result.ok();
      this.props.status = UserStatusEnum.INACTIVE;
      this.props.updatedAt = new Date();
      // addDomainEvent(new UserDeactivatedEvent(this)); // å¿…è¦ãªã‚‰
      return Result.ok();
  }

  // lastLoginAt ã¯ auth ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒèªè¨¼æˆåŠŸæ™‚ã«ã“ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã¶ã‹ã€
  // ã‚‚ã—ãã¯ç›´æ¥ãƒªãƒã‚¸ãƒˆãƒªçµŒç”±ã§æ›´æ–°ã™ã‚‹å¯èƒ½æ€§ãŒé«˜ã„
  public recordLogin(): void {
    this.props.lastLoginAt = new Date();
    this.props.updatedAt = new Date();
  }
}
```

#### UserRole Enum

```typescript
// @core/user/domain/enums/user-role.enum.ts
export enum UserRoleEnum {
  ADMIN = 'ADMIN',
  USER = 'USER',
  GUEST = 'GUEST' // ä¾‹
}

export namespace UserRoleEnum {
  export function isValid(role: string): role is UserRoleEnum {
    return Object.values(UserRoleEnum).includes(role as UserRoleEnum);
  }

  export function isAdmin(role: UserRoleEnum): boolean {
    return role === UserRoleEnum.ADMIN;
  }

  export function getAll(): UserRoleEnum[] {
    return Object.values(UserRoleEnum);
  }
}
```

### ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

```typescript
// @core/user/domain/repositories/user.repository.interface.ts
// ç‰¹ã«å¤‰æ›´ãªã—ã€‚Emailã‚„IDã§ã®æ¤œç´¢ã¯ä¾ç„¶ã¨ã—ã¦Userãƒ‰ãƒ¡ã‚¤ãƒ³ã®è²¬å‹™ã€‚
import { BaseRepository } from '@core/shared/base';
import { User } from '../entities/user.entity';
import { Email } from '@core/shared/value-objects/email.vo';
import { UserId } from '../value-objects/user-id.vo';
import { Result } from '@core/shared/result';

export interface UserRepositoryInterface extends BaseRepository<User, UserId> {
  findByEmail(email: Email): Promise<Result<User | null, Error>>;
  findAll(): Promise<Result<User[], Error>>;
  // findById, save, delete ã¯ BaseRepository ã‹ã‚‰ç¶™æ‰¿ã•ã‚Œã‚‹
}
```

### ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼ˆãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ï¼‰

```typescript
// @core/user/application/usecases/create-user.usecase.ts
import { BaseUseCase } from '@core/shared/base';
import { Result } from '@core/shared/result';
import { Email } from '@core/shared/value-objects/email.vo';
// import { PasswordHash } from '../../domain/value-objects/password-hash.vo'; // å‰Šé™¤
import { User } from '../../domain/entities/user.entity';
import { UserName } from '../../domain/value-objects/user-name.vo';
import { UserRepositoryInterface } from '../../domain/repositories/user.repository.interface';
import { CreateUserDto } from '../dtos/create-user.dto'; // DTOã«ã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å«ã‚ãªã„æƒ³å®š
import { UserDto } from '../dtos/user.dto';
import { UserAlreadyExistsError } from '../../domain/errors/user-already-exists.error';
// import { PasswordService } from '@core/infrastructure/auth'; // å‰Šé™¤ (authãƒ‰ãƒ¡ã‚¤ãƒ³ã¸)
import { UserMapper } from '../../infrastructure/mappers/user.mapper';
import { InvalidPropertyError } from '@core/shared/errors';

export class CreateUserUseCase implements BaseUseCase<CreateUserDto, Result<UserDto, Error>> {
  constructor(
    private readonly userRepository: UserRepositoryInterface,
    // private readonly passwordService: PasswordService, // å‰Šé™¤
    private readonly userMapper: UserMapper
  ) {}

  public async execute(request: CreateUserDto): Promise<Result<UserDto, Error>> {
    // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    const emailOrError = Email.create(request.email);
    if (emailOrError.isFailure()) {
      return Result.fail(emailOrError.getError());
    }
    const email = emailOrError.getValue();

    // ãƒ¦ãƒ¼ã‚¶ãƒ¼æ—¢å­˜ãƒã‚§ãƒƒã‚¯
    const existingUserResult = await this.userRepository.findByEmail(email);
    if (existingUserResult.isFailure()) {
        return Result.fail(existingUserResult.getError());
    }
    if (existingUserResult.getValue() !== null) {
      return Result.fail(new UserAlreadyExistsError(email.value));
    }

    // åå‰ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    const nameOrError = UserName.create(request.name);
    if (nameOrError.isFailure()) {
      return Result.fail(nameOrError.getError());
    }
    const name = nameOrError.getValue();

    // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã«é–¢ã™ã‚‹å‡¦ç†ã¯å‰Šé™¤
    // if (!request.password || request.password.length < 8) { ... }
    // const hashedPassword = await this.passwordService.hashPassword(request.password);
    // const passwordHashOrError = PasswordHash.create(hashedPassword);
    // ...

    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ä½œæˆ (ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã—)
    const userOrError = User.create({
      email,
      name,
      // passwordHash, // å‰Šé™¤
    });

    if (userOrError.isFailure()) {
      return Result.fail(userOrError.getError());
    }
    const user = userOrError.getValue();

    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä¿å­˜
    const saveResult = await this.userRepository.save(user);
    if (saveResult.isFailure()) {
      return Result.fail(saveResult.getError());
    }

    // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¨­å®šãªã©ã®å¾Œç¶šå‡¦ç†ãŒå¿…è¦ãªå ´åˆã€
    // ã“ã“ã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºè¡Œã™ã‚‹ã‹ã€åˆ¥ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ (authãƒ‰ãƒ¡ã‚¤ãƒ³å´?) ã‚’å‘¼ã³å‡ºã™ãªã©ã®é€£æºãŒå¿…è¦ã€‚
    // ä¾‹: await this.eventEmitter.publish(new UserCreatedNeedsPasswordEvent(user.id));

    // DTOã¸ã®å¤‰æ›
    return Result.ok(this.userMapper.toDto(user));
  }
}
```

### ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£å±¤ï¼ˆãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£…ï¼‰

```typescript
// @core/user/infrastructure/repositories/user.repository.ts
// ... UserMapper ãŒ passwordHash ã‚’æ‰±ã‚ãªã„ã‚ˆã†ã«ä¿®æ­£ãŒå¿…è¦ ...
import { DrizzleD1Database } from 'drizzle-orm/d1';
import { Result } from '@core/shared/result';
import { User } from '../../domain/entities/user.entity';
import { UserRepositoryInterface } from '../../domain/repositories/user.repository.interface.ts';
import { Email } from '@core/shared/value-objects/email.vo';
import { UserId } from '../../domain/value-objects/user-id.vo';
import { UserMapper } from '../mappers/user.mapper';
import { DatabaseError } from '@core/shared/errors';
import * as schema from '@core/infrastructure/database/schema'; // DBã‚¹ã‚­ãƒ¼ãƒ (users ãƒ†ãƒ¼ãƒ–ãƒ«ã« password_hash ã‚«ãƒ©ãƒ ã¯ç„¡ã„æƒ³å®š? or NULLè¨±å®¹?)
import { eq } from 'drizzle-orm';

export class UserRepository implements UserRepositoryInterface {
  constructor(
    private readonly db: DrizzleD1Database<typeof schema>,
    private readonly userMapper: UserMapper
  ) {}

  async save(user: User): Promise<Result<void, Error>> {
    try {
      // UserMapperã¯ passwordHash ã‚’å«ã¾ãªã„æ°¸ç¶šåŒ–ãƒ¢ãƒ‡ãƒ«ã‚’ç”Ÿæˆã™ã‚‹
      const persistenceModel = this.userMapper.toPersistence(user);

      await this.db.insert(schema.users)
        .values(persistenceModel)
        .onConflictDoUpdate({ target: schema.users.id, set: persistenceModel });

      return Result.ok();
    } catch (error) {
      return Result.fail(new DatabaseError(`ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¿å­˜ã‚¨ãƒ©ãƒ¼: ${error.message}`));
    }
  }

  // findById, findByEmail, findAll, delete ã¯åŒæ§˜ã« passwordHash ã‚’æ‰±ã‚ãªã„å‰æ
  async findById(id: UserId): Promise<Result<User | null, Error>> {
    try {
      const result = await this.db.select()
        .from(schema.users)
        .where(eq(schema.users.id, id.value))
        .limit(1);

      if (result.length === 0) {
        return Result.ok(null);
      }
      // UserMapper ã¯ passwordHash ã‚’å«ã¾ãªã„ User ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ç”Ÿæˆã™ã‚‹
      const user = this.userMapper.toDomain(result[0]);
      return Result.ok(user);
    } catch (error) {
      return Result.fail(new DatabaseError(`ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢ã‚¨ãƒ©ãƒ¼(ID: ${id.value}): ${error.message}`));
    }
  }

  async findByEmail(email: Email): Promise<Result<User | null, Error>> {
      // å®Ÿè£…ã¯åŒæ§˜
      // ...
  }
  async findAll(): Promise<Result<User[], Error>> {
      // å®Ÿè£…ã¯åŒæ§˜
      // ...
  }
  async delete(id: UserId): Promise<Result<void, Error>> {
      // å®Ÿè£…ã¯åŒæ§˜
      // ...
  }
}
```

### ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼ˆAPIï¼‰

```typescript
// ä¾‹: app/api/users/route.ts (ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆAPI)
import { NextRequest, NextResponse } from 'next/server';
import { container } from 'tsyringe';
import { CreateUserUseCase } from '@core/user/application/usecases/create-user.usecase';
import { CreateUserDto } from '@core/user/application/dtos/create-user.dto'; // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å«ã¾ãªã„DTO
import { UserAlreadyExistsError } from '@core/user/domain/errors/user-already-exists.error';
import { ValidationError } from '@core/shared/errors';

// ... DIã‚³ãƒ³ãƒ†ãƒŠè¨­å®š (CreateUserUseCaseã®ã¿ç™»éŒ²) ...

export async function POST(req: NextRequest): Promise<NextResponse> {
  try {
    const createUserDto: CreateUserDto = await req.json(); // email, name ã®ã¿

    const createUserUseCase = container.resolve(CreateUserUseCase);
    const result = await createUserUseCase.execute(createUserDto);

    if (result.isFailure()) {
      const error = result.getError();
      // ... ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° ...
      if (error instanceof ValidationError || error instanceof InvalidPropertyError) {
        return NextResponse.json({ error: error.message }, { status: 400 });
      }
      if (error instanceof UserAlreadyExistsError) {
        return NextResponse.json({ error: error.message }, { status: 409 });
      }
      console.error('Create user error:', error);
      return NextResponse.json({ error: 'å†…éƒ¨ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ' }, { status: 500 });
    }

    // æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹ (ä½œæˆã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æƒ…å ±ã¯å«ã¾ãªã„)
    return NextResponse.json(result.getValue(), { status: 201 });

  } catch (error) {
    console.error('API Error:', error);
    return NextResponse.json({ error: 'ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ' }, { status: 500 });
  }
}
// æ³¨: ãƒ­ã‚°ã‚¤ãƒ³API (/api/auth/login) ãªã©ã¯ auth ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒæä¾›ã™ã‚‹
```

## ğŸ“Š Userãƒ‰ãƒ¡ã‚¤ãƒ³å®Ÿè£…ã®å„ªå…ˆé †ä½

1.  **åŸºæœ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†æ©Ÿèƒ½**: CRUD (ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç®¡ç†ã‚’é™¤ã)
2.  **çŠ¶æ…‹ç®¡ç†**: ã‚¢ã‚¯ãƒ†ã‚£ãƒ–/éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã©
3.  **ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†**: åŸºæœ¬çš„ãªæƒ…å ±æ›´æ–°
4.  **çµ„ç¹”/ãƒãƒ¼ãƒ é–¢é€£**: (å°†æ¥çš„ãªæ‹¡å¼µ)
    *èªè¨¼ãƒ»èªå¯é–¢é€£ã¯ `auth` ãƒ‰ãƒ¡ã‚¤ãƒ³ã®å„ªå…ˆé †ä½ã§ç®¡ç†*

## ğŸ“± ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é€£æº

```typescript
// ä¾‹: apps/saas-app/hooks/use-auth-client.ts (èªè¨¼çŠ¶æ…‹ãƒ•ãƒƒã‚¯ - authãƒ‰ãƒ¡ã‚¤ãƒ³ã¨é€£æº)
import { useState, useEffect, useCallback } from 'react';
// LoginDto, AuthTokenDto ãªã©ã¯ @core/auth ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‹ã‚‰ import ã™ã‚‹æƒ³å®š
import { LoginDto } from '@core/auth/application/dtos/login.dto';
import { AuthTokenDto } from '@core/auth/application/dtos/auth-token.dto';
// UserDto ã¯ @core/user ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‹ã‚‰ import
import { UserDto } from '@core/user/application/dtos/user.dto';

// ã“ã®ãƒ•ãƒƒã‚¯ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§ã®çŠ¶æ…‹ç®¡ç†ã¨ **authãƒ‰ãƒ¡ã‚¤ãƒ³** ã®APIå‘¼ã³å‡ºã—ã‚’è¡Œã†
export function useAuthClient() {
  const [user, setUser] = useState<UserDto | null>(null); // èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æƒ…å ±
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  // åˆæœŸåŒ–æ™‚ã«ç¾åœ¨ã®èªè¨¼çŠ¶æ…‹ã‚’ç¢ºèªã™ã‚‹API (/api/auth/me ãªã©) ã‚’å‘¼ã³å‡ºã™
  useEffect(() => {
    async function loadUser() {
      setIsLoading(true);
      try {
        // ã“ã®APIã¯authãƒ‰ãƒ¡ã‚¤ãƒ³ãŒæä¾›ã—ã€èªè¨¼æ¸ˆã¿ãªã‚‰Userãƒ‰ãƒ¡ã‚¤ãƒ³ã®æƒ…å ±ã‚’è¿”ã™
        const response = await fetch('/api/auth/me');
        if (response.ok) {
          const userData: UserDto = await response.json();
          setUser(userData);
        } else {
          setUser(null);
        }
      } catch (err) {
        setError('èªè¨¼çŠ¶æ…‹ã®ç¢ºèªã«å¤±æ•—ã—ã¾ã—ãŸ');
        setUser(null);
      } finally {
        setIsLoading(false);
      }
    }
    loadUser();
  }, []);

  // ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç† (authãƒ‰ãƒ¡ã‚¤ãƒ³ã®APIã‚’å‘¼ã³å‡ºã™)
  const login = useCallback(async (credentials: LoginDto): Promise<boolean> => {
    setIsLoading(true);
    setError(null);
    try {
      // ãƒ­ã‚°ã‚¤ãƒ³API (/api/auth/login) ã¯ auth ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒæä¾›
      const response = await fetch('/api/auth/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(credentials)
      });

      if (!response.ok) {
        const errorData = await response.json();
        setError(errorData.error || 'ãƒ­ã‚°ã‚¤ãƒ³ã«å¤±æ•—ã—ã¾ã—ãŸ');
        return false;
      }

      // ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸå¾Œã€èªè¨¼æƒ…å ± (ä¾‹: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±) ã‚’å–å¾—ã—ã¦çŠ¶æ…‹ã‚’æ›´æ–°
      // ã“ã® /api/auth/me ã®å‘¼ã³å‡ºã—ã¯ login API ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã§ä»£æ›¿ã§ãã‚‹å ´åˆã‚‚ã‚ã‚‹
      const meResponse = await fetch('/api/auth/me');
      if (meResponse.ok) {
          const userData: UserDto = await meResponse.json();
          setUser(userData);
          return true;
      } else {
          setError('ãƒ­ã‚°ã‚¤ãƒ³å¾Œã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
          return false;
      }

    } catch (err) {
      setError('ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ');
      return false;
    } finally {
      setIsLoading(false);
    }
  }, []);

  // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç† (authãƒ‰ãƒ¡ã‚¤ãƒ³ã®APIã‚’å‘¼ã³å‡ºã™)
  const logout = useCallback(async (): Promise<void> => {
    setError(null);
    try {
      // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆAPI (/api/auth/logout) ã¯ auth ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒæä¾›
      await fetch('/api/auth/logout', { method: 'POST' });
      setUser(null);
    } catch (err) {
      setError('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ');
    }
  }, []);

  return {
    user,
    isLoading,
    isAuthenticated: !!user,
    error,
    login,
    logout
  };
}
```

## ğŸ”— ä»–ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã¨ã®é€£æº

Userãƒ‰ãƒ¡ã‚¤ãƒ³ã¯ä»–ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«é€£æºã—ã¾ã™ï¼š

1.  **`auth` ãƒ‰ãƒ¡ã‚¤ãƒ³ã¨ã®é€£æº**: `auth` ãƒ‰ãƒ¡ã‚¤ãƒ³ã¯èªè¨¼ãƒ—ãƒ­ã‚»ã‚¹ä¸­ã« `user` ãƒ‰ãƒ¡ã‚¤ãƒ³ã®æƒ…å ±ã‚’å‚ç…§ï¼ˆä¾‹: `findByEmail`ï¼‰ã—ãŸã‚Šã€èªè¨¼æˆåŠŸå¾Œã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®çŠ¶æ…‹ï¼ˆä¾‹: `lastLoginAt`ï¼‰ã‚’æ›´æ–°ã—ãŸã‚Šã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®é€£æºã¯ã€`user` ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒæä¾›ã™ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚„ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’é€šã˜ã¦è¡Œã‚ã‚Œã¾ã™ã€‚
2.  **ä»–ãƒ‰ãƒ¡ã‚¤ãƒ³ã‹ã‚‰ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å‚ç…§**: ä»–ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ˆä¾‹: `@core/billing`ï¼‰ã¯ã€ç‰¹å®šã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é–¢é€£ã™ã‚‹æ“ä½œã‚’è¡Œã†éš›ã«ã€`UserId` (`@core/user/domain/value-objects/user-id.vo.ts`) ã‚’å‚ç…§ã—ã¾ã™ã€‚å¿…è¦ã«å¿œã˜ã¦ `UserDto` ãªã©ã®å…¬é–‹æƒ…å ±ã‚‚åˆ©ç”¨ã—ã¾ã™ã€‚
3.  **ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ**: `UserCreatedEvent` ã‚„ `UserUpdatedEvent` ãªã©ã‚’ç™ºè¡Œã—ã€ä»–ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ˆ`auth` ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’å«ã‚€ï¼‰ãŒãã‚Œã‚’è³¼èª­ã—ã¦å¾Œç¶šå‡¦ç†ï¼ˆä¾‹: é–¢é€£ãƒ‡ãƒ¼ã‚¿ã®åˆæœŸåŒ–ï¼‰ã‚’è¡Œã†ã€ç–çµåˆãªé€£æºã‚‚å¯èƒ½ã§ã™ã€‚

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã¨ã‚µãƒ³ãƒ—ãƒ«å®Ÿè£…

ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã®åŸºæœ¬æ–¹é‡ã¯å¤‰ã‚ã‚Šã¾ã›ã‚“ãŒã€èªè¨¼é–¢é€£ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆ`PasswordHash`, `AuthenticationService`, `AuthenticateUserUseCase` ãªã©ï¼‰ã«é–¢ã™ã‚‹ãƒ†ã‚¹ãƒˆã¯ `auth` ãƒ‰ãƒ¡ã‚¤ãƒ³å´ã®è²¬å‹™ã¨ãªã‚Šã¾ã™ã€‚
Userãƒ‰ãƒ¡ã‚¤ãƒ³ã®ãƒ†ã‚¹ãƒˆã§ã¯ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰é–¢é€£ã®ãƒ­ã‚¸ãƒƒã‚¯ã¯æ¤œè¨¼å¯¾è±¡ã‹ã‚‰é™¤å¤–ã•ã‚Œã¾ã™ã€‚

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ãƒ†ã‚¹ãƒˆä¾‹

```typescript
// @core/user/domain/entities/__tests__/user.entity.unit.test.ts
// ... (Vitestã® describe, it, expect ã‚’ä½¿ç”¨)
import { describe, it, expect } from 'vitest';
import { User } from '../user.entity';
import { Email } from '@core/shared/value-objects/email.vo';
import { UserName } from '../../value-objects';
import { UserRoleEnum, UserStatusEnum } from '../../enums'; // Enumã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

describe('User Entity', () => {
  it('should create a valid user', () => {
    // æº–å‚™
    const emailOrError = Email.create('test@example.com');
    const nameOrError = UserName.create('Test User');

    // å®Ÿè¡Œ (ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã—)
    const userOrError = User.create({
      email: emailOrError.getValue(),
      name: nameOrError.getValue(),
    });

    // æ¤œè¨¼
    expect(userOrError.isSuccess()).toBeTruthy();
    const user = userOrError.getValue();
    expect(user.name.value).toBe('Test User');
    expect(user.email.value).toBe('test@example.com');
    expect(user.role).toBe(UserRoleEnum.USER);
    expect(user.status).toBe(UserStatusEnum.PENDING);
  });

  // ... ä»–ã®ãƒ†ã‚¹ãƒˆ (updateName, activate, deactivate ãªã©) ã¯åŒæ§˜ã ãŒãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰é–¢é€£ã¯å‰Šé™¤ ...
});
```

// ... UserRoleEnum ã®ãƒ†ã‚¹ãƒˆã¯å¤‰æ›´ãªã— ...

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã®ãƒ†ã‚¹ãƒˆä¾‹ (å˜ä½“ãƒ†ã‚¹ãƒˆ)

```typescript
// @core/user/application/usecases/__tests__/create-user.usecase.unit.test.ts
// ... (Vitest, ãƒ¢ãƒƒã‚¯ã‚’ä½¿ç”¨)
import { describe, it, expect, vi, beforeEach } from 'vitest';
import { CreateUserUseCase } from '../create-user.usecase';
import { UserRepositoryInterface } from '../../../domain/repositories/user.repository.interface';
import { CreateUserDto } from '../../dtos/create-user.dto';
import { Result } from '@core/shared/result';
import { UserMapper } from '../../../infrastructure/mappers/user.mapper';

// ... mockUserRepository, mockUserMapper ã®è¨­å®š ...
vi.mock('../../../infrastructure/mappers/user.mapper');

describe('CreateUserUseCase - Unit Tests', () => {
  let useCase: CreateUserUseCase;
  let mockUserRepository: UserRepositoryInterface;
  let mockUserMapper: UserMapper;

  beforeEach(() => {
    // ... ãƒ¢ãƒƒã‚¯ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— ...
    mockUserRepository = { /* vi.fn() ã§ãƒ¢ãƒƒã‚¯åŒ– */ } as any;
    mockUserMapper = new UserMapper() as jest.Mocked<UserMapper>; // ãƒ¢ãƒƒã‚¯ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å–å¾—
    // ä»®ã® toDto å®Ÿè£…
    vi.mocked(mockUserMapper.toDto).mockImplementation((user) => ({ id: user.id.value, email: user.email.value, name: user.name.value, /*...*/ }));

    useCase = new CreateUserUseCase(mockUserRepository, mockUserMapper);
  });

  it('should create a user successfully', async () => {
    // æº–å‚™ (ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã—DTO)
    const dto: CreateUserDto = {
      email: 'test@example.com',
      name: 'Test User',
    };
    vi.mocked(mockUserRepository.findByEmail).mockResolvedValue(Result.ok(null));
    vi.mocked(mockUserRepository.save).mockResolvedValue(Result.ok(undefined));

    // å®Ÿè¡Œ
    const result = await useCase.execute(dto);

    // æ¤œè¨¼
    expect(result.isSuccess()).toBeTruthy();
    expect(mockUserRepository.findByEmail).toHaveBeenCalled();
    // User.create ãŒå‘¼ã°ã‚Œã€æ­£ã—ã„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ save ãŒå‘¼ã°ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
    expect(mockUserRepository.save).toHaveBeenCalledWith(expect.objectContaining({ props: expect.objectContaining({ name: { value: 'Test User' } }) }));
    expect(mockUserMapper.toDto).toHaveBeenCalled();
  });

  // ... UserAlreadyExistsError ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¯åŒæ§˜ ...

  // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰é–¢é€£ã®ã‚¨ãƒ©ãƒ¼ãƒ†ã‚¹ãƒˆã¯å‰Šé™¤
});
```

// ... çµ±åˆãƒ†ã‚¹ãƒˆã€ãƒªãƒã‚¸ãƒˆãƒªãƒ†ã‚¹ãƒˆã€APIãƒ†ã‚¹ãƒˆã€E2Eãƒ†ã‚¹ãƒˆã‚‚åŒæ§˜ã«ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰é–¢é€£ã®å‡¦ç†ã‚’é™¤å¤–ã—ã¦ä¿®æ­£ ...

## ğŸ“Š ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™

(å¤‰æ›´ãªã—)

## ğŸ” ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã¾ã¨ã‚

(å¤‰æ›´ãªã—ã€ãŸã ã—èªè¨¼é–¢é€£ã®ãƒ†ã‚¹ãƒˆã¯ `auth` ãƒ‰ãƒ¡ã‚¤ãƒ³ã®è²¬å‹™)

## ğŸ“š å‚ç…§

(å¤‰æ›´ãªã—)

---

# 5. å°†æ¥å±•é–‹è¨ˆç”»æ›¸ï¼šCLIåŒ–ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåŒ–æˆ¦ç•¥

## ğŸ¯ ç›®çš„

**(ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ç›®çš„)**: ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€Core SaaS Framework ã®é•·æœŸçš„ãªç™ºå±•ã‚’è¦‹æ®ãˆã€é–‹ç™ºåŠ¹ç‡ã¨å†åˆ©ç”¨æ€§ã‚’ã•ã‚‰ã«é«˜ã‚ã‚‹ãŸã‚ã®æˆ¦ç•¥ã€ç‰¹ã« CLI (Command Line Interface) ãƒ„ãƒ¼ãƒ«ã®é–‹ç™ºè¨ˆç”»ã¨ã€å„æ©Ÿèƒ½ã‚’ç‹¬ç«‹ã—ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦æä¾›ã™ã‚‹è¨ˆç”»ã«ã¤ã„ã¦è©³è¿°ã—ã¾ã™ã€‚ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ å½¢æˆã¨ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹åŒ–ã¸ã®å±•æœ›ã‚‚å«ã¾ã‚Œã¾ã™ã€‚

ã“ã®æ–‡æ›¸ã¯ã€Core SaaS Frameworkã®é•·æœŸçš„ãªæ‹¡å¼µæˆ¦ç•¥ã¨å°†æ¥ã®ç™ºå±•æ–¹å‘ã‚’è¨˜è¿°ã—ã¾ã™ã€‚ç‰¹ã«ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®CLIåŒ–ã¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåŒ–ã‚’é€šã˜ã¦ã€å†åˆ©ç”¨æ€§ã¨æ‹¡å¼µæ€§ã‚’é«˜ã‚ã‚‹ãŸã‚ã®è¨ˆç”»ã‚’è©³è¿°ã—ã¾ã™ã€‚

## ğŸ“‹ å°†æ¥ãƒ“ã‚¸ãƒ§ãƒ³

Core SaaS Frameworkã¯ã€å˜ãªã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ã€Œè£½å“ã€ã¸ã¨é€²åŒ–ã•ã›ã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¾ã™ï¼š

1. **çµ±åˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: æ¨™æº–çš„ãªSaaSã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ§‹ç¯‰ã«å¿…è¦ãªã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’æä¾›
2. **ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹åŒ–**: ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ä¸»å°ã®ç¶™ç¶šçš„æ”¹å–„ã¨ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ å½¢æˆ
3. **ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å¯¾å¿œ**: æ‹¡å¼µå¯èƒ½ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ˆã‚‹æ©Ÿèƒ½æ‹¡å¼µ
4. **è‡ªå‹•åŒ–ãƒ„ãƒ¼ãƒ«**: é–‹ç™ºåŠ¹ç‡ã‚’é«˜ã‚ã‚‹CLIãƒ„ãƒ¼ãƒ«ã®æä¾›
5. **è¤‡æ•°ç’°å¢ƒå¯¾å¿œ**: å¤šæ§˜ãªã‚¯ãƒ©ã‚¦ãƒ‰ç’°å¢ƒã¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®å¯¾å¿œ

## ğŸ“¦ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆã®å°†æ¥åƒ

```
@core/                   # ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯/ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç¾¤ã®ã‚¹ã‚³ãƒ¼ãƒ—
â”œâ”€â”€ cli/                 # CLIãƒ„ãƒ¼ãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
â”œâ”€â”€ create-core-app/     # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–ãƒ„ãƒ¼ãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
â”œâ”€â”€ shared/              # å…±é€šåŸºç›¤ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
â”œâ”€â”€ infrastructure/      # ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ãƒ©ã‚¤ãƒ–ãƒ©ãƒª (DB, Logger ãªã© Auth.js é€£æºéƒ¨ã¯ auth ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸)
â”œâ”€â”€ ui/                  # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª (ç§»è¡Œå¾Œ)
â”œâ”€â”€ user/                # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª (DDD)
â”œâ”€â”€ billing/             # èª²é‡‘ç®¡ç†ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª (DDD)
â”œâ”€â”€ auth/                # èªè¨¼ãƒ»èªå¯ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª (DDD, Auth.js ãƒ™ãƒ¼ã‚¹) // ä¿®æ­£
â”œâ”€â”€ ai-agent/            # (è¿½åŠ ) AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ©Ÿèƒ½
â”œâ”€â”€ prompt-graph/        # (è¿½åŠ ) ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ç®¡ç†
â”œâ”€â”€ mcp-client/          # (è¿½åŠ ) Multi-Cloud Platformé€£æºã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (éDDDã®ä¾‹)
â”œâ”€â”€ realtime-service/    # (è¿½åŠ ) ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ãƒ©ã‚¤ãƒ–ãƒ©ãƒª (éDDDã®ä¾‹)
â”œâ”€â”€ templates/           # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ next-app/          # Nextãƒ™ãƒ¼ã‚¹ã‚¢ãƒ—ãƒª
â”‚   â”œâ”€â”€ express-api/       # Express APIã‚µãƒ¼ãƒãƒ¼
â”‚   â””â”€â”€ admin-dashboard/   # ç®¡ç†ç”»é¢
â””â”€â”€ docs/                # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
```

## ğŸ› ï¸ CLIåŒ–è¨ˆç”»

### CLI ãƒ„ãƒ¼ãƒ«ã®æ©Ÿèƒ½

1. **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”Ÿæˆ**:
   ```bash
   # æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ (pnpm ã‚’ä½¿ç”¨)
   pnpm dlx create-core-app my-saas-app

   # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæŒ‡å®š
   pnpm dlx create-core-app my-saas-app --template full-stack

   # ç‰¹å®šãƒ‰ãƒ¡ã‚¤ãƒ³ã®ã¿é¸æŠ
   pnpm dlx create-core-app my-saas-app --domains user,billing
   ```

2. **ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ**:
   ```bash
   # æ–°è¦ãƒ‰ãƒ¡ã‚¤ãƒ³ç”Ÿæˆ
   core generate domain product

   # å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç”Ÿæˆ
   core generate value-object product-name --domain product

   # ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ç”Ÿæˆ
   core generate entity product --domain product

   # ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ç”Ÿæˆ
   core generate use-case create-product --domain product
   ```

3. **ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†**:
   ```bash
   # ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”Ÿæˆ
   core db:migrate:generate create-products

   # ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
   core db:migrate:latest

   # ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
   core db:migrate:rollback
   ```

4. **ãƒ†ã‚¹ãƒˆè£œåŠ©**:
   ```bash
   # å˜ä½“ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ (ç‰¹å®šã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã€ã¾ãŸã¯å…¨ä½“)
   core test:unit [--domain product]
   # ã¾ãŸã¯ Turborepo ã‚’ç›´æ¥åˆ©ç”¨
   turbo run test:unit [--filter=@core/product]

   # çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
   core test:integration [--domain product]
   turbo run test:integration [--filter=@core/product]

   # E2Eãƒ†ã‚¹ãƒˆå®Ÿè¡Œ (ç‰¹å®šã®ã‚¢ãƒ—ãƒª)
   core test:e2e --app saas-app [--feature product-creation]
   turbo run test:e2e --filter=saas-app

   # ãƒ†ã‚¹ãƒˆç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
   core test:setup
   ```
   *è£œè¶³: `core test:*` ã‚³ãƒãƒ³ãƒ‰ã¯å†…éƒ¨çš„ã« `turbo run test:*` ã‚’é©åˆ‡ãªå¼•æ•°ã§å‘¼ã³å‡ºã™ãƒ©ãƒƒãƒ‘ãƒ¼ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚ãƒ•ã‚¡ã‚¤ãƒ«å‘½åè¦å‰‡ (`*.unit.test.ts`, `*.integration.test.ts`, `*.e2e.test.ts`) ã«åŸºã¥ãã€ãƒ†ã‚¹ãƒˆã‚¿ã‚¤ãƒ—ã‚’è‡ªå‹•åˆ¤åˆ¥ã—ã€åŠ¹ç‡çš„ãªãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚’æ”¯æ´ã—ã¾ã™ã€‚*

5. **ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ**:
   ```bash
   # ãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™
   core deploy:prepare --env production

   # ç’°å¢ƒå¤‰æ•°æ¤œè¨¼
   core deploy:validate-env --env production
   ```

### CLI å®Ÿè£…è¨ˆç”»

```typescript
// @core/cli/src/commands/generate.ts
import { Command } from 'commander';
import { generateDomain } from '../generators/domain-generator';
import { generateEntity } from '../generators/entity-generator';
import { generateValueObject } from '../generators/value-object-generator';
import { generateUseCase } from '../generators/use-case-generator';

export function registerGenerateCommands(program: Command): void {
  const generate = program.command('generate')
    .description('å„ç¨®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚³ãƒãƒ³ãƒ‰');

  generate
    .command('domain <name>')
    .description('æ–°è¦ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ç”Ÿæˆ')
    .option('-d, --description <description>', 'ãƒ‰ãƒ¡ã‚¤ãƒ³ã®èª¬æ˜')
    .action((name, options) => {
      generateDomain(name, options);
    });

  generate
    .command('entity <name>')
    .description('æ–°è¦ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ç”Ÿæˆ')
    .option('-d, --domain <domain>', 'ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ‰ãƒ¡ã‚¤ãƒ³', 'default')
    .option('-p, --props <props>', 'ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å®šç¾©ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰')
    .action((name, options) => {
      generateEntity(name, options);
    });

  // Value Objectã‚³ãƒãƒ³ãƒ‰
  generate
    .command('value-object <name>')
    .description('æ–°è¦å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”Ÿæˆ')
    .option('-d, --domain <domain>', 'ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ‰ãƒ¡ã‚¤ãƒ³', 'default')
    .option('-p, --props <props>', 'ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å®šç¾©ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰')
    .option('-v, --validation', 'æ¤œè¨¼ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ ')
    .action((name, options) => {
      generateValueObject(name, options);
    });

  // ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚³ãƒãƒ³ãƒ‰
  generate
    .command('use-case <name>')
    .description('æ–°è¦ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’ç”Ÿæˆ')
    .option('-d, --domain <domain>', 'ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ‰ãƒ¡ã‚¤ãƒ³', 'default')
    .option('-e, --entity <entity>', 'é–¢é€£ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£')
    .option('-i, --input <input>', 'å…¥åŠ›DTOå')
    .option('-o, --output <output>', 'å‡ºåŠ›DTOå')
    .action((name, options) => {
      generateUseCase(name, options);
    });
}
```

## ğŸ“š ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåŒ–è¨ˆç”»

### å…±é€šåŸºç›¤ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåŒ–

1. **ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸**:
   ```typescript
   // @core/shared/base/index.ts
   export * from './entity';
   export * from './value-object';
   export * from './aggregate-root';
   export * from './repository';
   export * from './use-case';
   export * from './domain-event';
   export * from './unique-entity-id';
   ```

2. **æ±ç”¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸**:
   ```typescript
   // @core/shared/utils/index.ts
   export * from './date-utils';
   export * from './string-utils';
   export * from './validation-utils';
   export * from './random-utils';
   export * from './object-utils';
   ```

3. **å…±é€šå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸**:
   ```typescript
   // @core/shared/value-objects/index.ts
   export * from './email';
   // export * from './password'; // auth ãƒ‰ãƒ¡ã‚¤ãƒ³ã¸
   // export * from './password-hash'; // auth ãƒ‰ãƒ¡ã‚¤ãƒ³ã¸
   export * from './phone-number';
   export * from './money';
   export * from './address';
   export * from './date-range';
   ```

4. **çµæœå‹ãƒ»ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸**:
   ```typescript
   // @core/shared/result/index.ts
   export * from './result';
   export * from './error-types';
   export * from './app-error';
   export * from './guard';
   ```

### ãƒ‰ãƒ¡ã‚¤ãƒ³åˆ¥ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåŒ–

1. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒª (@core/user)**: (å†…å®¹ã¯æ—¢å­˜ã®ã¾ã¾)
   ```typescript
   // @core/user/index.ts
   // ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
   export * from './src/domain/entities';
   export * from './src/domain/value-objects';
   export * from './src/domain/repositories';
   export * from './src/domain/events';

   // ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
   export * from './src/application/use-cases';
   export * from './src/application/dtos';

   // å®Ÿè£…ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ï¼‰
   export * from './src/infrastructure/repositories';
   // export * from './src/infrastructure/auth'; // auth ãƒ‰ãƒ¡ã‚¤ãƒ³ã¸

   // ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç”¨ãƒ•ãƒƒã‚¯ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ (èªè¨¼é–¢é€£ã¯ auth ã¸)
   // export * from './src/presentation/hooks';
   ```

2. **èª²é‡‘ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒª (@core/billing)**: (å†…å®¹ã¯æ—¢å­˜ã®ã¾ã¾)
   ```typescript
   // @core/billing/index.ts
   export * from './src/domain/entities';
   export * from './src/domain/value-objects';
   export * from './src/domain/repositories';
   export * from './src/domain/services';

   export * from './src/application/use-cases';
   export * from './src/application/dtos';

   export * from './src/infrastructure/payment-providers';
   export * from './src/infrastructure/repositories';

   export * from './src/presentation/hooks';
   ```

3. **(è¿½åŠ ) èªè¨¼ãƒ»èªå¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒª (@core/auth)**:
   - è²¬å‹™: ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ¤œè¨¼ã€ã‚½ãƒ¼ã‚·ãƒ£ãƒ«èªè¨¼ç­‰ï¼‰ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã€JWTç”Ÿæˆãƒ»æ¤œè¨¼ã€ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ï¼ˆèªå¯ï¼‰ãªã©ã€Auth.js ã‚’åˆ©ç”¨ã—ãŸèªè¨¼ãƒ•ãƒ­ãƒ¼å…¨ä½“ã€‚
   - ä¾å­˜: `@core/shared`, `@core/infrastructure` (DBã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ç­‰), `@core/user` (ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®å‚ç…§ã‚„æ›´æ–°ã®ãŸã‚), `next-auth` (Auth.js)
   - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¾‹: `AuthService` (Auth.js ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè£…ç­‰), `JwtService`, `PasswordHash` (Value Object), `CredentialsProvider`, `GoogleProvider` (è¨­å®š), `LoginUseCase`, `VerifyTokenUseCase`, `AuthorizeUseCase`, `AuthAdapter` (DBé€£æº)

4. **(è¿½åŠ ) AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª (@core/ai-agent)**:
   - è²¬å‹™: AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å®šç¾©ã€çŠ¶æ…‹ç®¡ç†ã€ãƒ„ãƒ¼ãƒ«é€£æºã€LLMã¨ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³æŠ½è±¡åŒ–ã€‚
   - ä¾å­˜: `@core/shared`, `@core/infrastructure` (LLMã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç­‰), `@core/prompt-graph` (ä»»æ„)
   - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¾‹: `AgentExecutor`, `AgentState`, `ToolInterface`, `LLMClient` (Adapter)

5. **(è¿½åŠ ) ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚°ãƒ©ãƒ•ãƒ©ã‚¤ãƒ–ãƒ©ãƒª (@core/prompt-graph)**:
   - è²¬å‹™: è¤‡é›‘ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã€æ¡ä»¶åˆ†å²ã€ãƒ«ãƒ¼ãƒ—ãªã©ã‚’å®šç¾©ãƒ»ç®¡ç†ãƒ»å®Ÿè¡Œã™ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¨ãƒ³ã‚¸ãƒ³ã€‚
   - ä¾å­˜: `@core/shared`
   - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¾‹: `GraphRunner`, `NodeDefinition`, `EdgeDefinition`, `GraphState`

6. **(è¿½åŠ ) MCPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª (@core/mcp-client)**:
   - è²¬å‹™: è¤‡æ•°ã®ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ (AWS, GCP, Azureç­‰) ã®ä¸»è¦ã‚µãƒ¼ãƒ“ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’æŠ½è±¡åŒ–ã™ã‚‹ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€‚
   - ä¾å­˜: `@core/shared`, å„ã‚¯ãƒ©ã‚¦ãƒ‰SDK
   - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¾‹: `StorageClient` (S3/GCS/Blobå…±é€šã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹), `ComputeClient` (EC2/GCE/VMå…±é€šã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹)

7. **(è¿½åŠ ) ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚µãƒ¼ãƒ“ã‚¹ãƒ©ã‚¤ãƒ–ãƒ©ãƒª (@core/realtime-service)**:
   - è²¬å‹™: WebSocketãƒ™ãƒ¼ã‚¹ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡åŸºç›¤ã€CRDTã‚’ç”¨ã„ãŸçŠ¶æ…‹åŒæœŸæ©Ÿèƒ½ã®æä¾›ã€‚
   - ä¾å­˜: `@core/shared`, `ws`, CRDTãƒ©ã‚¤ãƒ–ãƒ©ãƒª (ä¾‹: `yjs`)
   - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¾‹:
     - `WebSocketAdapter`: WebSocketæ¥ç¶šã®æŠ½è±¡åŒ–ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€å—ä¿¡ã€èªè¨¼é€£æºã€‚
     - `RoomStateManager`: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆãƒ«ãƒ¼ãƒ ï¼‰ã”ã¨ã®å‚åŠ è€…ã‚„å…±æœ‰ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆçŠ¶æ…‹ã®ç®¡ç†ã€‚
     - `CRDTProvider`: Yjsãªã©ã®CRDTå®Ÿè£…ã‚’ãƒ©ãƒƒãƒ—ã—ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®åŒæœŸã€æ°¸ç¶šåŒ–ã‚¹ãƒˆã‚¢ã¨ã®é€£æºã‚’æä¾›ã€‚

### ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å…¬é–‹æˆ¦ç•¥

```json
// @core/shared/package.json
{
  "name": "@core/shared",
  "version": "0.1.0",
  "description": "Core SaaS Frameworkã®å…±é€šåŸºç›¤ãƒ©ã‚¤ãƒ–ãƒ©ãƒª",
  "main": "dist/index.js",
  "module": "dist/index.mjs",
  "types": "dist/index.d.ts",
  "files": [
    "dist",
    "LICENSE",
    "README.md"
  ],
  "scripts": {
    "build": "tsup src/index.ts --format cjs,esm --dts",
    "lint": "eslint \"src/**/*.ts\"",
    "test": "vitest run", // jest ã‹ã‚‰ vitest ã«å¤‰æ›´
    "test:unit": "vitest run --config vitest.config.unit.ts", // è¿½åŠ 
    "test:integration": "vitest run --config vitest.config.integration.ts", // è¿½åŠ 
    "prepublishOnly": "pnpm run build"
  },
  "publishConfig": {
    "access": "public" // å…¬é–‹ç¯„å›²ã¯è¦æ¤œè¨ (æœ€åˆã¯ private ã§ã‚‚å¯)
  },
  "keywords": [
    "core",
    "saas",
    "framework",
    "ddd",
    "typescript"
  ],
  "author": "Core SaaS Framework Team",
  "license": "MIT",
  "dependencies": {
    "tslib": "^2.6.2", // tsup ãƒ“ãƒ«ãƒ‰æ™‚ã«å¿…è¦ã«ãªã‚‹å¯èƒ½æ€§
    "uuid": "^9.0.1" // ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°ä¾‹
  },
  "devDependencies": {
    // é–‹ç™ºä¾å­˜é–¢ä¿‚ (tsup, eslint, vitest, @types/node ãªã©)
    "tsup": "^8.0.2",
    "vitest": "^1.6.0",
    "@vitest/coverage-v8": "^1.6.0", // ã‚«ãƒãƒ¬ãƒƒã‚¸ç”¨
    "typescript": "^5.4.5",
    "eslint": "^8.57.0",
    "@types/uuid": "^9.0.8",
    "@types/node": "^20.12.12"
  }
}
```

## ğŸš€ (æ–°è¨­) å°†æ¥çš„ãªæŠ€è¡“æ‹¡å¼µã¸ã®å¯¾å¿œ

Core SaaS Frameworkã¯ã€å°†æ¥çš„ãªæŠ€è¡“ãƒˆãƒ¬ãƒ³ãƒ‰ã¸ã®é©å¿œåŠ›ã‚’æŒã¤ã“ã¨ã‚’ç›®æŒ‡ã—ã¾ã™ã€‚ç‰¹ã«ä»¥ä¸‹ã®é ˜åŸŸã¸ã®å¯¾å¿œã‚’è¨ˆç”»ã—ã¦ã„ã¾ã™ã€‚

### AIãƒ»LLMãƒ»MCPæ§‹é€ ã¸ã®çµ±åˆ
AIã€å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ï¼ˆLLMï¼‰ã€Multi-Cloud Platformï¼ˆMCPï¼‰æŠ€è¡“ã®çµ±åˆã‚’å®¹æ˜“ã«ã™ã‚‹è¨­è¨ˆã‚’æ¡ç”¨ã—ã¾ã™ã€‚
- **`@core/ai-agent`**: AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯ã€çŠ¶æ…‹ç®¡ç†ã€å¤–éƒ¨ãƒ„ãƒ¼ãƒ«é€£æºã‚’æ‹…å½“ã€‚
- **`@core/prompt-graph`**: è¤‡é›‘ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚„æ¡ä»¶åˆ†å²ã‚’ç®¡ç†ãƒ»å®Ÿè¡Œã€‚è¦–è¦šçš„ãªç·¨é›†ãƒ„ãƒ¼ãƒ«ã¨ã®é€£æºã‚‚è¦–é‡ã€‚
- **`@core/mcp-client`**: è¤‡æ•°ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã‚’æŠ½è±¡åŒ–ã—ã€çµ±ä¸€çš„ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æä¾›ã€‚

### CRDTãƒ»Realtimeæ§‹é€ ã®éƒ¨å“åŒ–
ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å…±åŒç·¨é›†ãªã©ã®æ©Ÿèƒ½ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã€CRDTã¨WebSocketãƒ™ãƒ¼ã‚¹ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡åŸºç›¤ã‚’éƒ¨å“åŒ–ã—ã¾ã™ã€‚
- **`@core/realtime-service`**: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã€‚
  - `WebSocketAdapter`: WebSocketæ¥ç¶šç®¡ç†ã€‚
  - `RoomStateManager`: ãƒ«ãƒ¼ãƒ ã®çŠ¶æ…‹ç®¡ç†ã€‚
  - `CRDTProvider`: ãƒ‡ãƒ¼ã‚¿åŒæœŸã®ã‚³ã‚¢æ©Ÿèƒ½ (Yjsç­‰ã‚’åˆ©ç”¨)ã€‚

### ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã®é«˜åº¦åŒ–
ãƒ†ã‚¹ãƒˆã®åŠ¹ç‡æ€§ã¨ä¿¡é ¼æ€§ã‚’ã•ã‚‰ã«å‘ä¸Šã•ã›ã¾ã™ã€‚
- **ãƒ†ã‚¹ãƒˆã®è‡ªå‹•åˆ†é¡ã¨å®Ÿè¡Œ**:
  - ãƒ•ã‚¡ã‚¤ãƒ«å‘½åè¦å‰‡ (`*.unit.test.ts`, `*.integration.test.ts`, `*.e2e.test.ts`) ã«åŸºã¥ããƒ†ã‚¹ãƒˆç¨®åˆ¥ã‚’è‡ªå‹•åˆ¤åˆ¥ã€‚
  - Turborepoã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆ (`turbo.json` ã® `pipeline`) ã¨ `package.json` ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’é€£æºã•ã›ã€åŠ¹ç‡çš„ãªãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚’å®Ÿç¾ã€‚
    ```json
    // turbo.json (pipeline ã®ä¾‹)
    "pipeline": {
      "test:unit": {
        "dependsOn": ["^build"],
        "outputs": ["coverage/**"]
      },
      "test:integration": {
        "dependsOn": ["^build"], // DBã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•ãªã©ãŒå«ã¾ã‚Œã‚‹å¯èƒ½æ€§
        "outputs": ["coverage/**"]
      },
      "test:e2e": {
        "dependsOn": ["build"] // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ“ãƒ«ãƒ‰ãŒå¿…è¦
      }
      // ... ä»–ã®ã‚¿ã‚¹ã‚¯ ...
    }
    ```
    - `turbo run test:unit`, `turbo run test:integration --filter=<package-name>` ç­‰ã®ã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œã€‚
- **ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã®çµ±åˆ**: ãƒ¢ãƒãƒ¬ãƒå…¨ä½“ã®ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’è¨ˆæ¸¬ãƒ»çµ±åˆã™ã‚‹ä»•çµ„ã¿ã‚’æ¤œè¨ (ä¾‹: Codecové€£æº)ã€‚

## ğŸ”„ ç§»è¡Œæˆ¦ç•¥

ç¾çŠ¶ã®ãƒ¢ãƒãƒªã‚·ãƒƒã‚¯ãªã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã•ã‚ŒãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¸ã®ç§»è¡Œã¯ã€ä»¥ä¸‹ã®æ®µéšã§é€²ã‚ã¾ã™ï¼š

### æ®µéš1: å†…éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–
1. ãƒ¢ãƒãƒªã‚·ãƒƒã‚¯ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹å†…ã§ã€è«–ç†çš„ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¢ƒç•Œã‚’è¨­å®š
2. `src/modules/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã§å„ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’åˆ†é›¢
3. å†…éƒ¨APIã‚’å®šç¾©ã—ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é–“ã®ä¾å­˜é–¢ä¿‚ã‚’æ˜ç¢ºåŒ–

### æ®µéš2: ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–
1. ãƒ¢ãƒãƒ¬ãƒæ§‹é€ ï¼ˆNXã¾ãŸã¯Turborepoï¼‰ã«ç§»è¡Œ
2. å„ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’å€‹åˆ¥ã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦åˆ†é›¢
3. å…±é€šåŸºç›¤ã‚³ãƒ¼ãƒ‰ã‚’`@core/shared`ã¨ã—ã¦æŠ½å‡º

### æ®µéš3: ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–
1. å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å“è³ªä¿è¨¼ï¼ˆãƒ†ã‚¹ãƒˆã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€APIã®å®‰å®šåŒ–ï¼‰
2. npmãƒ¬ã‚¸ã‚¹ãƒˆãƒªã¸ã®å…¬é–‹æº–å‚™
3. æ®µéšçš„ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒªãƒªãƒ¼ã‚¹

### æ®µéš4: ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã¨æ”¹å–„
1. ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®åé›†
2. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ã‚µãƒ³ãƒ—ãƒ«ã®å……å®Ÿ
3. ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒãƒªã‚·ãƒ¼ã®ç¢ºç«‹ã¨å®Ÿè£…

## ğŸŒ ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ å½¢æˆè¨ˆç”»

### ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª

1. **ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**ï¼š
   - ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯SaaSã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ï¼ˆNext.js + Expressï¼‰
   - APIã‚µãƒ¼ãƒãƒ¼ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ï¼ˆExpressï¼‰
   - ç®¡ç†ç”»é¢ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ï¼ˆReact-Adminï¼‰

2. **ã‚«ã‚¹ã‚¿ãƒ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**ï¼š
   ```bash
   # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ç”Ÿæˆ
   npx create-core-app my-app --template custom-template-url
   
   # æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåŒ–
   core template:create --from ./my-project --name my-custom-template
   ```

### ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ 

1. **ãƒ—ãƒ©ã‚°ã‚¤ãƒ³é–‹ç™º**ï¼š
   ```typescript
   // @core/plugin-shopify/src/index.ts
   import { CorePlugin } from '@core/shared/plugin';
   import { injectable, inject } from 'tsyringe'; // DIåˆ©ç”¨ä¾‹
   
   // @injectable()
   export class ShopifyPlugin implements CorePlugin {
     name = 'shopify';
     // ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã¨ã™ã‚‹ä¾å­˜é–¢ä¿‚ã‚‚DIã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰æ³¨å…¥å¯èƒ½
     // constructor(@inject('ShopifyApiClient') private shopifyClient: any) {}
     
     // ãƒ—ãƒ©ã‚°ã‚¤ãƒ³åˆæœŸåŒ–
     async initialize(config: any): Promise<void> {
       // Shopifyé€£æºã®åˆæœŸåŒ–
     }
     
     // ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«ãƒ•ãƒƒã‚¯ç™»éŒ²
     registerHooks(hooks: any): void {
       hooks.onUserCreated(this.handleUserCreated.bind(this));
     }
     
     private async handleUserCreated(user: any): Promise<void> {
       // Shopifyã‚«ã‚¹ã‚¿ãƒãƒ¼ä½œæˆãƒ­ã‚¸ãƒƒã‚¯
     }
   }
   ```

2. **ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ä½¿ç”¨ä¾‹**ï¼š
   ```typescript
   // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ä½¿ç”¨
   import { CoreApp } from '@core/app';
   import { ShopifyPlugin } from '@core/plugin-shopify';
   
   const app = new CoreApp();
   
   // ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ç™»éŒ²
   app.use(new ShopifyPlugin({
     apiKey: process.env.SHOPIFY_API_KEY,
     apiSecret: process.env.SHOPIFY_API_SECRET,
     shop: process.env.SHOPIFY_SHOP
   }));
   
   app.start();
   ```

## ğŸ“… ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

| ãƒ•ã‚§ãƒ¼ã‚º | æœŸé–“ | ä¸»è¦ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ |
|---------|------|-----------------|
| Phase 1: åŸºç›¤æ•´å‚™ | 3ãƒ¶æœˆ | - å…±é€šåŸºç›¤ãƒ©ã‚¤ãƒ–ãƒ©ãƒªè¨­è¨ˆã¨å®Ÿè£…<br>- ãƒ¢ãƒãƒ¬ãƒæ§‹é€ ã¸ã®ç§»è¡Œ<br>- ãƒ™ãƒ¼ã‚¹ãƒ‰ãƒ¡ã‚¤ãƒ³å®Ÿè£… |
| Phase 2: CLIé–‹ç™º | 2ãƒ¶æœˆ | - åŸºæœ¬CLIæ©Ÿèƒ½ã®å®Ÿè£…<br>- ã‚³ãƒ¼ãƒ‰ç”Ÿæˆæ©Ÿèƒ½ã®é–‹ç™º<br>- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰ |
| Phase 3: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å…¬é–‹ | 1ãƒ¶æœˆ | - NPMãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ã®å…¬é–‹<br>- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™<br>- ã‚µãƒ³ãƒ—ãƒ«å®Ÿè£…ã®æä¾› |
| Phase 4: ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ æ‹¡å¼µ | ç¶™ç¶šçš„ | - ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…<br>- ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£è²¢çŒ®ã®ä»•çµ„ã¿æ§‹ç¯‰<br>- å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹é€£æºã®æ‹¡å…… |

## ğŸ” æˆåŠŸæŒ‡æ¨™

1. **é–‹ç™ºåŠ¹ç‡**:
   - æ–°è¦SaaSãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç«‹ã¡ä¸Šã’æ™‚é–“ã®50%å‰Šæ¸›
   - ç¹°ã‚Šè¿”ã—å®Ÿè£…ã™ã‚‹æ©Ÿèƒ½ã®å®Ÿè£…æ™‚é–“ã®70%å‰Šæ¸›

2. **ã‚³ãƒ¼ãƒ‰å“è³ª**:
   - ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Šã®ç¶­æŒ
   - é™çš„è§£æã§ã®ã‚¨ãƒ©ãƒ¼/è­¦å‘Šã‚¼ãƒ­ã®ç¶­æŒ

3. **æ¡ç”¨æŒ‡æ¨™**:
   - GitHubã‚¹ã‚¿ãƒ¼æ•°ï¼šåˆå¹´åº¦1,000+
   - NPMãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ•°ï¼šåˆå¹´åº¦æœˆé–“10,000+
   - ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚¿ãƒ¼ï¼šåˆå¹´åº¦20äººä»¥ä¸Š

4. **æŒç¶šå¯èƒ½æ€§**:
   - å®šæœŸçš„ãªãƒªãƒªãƒ¼ã‚¹ã‚µã‚¤ã‚¯ãƒ«ã®ç¢ºç«‹ï¼ˆæœˆ1å›ä»¥ä¸Šï¼‰
   - ã‚¤ã‚·ãƒ¥ãƒ¼è§£æ±ºå¹³å‡æ™‚é–“ã®çŸ­ç¸®

## ğŸ“¢ ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£æ§‹ç¯‰è¨ˆç”»

1. **ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹åŒ–æˆ¦ç•¥**:
   - MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã§ã®å…¬é–‹
   - ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã®æ•´å‚™
   - ã‚¤ã‚·ãƒ¥ãƒ¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ PR ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½œæˆ

2. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»æ•™è‚²ãƒªã‚½ãƒ¼ã‚¹**:
   - å…¬å¼ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã®æ§‹ç¯‰
   - ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã¨ã‚¬ã‚¤ãƒ‰ã®ä½œæˆ
   - ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹åˆ¥ã‚µãƒ³ãƒ—ãƒ«ã®æä¾›

3. **ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒãƒ£ãƒãƒ«**:
   - GitHub Discussionsã§ã®ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ•ã‚©ãƒ¼ãƒ©ãƒ 
   - Discordã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚µãƒ¼ãƒãƒ¼ã®é–‹è¨­
   - å®šæœŸçš„ãªè²¢çŒ®è€…ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°

## ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **ãƒªãƒã‚¸ãƒˆãƒªå†æ§‹ç¯‰**:
   - ãƒ¢ãƒãƒ¬ãƒæ§‹é€ ã¸ã®ç§»è¡Œ
   - è‡ªå‹•åŒ–CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æ§‹ç¯‰
   - ã‚³ãƒ¼ãƒ‰å“è³ªãƒ„ãƒ¼ãƒ«ã®å°å…¥

2. **CLIãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—é–‹ç™º**:
   - ã‚³ãƒãƒ³ãƒ‰è¨­è¨ˆã¨åŸºæœ¬æ©Ÿèƒ½å®Ÿè£…
   - ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”Ÿæˆæ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ

3. **å…±é€šãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®åˆ†é›¢**:
   - åŸºç›¤ã‚³ãƒ¼ãƒ‰ã®æŠ½å‡ºã¨æ•´ç†
   - APIã®è¨­è¨ˆã¨å®‰å®šåŒ–
   - å˜ä½“ãƒ†ã‚¹ãƒˆã®å……å®Ÿ

## ğŸ“š å‚ç…§

- è©³ç´°è¨­è¨ˆã«ã¤ã„ã¦ã¯[ç†æƒ³è¨­è¨ˆæ›¸](./01_ideal_design.md)ã‚’å‚ç…§
- ç§»è¡Œãƒ—ãƒ­ã‚»ã‚¹ã«ã¤ã„ã¦ã¯[ç§»è¡Œè¨ˆç”»æ›¸](./02_migration_plan.md)ã‚’å‚ç…§
- å…±é€šãƒ™ãƒ¼ã‚¹ãƒ‰ãƒ¡ã‚¤ãƒ³ã¯[ãƒ™ãƒ¼ã‚¹ãƒ‰ãƒ¡ã‚¤ãƒ³å®Ÿè£…æŒ‡ç¤ºæ›¸](./03_base_domain_guide.md)ã‚’å‚ç…§
- Userãƒ‰ãƒ¡ã‚¤ãƒ³ã®å®Ÿè£…ã¯[Userãƒ‰ãƒ¡ã‚¤ãƒ³å®Ÿè£…æŒ‡ç¤ºæ›¸](./04_user_domain_guide.md)ã‚’å‚ç…§ 

---

# ç”¨èªé›†

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ä½¿ç”¨ã•ã‚Œã‚‹ä¸»è¦ãªç”¨èªã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚

- **ãƒ¢ãƒãƒ¬ãƒ (Monorepo)**: è¤‡æ•°ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å˜ä¸€ã®ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã™ã‚‹é–‹ç™ºã‚¹ã‚¿ã‚¤ãƒ«ã€‚ã‚³ãƒ¼ãƒ‰å…±æœ‰ã€ä¸€è²«æ€§ç¶­æŒã€ä¾å­˜é–¢ä¿‚ç®¡ç†ãŒå®¹æ˜“ã«ãªã‚‹ã€‚
- **Turborepo**: é«˜é€ŸãªJavaScript/TypeScriptå‘ã‘ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã€‚ãƒ¢ãƒãƒ¬ãƒå†…ã®ã‚¿ã‚¹ã‚¯ï¼ˆãƒ“ãƒ«ãƒ‰ã€ãƒ†ã‚¹ãƒˆãªã©ï¼‰ã®å®Ÿè¡Œã‚’åŠ¹ç‡åŒ–ã—ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ´»ç”¨ã—ã¦æ™‚é–“ã‚’çŸ­ç¸®ã™ã‚‹ã€‚`pnpm` ãªã©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã¨é€£æºã—ã¦å‹•ä½œã™ã‚‹ã€‚
- **Clean Architecture**: ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®é–¢å¿ƒäº‹ã‚’ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«åˆ†é›¢ã™ã‚‹è¨­è¨ˆåŸå‰‡ã€‚ä¾å­˜é–¢ä¿‚ã®æ–¹å‘ã‚’å†…å´ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ï¼‰ã«å‘ã‘ã‚‹ã“ã¨ã§ã€å¤‰æ›´ã«å¼·ããƒ†ã‚¹ãƒˆã—ã‚„ã™ã„æ§‹é€ ã‚’ç›®æŒ‡ã™ã€‚
- **ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆ (DDD - Domain-Driven Design)**: ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®è¤‡é›‘æ€§ã‚’ã€å¯¾è±¡é ˜åŸŸï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ï¼‰ã®ãƒ¢ãƒ‡ãƒ«ã‚’ä¸­å¿ƒã«æ®ãˆã¦æ”»ç•¥ã™ã‚‹è¨­è¨ˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒã€‚
  - **ãƒ‰ãƒ¡ã‚¤ãƒ³ (Domain)**: ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãŒå¯¾è±¡ã¨ã™ã‚‹å•é¡Œé ˜åŸŸã‚„ãƒ“ã‚¸ãƒã‚¹é ˜åŸŸã€‚
  - **ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ (Entity)**: ä¸€æ„ãªè­˜åˆ¥å­ã‚’æŒã¡ã€ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’é€šã˜ã¦åŒä¸€æ€§ãŒè¿½è·¡ã•ã‚Œã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ (ä¾‹: User, Product)ã€‚
  - **å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ (Value Object)**: å±æ€§ã®é›†åˆã§æ§‹æˆã•ã‚Œã€ãã®å€¤ã«ã‚ˆã£ã¦åŒä¸€æ€§ãŒæ±ºã¾ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚ä¸å¤‰ã§ã‚ã‚‹ã“ã¨ãŒå¤šã„ (ä¾‹: Email, Address)ã€‚
  - **é›†ç´„ãƒ«ãƒ¼ãƒˆ (Aggregate Root)**: ä¸€è²«æ€§ã‚’ä¿ã¤ã¹ãã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¨å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã¾ã¨ã¾ã‚Šï¼ˆé›†ç´„ï¼‰ã®ãƒ«ãƒ¼ãƒˆã¨ãªã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã€‚å¤–éƒ¨ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã¯ã“ã®ãƒ«ãƒ¼ãƒˆã‚’é€šã˜ã¦è¡Œã‚ã‚Œã‚‹ã€‚
  - **ãƒªãƒã‚¸ãƒˆãƒª (Repository)**: ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆä¸»ã«é›†ç´„ãƒ«ãƒ¼ãƒˆï¼‰ã®æ°¸ç¶šåŒ–ã¨å–å¾—ã‚’æŠ½è±¡åŒ–ã™ã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã€‚ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ä¾å­˜ã—ã€å®Ÿè£…ã¯ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£å±¤ãŒæ‹…ã†ã€‚
  - **ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ (Domain Service)**: ç‰¹å®šã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚„å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å±ã•ãªã„ã€ãƒ‰ãƒ¡ã‚¤ãƒ³å†…ã®é‡è¦ãªãƒ—ãƒ­ã‚»ã‚¹ã‚„ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¡¨ç¾ã™ã‚‹ã€‚
- **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ (Application Layer)**: ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’å®Ÿè£…ã™ã‚‹å±¤ã€‚ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ“ä½œã—ã€ç‰¹å®šã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã™ã‚‹ãƒ•ãƒ­ãƒ¼ã‚’åˆ¶å¾¡ã™ã‚‹ã€‚
  - **ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ (Use Case)**: ã‚·ã‚¹ãƒ†ãƒ ãŒæä¾›ã™ã‚‹å…·ä½“çš„ãªæ©Ÿèƒ½ã‚„æ“ä½œã®ã‚·ãƒŠãƒªã‚ª (ä¾‹: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã€å•†å“æ¤œç´¢)ã€‚
  - **DTO (Data Transfer Object)**: ãƒ¬ã‚¤ãƒ¤ãƒ¼é–“ã‚„ãƒ—ãƒ­ã‚»ã‚¹é–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’è»¢é€ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¯å«ã¾ãªã„ã€‚
- **ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£å±¤ (Infrastructure Layer)**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹ã€å¤–éƒ¨APIé€£æºã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ æ“ä½œãªã©ã€æŠ€è¡“çš„ãªè©³ç´°ã‚’å®Ÿè£…ã™ã‚‹å±¤ã€‚
- **ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤ (Presentation Layer)**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚„APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’æä¾›ã™ã‚‹å±¤ã€‚ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ä¸»ã« `apps/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒæ‹…å½“ã™ã‚‹ã€‚
- **DI (Dependency Injection - ä¾å­˜æ€§ã®æ³¨å…¥)**: ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå¿…è¦ã¨ã™ã‚‹ä¾å­˜é–¢ä¿‚ï¼ˆä»–ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚„ã‚µãƒ¼ãƒ“ã‚¹ï¼‰ã‚’ã€å¤–éƒ¨ã‹ã‚‰ä¸ãˆã‚‹è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®çµåˆåº¦ã‚’ä¸‹ã’ã€ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§ã‚’å‘ä¸Šã•ã›ã‚‹ã€‚ã“ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã¯ `tsyringe` ãªã©ã®DIã‚³ãƒ³ãƒ†ãƒŠãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä½¿ç”¨ã‚’æ¨å¥¨ã™ã‚‹ã€‚
- **Vitest**: Vite ä¸Šã§å‹•ä½œã™ã‚‹é«˜é€Ÿãªãƒ¦ãƒ‹ãƒƒãƒˆãƒ»çµ±åˆãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€‚
- **Playwright**: Microsoft ãŒé–‹ç™ºã—ãŸ E2E (End-to-End) ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€‚ä¸»è¦ãªãƒ–ãƒ©ã‚¦ã‚¶ã§ã®è‡ªå‹•æ“ä½œã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã€‚
- **Drizzle ORM**: TypeScript/JavaScript å‘ã‘ã® SQL ãƒ©ã‚¤ã‚¯ãª ORMã€‚å‹å®‰å…¨æ€§ãŒé«˜ãã€ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã‹ã‚‰å‹ã‚’ç”Ÿæˆã§ãã‚‹ã€‚
- **Supabase**: ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã® Firebase ä»£æ›¿ã€‚èªè¨¼ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ (PostgreSQL)ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãªã©ã®æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ BaaS (Backend as a Service)ã€‚
- **Auth.js (NextAuth.js v5)**: Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å‘ã‘ã®èªè¨¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€‚OAuth, Email/Password, Magic Linkãªã©å¤šæ§˜ãªèªè¨¼æ–¹å¼ã«å¯¾å¿œã—ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã‚„JWTå‡¦ç†æ©Ÿèƒ½ã‚’æä¾›ã€‚Next.js ã¨ã®è¦ªå’Œæ€§ãŒé«˜ã„ã€‚
- **neverthrow**: TypeScriptå‘ã‘ã®é–¢æ•°å‹ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€‚Result ãƒ‘ã‚¿ãƒ¼ãƒ³ (æˆåŠŸå€¤ `Ok` ã¨å¤±æ•—ã‚¨ãƒ©ãƒ¼ `Err` ã‚’æŒã¤å‹) ã‚’æä¾›ã—ã€ä¾‹å¤–ã§ã¯ãªãå€¤ã¨ã—ã¦ã‚¨ãƒ©ãƒ¼ã‚’æ‰±ã†ã“ã¨ã‚’ä¿ƒé€²ã™ã‚‹ã€‚å‹å®‰å…¨ãªã‚¨ãƒ©ãƒ¼å‡¦ç†ã‚’å®Ÿç¾ã™ã‚‹ã€‚

## ğŸ—ºï¸ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå˜ä½ã§ç§»è¡Œå¯èƒ½ãªãƒ•ã‚©ãƒ«ãƒ€

// ... existing code ...
| `config`                               | `packages/config/*`             | è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ (ä¾‹: ESLint, Prettier, TSConfig)         |
| `presentation/components/common/ui/` | `packages/web/components/ui/` | Shadcn/UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç¾¤ã€‚Webã‚¢ãƒ—ãƒªå›ºæœ‰UIã€‚ |

## ğŸ—ºï¸ ãƒ•ã‚¡ã‚¤ãƒ«å˜ä½ã§ã®ç§»è¡ŒãŒå¿…è¦ãªãƒ•ã‚©ãƒ«ãƒ€

// ... existing code ...
| `presentation/providers/I18nProvider.tsx`        | `packages/web/providers/I18nProvider.tsx`         | i18nãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã€‚Webã‚¢ãƒ—ãƒªå›ºæœ‰ã€‚                               |

## ğŸ—ºï¸ ç§»è¡Œãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—
// ... existing code ...