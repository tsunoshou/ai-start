# 1. è¨­è¨ˆæ›¸ï¼šCore SaaS Framework ç†æƒ³æ§‹æˆã®è¨­è¨ˆ

## ğŸ¯ ç›®çš„

ã“ã®è¨­è¨ˆæ›¸ã¯ã€å˜ä¸€ã®SaaSã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ã€**å†åˆ©ç”¨å¯èƒ½ãªSaaSè£½é€ ãƒã‚·ãƒ³**ã¸ã®é€²åŒ–ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®ç†æƒ³çš„ãªæ§‹é€ ã‚’å®šç¾©ã—ã¾ã™ã€‚ã“ã®è¨­è¨ˆã«ã‚ˆã‚Šã€è¤‡æ•°ã®SaaSãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å†åˆ©ç”¨å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’åŠ¹ç‡çš„ã«ä½œæˆãƒ»ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

## ğŸ“‹ å‰ææ¡ä»¶

- **ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆï¼ˆDDDï¼‰ã¨ Clean Architecture ã®æ¡ç”¨**
  - ãƒ‰ãƒ¡ã‚¤ãƒ³ä¸­å¿ƒã®è¨­è¨ˆ
  - ãƒ¬ã‚¤ãƒ¤ãƒ¼é–“ã®æ˜ç¢ºãªè²¬ä»»åˆ†é›¢
  - ä¾å­˜é–¢ä¿‚ã®æ–¹å‘ã®åˆ¶å¾¡ï¼ˆå†…å´ã«ä¾å­˜ï¼‰

- **TypeScript ã«ã‚ˆã‚‹å‹å®‰å…¨æ€§ã®ç¢ºä¿**
  - å³æ ¼ãªå‹å®šç¾©ã«ã‚ˆã‚‹ãƒã‚°ã®é˜²æ­¢
  - é«˜ã„ä¿å®ˆæ€§ã¨æ‹¡å¼µæ€§ã®æä¾›

- **Next.js ã«ã‚ˆã‚‹ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**
  - App Router ã®æ´»ç”¨
  - Server Components ã¨ Client Components ã®é©åˆ‡ãªä½¿ã„åˆ†ã‘

- **ORM**: Drizzle ORM
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: PostgreSQL
- **èªè¨¼**: Supabase Auth
- **ãƒ†ã‚¹ãƒˆ**: Vitest (Unit/Integration), Playwright (E2E)

## ğŸ—ï¸ å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

**ãƒ¢ãƒãƒ¬ãƒã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**ï¼ˆTurborepo ã¾ãŸã¯ pnpm workspaces ã«ã‚ˆã‚‹å®Ÿè£…ï¼‰ã‚’æ¡ç”¨ã—ã¾ã™ã€‚

### ãƒ¢ãƒãƒ¬ãƒã®ãƒ¡ãƒªãƒƒãƒˆ

- **ã‚³ãƒ¼ãƒ‰å…±æœ‰ã®å®¹æ˜“ã•**ï¼šå…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¤‡æ•°ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§å†åˆ©ç”¨
- **ä¸€è²«æ€§ã®ç¶­æŒ**ï¼šè¨­è¨ˆåŸå‰‡ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã€ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã®çµ±ä¸€
- **ç‹¬ç«‹ã—ãŸãƒ‡ãƒ—ãƒ­ã‚¤**ï¼šå€‹åˆ¥ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç‹¬ç«‹ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤å¯èƒ½
- **å°†æ¥ã®ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŒ–ã¸ã®æº–å‚™**ï¼šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é–“ã®å¢ƒç•Œã¨ä¾å­˜é–¢ä¿‚ã®æ˜ç¢ºåŒ–

## ğŸ“‚ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€  (ç†æƒ³å½¢)

```
/
â”œâ”€â”€ apps/                    # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ saas-app/            # ãƒ¡ã‚¤ãƒ³SaaSã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”‚   â”œâ”€â”€ app/             # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ public/          # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”‚   â”œâ”€â”€ tests/           # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å›ºæœ‰ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”‚   â””â”€â”€ e2e/         # E2Eãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”‚       â””â”€â”€ __tests__/
â”‚   â”‚   â”‚           â””â”€â”€ user-login.e2e.test.ts
â”‚   â”‚   â””â”€â”€ package.json     # ã‚¢ãƒ—ãƒªå›ºæœ‰ã®ä¾å­˜é–¢ä¿‚
â”‚   â””â”€â”€ admin/               # ç®¡ç†è€…å‘ã‘ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå°†æ¥çš„ã«ï¼‰
â”‚
â”œâ”€â”€ packages/                # å†åˆ©ç”¨å¯èƒ½ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
â”‚   â”œâ”€â”€ shared/              # å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ»ãƒ™ãƒ¼ã‚¹å®šç¾©
â”‚   â”‚   â”œâ”€â”€ base/            # åŸºæœ¬ã‚¯ãƒ©ã‚¹ãƒ»ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ (entity.base.ts, repository.base.interface.ts)
â”‚   â”‚   â”œâ”€â”€ errors/          # ã‚¨ãƒ©ãƒ¼å®šç¾© (app.error.ts)
â”‚   â”‚   â”œâ”€â”€ result/          # Resultå‹ (result.ts)
â”‚   â”‚   â”œâ”€â”€ types/           # å…±é€šå‹å®šç¾© (common.types.ts)
â”‚   â”‚   â”œâ”€â”€ utils/           # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•° (id.utils.ts)
â”‚   â”‚   â””â”€â”€ value-objects/   # å…±é€šå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ (id.vo.ts)
â”‚   â”‚
â”‚   â”œâ”€â”€ infrastructure/      # ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ database/        # DBã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (Drizzle), ã‚¹ã‚­ãƒ¼ãƒ
â”‚   â”‚   â”œâ”€â”€ auth/            # èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹ (Supabaseé€£æº)
â”‚   â”‚   â””â”€â”€ logger/          # ãƒ­ã‚®ãƒ³ã‚°
â”‚   â”‚
â”‚   â”œâ”€â”€ ui/                  # UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ components/      # å†åˆ©ç”¨å¯èƒ½ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (button.tsx)
â”‚   â”‚   â”œâ”€â”€ hooks/           # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ (use-toast.ts)
â”‚   â”‚   â””â”€â”€ providers/       # ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ (theme-provider.tsx)
â”‚   â”‚
â”‚   â”œâ”€â”€ user/                # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
â”‚   â”‚   â”œâ”€â”€ domain/          # ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ (è©³ç´°ã¯ä¸‹è¨˜)
â”‚   â”‚   â”œâ”€â”€ application/     # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ (è©³ç´°ã¯ä¸‹è¨˜)
â”‚   â”‚   â””â”€â”€ infrastructure/  # ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£å±¤ (è©³ç´°ã¯ä¸‹è¨˜)
â”‚   â”‚
â”‚   â””â”€â”€ [domain-name]/       # ãã®ä»–ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
â”‚       â””â”€â”€ ...              # userã¨åŒæ§˜ã®æ§‹é€ 
â”‚
â”œâ”€â”€ pnpm-workspace.yaml      # workspaceã®è¨­å®š
â”œâ”€â”€ tsconfig.base.json       # å…±é€šTypeScriptè¨­å®š
â””â”€â”€ turbo.json               # Turborepoè¨­å®š (ã¾ãŸã¯é¡ä¼¼ãƒ„ãƒ¼ãƒ«)
```

## ğŸ“¦ ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å†…éƒ¨æ§‹é€  (ä¾‹: user)

å„ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ä»¥ä¸‹ã®æ§‹é€ ã‚’æŒã¡ã¾ã™ï¼š

```
packages/user/
â”œâ”€â”€ domain/                  # ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤
â”‚   â”œâ”€â”€ entities/            # ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
â”‚   â”‚   â”œâ”€â”€ __tests__/
â”‚   â”‚   â”‚   â””â”€â”€ user.entity.unit.test.ts
â”‚   â”‚   â””â”€â”€ user.entity.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ value-objects/       # å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â”‚   â”‚   â”œâ”€â”€ __tests__/
â”‚   â”‚   â”‚   â””â”€â”€ email.vo.unit.test.ts
â”‚   â”‚   â”œâ”€â”€ user-id.vo.ts
â”‚   â”‚   â””â”€â”€ email.vo.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ enums/               # åˆ—æŒ™å‹
â”‚   â”‚   â”œâ”€â”€ __tests__/
â”‚   â”‚   â”‚   â””â”€â”€ user-status.enum.unit.test.ts
â”‚   â”‚   â””â”€â”€ user-status.enum.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ repositories/        # ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚   â”‚   â””â”€â”€ user.repository.interface.ts
â”‚   â”‚
â”‚   â””â”€â”€ services/            # ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ (è©²å½“ã™ã‚‹å ´åˆ)
â”‚       â”œâ”€â”€ __tests__/
â”‚       â”‚   â””â”€â”€ authentication.service.unit.test.ts
â”‚       â””â”€â”€ authentication.service.ts
â”‚
â”œâ”€â”€ application/             # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”‚   â”œâ”€â”€ usecases/            # ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
â”‚   â”‚   â”œâ”€â”€ __tests__/
â”‚   â”‚   â”‚   â”œâ”€â”€ create-user.usecase.unit.test.ts
â”‚   â”‚   â”‚   â””â”€â”€ create-user.usecase.integration.test.ts
â”‚   â”‚   â”œâ”€â”€ create-user.usecase.ts
â”‚   â”‚   â””â”€â”€ authenticate-user.usecase.ts
â”‚   â”‚
â”‚   â””â”€â”€ dtos/                # ãƒ‡ãƒ¼ã‚¿è»¢é€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â”‚       â”œâ”€â”€ user.dto.ts
â”‚       â””â”€â”€ authentication.dto.ts
â”‚
â”œâ”€â”€ infrastructure/          # ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£å±¤
â”‚   â”œâ”€â”€ repositories/        # ãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£…
â”‚   â”‚   â”œâ”€â”€ __tests__/
â”‚   â”‚   â”‚   â””â”€â”€ user.repository.integration.test.ts
â”‚   â”‚   â””â”€â”€ user.repository.ts  # Drizzleã«ã‚ˆã‚‹å®Ÿè£…
â”‚   â”‚
â”‚   â””â”€â”€ mappers/             # ãƒãƒƒãƒ‘ãƒ¼
â”‚       â”œâ”€â”€ __tests__/
â”‚       â”‚   â””â”€â”€ user.mapper.unit.test.ts
â”‚       â””â”€â”€ user.mapper.ts
â”‚
â””â”€â”€ README.md                 # ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å›ºæœ‰ã®èª¬æ˜
```

## ğŸ”„ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾å­˜é–¢ä¿‚

ä¾å­˜æ–¹å‘ã¯ä»¥ä¸‹ã®åŸå‰‡ã«å¾“ã„ã¾ã™ï¼š

1. **å†…å´ã¸ã®ä¾å­˜**: å¤–å´ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯å†…å´ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«ä¾å­˜å¯èƒ½ã€ãã®é€†ã¯ä¸å¯
   - Infrastructure â†’ Application â†’ Domain

2. **ãƒ‰ãƒ¡ã‚¤ãƒ³é–“ã®ä¾å­˜**: å¿…è¦ãªå ´åˆã®ã¿ãƒ‰ãƒ¡ã‚¤ãƒ³é–“ã®ä¾å­˜ã‚’è¨±å¯
   - ãŸã¨ãˆã° `@core/subscription` ãŒ `@core/user` ã«ä¾å­˜ã™ã‚‹ã‚±ãƒ¼ã‚¹ï¼ˆIDå‚ç…§ãªã©ï¼‰

3. **å…±é€šãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã®ä¾å­˜**: ã™ã¹ã¦ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯å…±é€šãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ä¾å­˜å¯èƒ½
   - ã™ã¹ã¦ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ â†’ `@core/shared`

## ğŸ” ä»–ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¸ã®å‚ç…§

- å®Ÿè£…æ‰‹é †ã®è©³ç´°ã¯ [ç§»è¡Œè¨ˆç”»æ›¸](./02_migration_plan.md) ã‚’å‚ç…§
- ãƒ‰ãƒ¡ã‚¤ãƒ³å®Ÿè£…ã®è©³ç´°ã¯ [ãƒ™ãƒ¼ã‚¹ãƒ‰ãƒ¡ã‚¤ãƒ³å®Ÿè£…æŒ‡ç¤ºæ›¸](./03_base_domain_guide.md) ã¨ [Userãƒ‰ãƒ¡ã‚¤ãƒ³å®Ÿè£…æŒ‡ç¤ºæ›¸](./04_user_domain_guide.md) ã‚’å‚ç…§
- å°†æ¥çš„ãªæ‹¡å¼µè¨ˆç”»ã«ã¤ã„ã¦ã¯ [å°†æ¥å±•é–‹è¨ˆç”»æ›¸](./05_future_expansion_plan.md) ã‚’å‚ç…§ 